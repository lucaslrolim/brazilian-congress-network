/* Copyright 2018 Observable, Inc. */
!function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s},s="function"==typeof Symbol&&Symbol.for,l=s?Symbol.for("react.element"):60103,c=s?Symbol.for("react.portal"):60106,u=s?Symbol.for("react.fragment"):60107,h=s?Symbol.for("react.strict_mode"):60108,d=s?Symbol.for("react.profiler"):60114,p=s?Symbol.for("react.provider"):60109,f=s?Symbol.for("react.context"):60110,m=s?Symbol.for("react.concurrent_mode"):60111,g=s?Symbol.for("react.forward_ref"):60112,v=s?Symbol.for("react.suspense"):60113,b=s?Symbol.for("react.memo"):60115,y=s?Symbol.for("react.lazy"):60116,w="function"==typeof Symbol&&Symbol.iterator;function x(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function S(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||E}function C(){}function T(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||E}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&x("85"),this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=S.prototype;var _=T.prototype=new C;_.constructor=T,a(_,S.prototype),_.isPureReactComponent=!0;var N={current:null,currentDispatcher:null},P=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function L(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)P.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:l,type:e,key:o,ref:a,props:i,_owner:N.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var M=/\/+/g,I=[];function R(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function F(e,t,n){return null==e?0:function e(t,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case l:case c:a=!0}}if(a)return r(i,t,""===n?"."+j(t,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var u=n+j(o=t[s],s);a+=e(o,u,r,i)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=w&&t[w]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)a+=e(o=o.value,u=n+j(o,s++),r,i);else"object"===o&&x("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return a}(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function H(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?$(e,r,n,function(e){return e}):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),r.push(e))}function $(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(M,"$&/")+"/"),F(e,U,t=R(t,o,r,i)),D(t)}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return $(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,H,t=R(null,null,t,n)),D(t)},count:function(e){return F(e,function(){return null},null)},toArray:function(e){var t=[];return $(e,t,null,function(e){return e}),t},only:function(e){return O(e)||x("143"),e}},createRef:function(){return{current:null}},Component:S,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:b,type:e,compare:void 0===t?null:t}},Fragment:u,StrictMode:h,Suspense:v,createElement:L,cloneElement:function(e,t,n){null==e&&x("267",e);var r=void 0,i=a({},e.props),o=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=N.current),void 0!==t.key&&(o=""+t.key);var u=void 0;for(r in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)P.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==u?u[r]:t[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:l,type:e.type,key:o,ref:s,props:i,_owner:c}},createFactory:function(e){var t=L.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.6.3",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:a}};V.unstable_ConcurrentMode=m,V.unstable_Profiler=d;var W={default:V},B=W&&V||W,z=B.default||B,q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G=(n(function(e){}),n(function(e){e.exports=z})),K=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,l=!1;function c(){if(!s){var e=n.expirationTime;l?g():l=!0,m(d,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,s=a;i=e,a=t;try{var l=r()}finally{i=o,a=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,c()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?c():l=!1}}}function d(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{u()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{u()}while(null!==n&&!v())}finally{s=!1,r=i,null!==n?c():l=!1,h()}}var p,f,m,g,v,b=Date,y="function"==typeof setTimeout?setTimeout:void 0,w="function"==typeof clearTimeout?clearTimeout:void 0,x="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,E="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function k(e){p=x(function(t){w(f),e(t)}),f=y(function(){E(p),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var S=performance;t.unstable_now=function(){return S.now()}}else t.unstable_now=function(){return b.now()};if("undefined"!=typeof window&&window._schedMock){var C=window._schedMock;m=C[0],g=C[1],v=C[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var T=null,_=-1,N=function(e,t){if(null!==T){var n=T;T=null;try{_=t,n(e)}finally{_=-1}}};m=function(e,t){-1!==_?setTimeout(m,0,e,t):(T=e,setTimeout(N,t,!0,t),setTimeout(N,1073741823,!1,1073741823))},g=function(){T=null},v=function(){return!1},t.unstable_now=function(){return-1===_?0:_}}else{"undefined"!=typeof console&&("function"!=typeof x&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,A=!1,L=-1,O=!1,M=!1,I=0,R=33,D=33;v=function(){return I<=t.unstable_now()};var F="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===F){A=!1,e=P;var n=L;P=null,L=-1;var r=t.unstable_now(),i=!1;if(0>=I-r){if(!(-1!==n&&n<=r))return O||(O=!0,k(j)),P=e,void(L=n);i=!0}if(null!==e){M=!0;try{e(i)}finally{M=!1}}}},!1);var j=function(e){if(null!==P){k(j);var t=e-I+D;t<D&&R<D?(8>t&&(t=8),D=t<R?R:t):R=t,I=e+D,A||(A=!0,window.postMessage(F,"*"))}else O=!1};m=function(e,t){P=e,L=t,M||0>t?window.postMessage(F,"*"):O||(O=!0,k(j))},g=function(){P=null,A=!1,L=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,a=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=a,h()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=e,c()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,a=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=a,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||v())}});t(K);K.unstable_now,K.unstable_ImmediatePriority,K.unstable_UserBlockingPriority,K.unstable_NormalPriority,K.unstable_IdlePriority,K.unstable_LowPriority,K.unstable_runWithPriority,K.unstable_scheduleCallback,K.unstable_cancelCallback,K.unstable_wrapCallback,K.unstable_getCurrentPriorityLevel,K.unstable_shouldYield;var Y=n(function(e,t){});t(Y);Y.unstable_now,Y.unstable_ImmediatePriority,Y.unstable_UserBlockingPriority,Y.unstable_NormalPriority,Y.unstable_IdlePriority,Y.unstable_LowPriority,Y.unstable_runWithPriority,Y.unstable_scheduleCallback,Y.unstable_cancelCallback,Y.unstable_wrapCallback,Y.unstable_getCurrentPriorityLevel,Y.unstable_shouldYield;var X=n(function(e){e.exports=K});function Q(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}G||Q("227");var J=!1,Z=null,ee=!1,te=null,ne={onError:function(e){J=!0,Z=e}};function re(e,t,n,r,i,o,a,s,l){J=!1,Z=null,function(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}.apply(ne,arguments)}var ie=null,oe={};function ae(){if(ie)for(var e in oe){var t=oe[e],n=ie.indexOf(e);if(-1<n||Q("96",e),!le[n])for(var r in t.extractEvents||Q("97",e),le[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,s=r;ce.hasOwnProperty(s)&&Q("99",s),ce[s]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&se(l[i],a,s);i=!0}else o.registrationName?(se(o.registrationName,a,s),i=!0):i=!1;i||Q("98",r,e)}}}function se(e,t,n){ue[e]&&Q("100",e),ue[e]=t,he[e]=t.eventTypes[n].dependencies}var le=[],ce={},ue={},he={},de=null,pe=null,fe=null;function me(e,t,n){var r=e.type||"unknown-event";e.currentTarget=fe(n),function(e,t,n,r,i,o,a,s,l){if(re.apply(this,arguments),J){if(J){var c=Z;J=!1,Z=null}else Q("198"),c=void 0;ee||(ee=!0,te=c)}}(r,t,void 0,e),e.currentTarget=null}function ge(e,t){return null==t&&Q("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ve(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var be=null;function ye(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)me(e,t[r],n[r]);else t&&me(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var we={injectEventPluginOrder:function(e){ie&&Q("101"),ie=Array.prototype.slice.call(e),ae()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];oe.hasOwnProperty(t)&&oe[t]===r||(oe[t]&&Q("102",t),oe[t]=r,n=!0)}n&&ae()}};function xe(e,t){var n=e.stateNode;if(!n)return null;var r=de(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&Q("231",t,typeof n),n)}function Ee(e){if(null!==e&&(be=ge(be,e)),e=be,be=null,e&&(ve(e,ye),be&&Q("95"),ee))throw e=te,ee=!1,te=null,e}var ke=Math.random().toString(36).slice(2),Se="__reactInternalInstance$"+ke,Ce="__reactEventHandlers$"+ke;function Te(e){if(e[Se])return e[Se];for(;!e[Se];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[Se]).tag||6===e.tag?e:null}function _e(e){return!(e=e[Se])||5!==e.tag&&6!==e.tag?null:e}function Ne(e){if(5===e.tag||6===e.tag)return e.stateNode;Q("33")}function Pe(e){return e[Ce]||null}function Ae(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Le(e,t,n){(t=xe(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=ge(n._dispatchListeners,t),n._dispatchInstances=ge(n._dispatchInstances,e))}function Oe(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ae(t);for(t=n.length;0<t--;)Le(n[t],"captured",e);for(t=0;t<n.length;t++)Le(n[t],"bubbled",e)}}function Me(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=xe(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ge(n._dispatchListeners,t),n._dispatchInstances=ge(n._dispatchInstances,e))}function Ie(e){e&&e.dispatchConfig.registrationName&&Me(e._targetInst,null,e)}function Re(e){ve(e,Oe)}var De=!("undefined"==typeof window||!window.document||!window.document.createElement);function Fe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var je={animationend:Fe("Animation","AnimationEnd"),animationiteration:Fe("Animation","AnimationIteration"),animationstart:Fe("Animation","AnimationStart"),transitionend:Fe("Transition","TransitionEnd")},He={},Ue={};function $e(e){if(He[e])return He[e];if(!je[e])return e;var t,n=je[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ue)return He[e]=n[t];return e}De&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var Ve=$e("animationend"),We=$e("animationiteration"),Be=$e("animationstart"),ze=$e("transitionend"),qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ge=null,Ke=null,Ye=null;function Xe(){if(Ye)return Ye;var e,t,n=Ke,r=n.length,i="value"in Ge?Ge.value:Ge.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ye=i.slice(e,1<t?1-t:void 0)}function Qe(){return!0}function Je(){return!1}function Ze(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qe:Je,this.isPropagationStopped=Je,this}function et(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function tt(e){e instanceof this||Q("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function nt(e){e.eventPool=[],e.getPooled=et,e.release=tt}a(Ze.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qe)},persist:function(){this.isPersistent=Qe},isPersistent:Je,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Je,this._dispatchInstances=this._dispatchListeners=null}}),Ze.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ze.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,nt(n),n},nt(Ze);var rt=Ze.extend({data:null}),it=Ze.extend({data:null}),ot=[9,13,27,32],at=De&&"CompositionEvent"in window,st=null;De&&"documentMode"in document&&(st=document.documentMode);var lt=De&&"TextEvent"in window&&!st,ct=De&&(!at||st&&8<st&&11>=st),ut=String.fromCharCode(32),ht={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},dt=!1;function pt(e,t){switch(e){case"keyup":return-1!==ot.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ft(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var mt=!1;var gt={eventTypes:ht,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(at)e:{switch(e){case"compositionstart":i=ht.compositionStart;break e;case"compositionend":i=ht.compositionEnd;break e;case"compositionupdate":i=ht.compositionUpdate;break e}i=void 0}else mt?pt(e,n)&&(i=ht.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=ht.compositionStart);return i?(ct&&"ko"!==n.locale&&(mt||i!==ht.compositionStart?i===ht.compositionEnd&&mt&&(o=Xe()):(Ke="value"in(Ge=r)?Ge.value:Ge.textContent,mt=!0)),i=rt.getPooled(i,t,n,r),o?i.data=o:null!==(o=ft(n))&&(i.data=o),Re(i),o=i):o=null,(e=lt?function(e,t){switch(e){case"compositionend":return ft(t);case"keypress":return 32!==t.which?null:(dt=!0,ut);case"textInput":return(e=t.data)===ut&&dt?null:e;default:return null}}(e,n):function(e,t){if(mt)return"compositionend"===e||!at&&pt(e,t)?(e=Xe(),Ye=Ke=Ge=null,mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ct&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=it.getPooled(ht.beforeInput,t,n,r)).data=e,Re(t)):t=null,null===o?t:null===t?o:[o,t]}},vt=null,bt=null,yt=null;function wt(e){if(e=pe(e)){"function"!=typeof vt&&Q("280");var t=de(e.stateNode);vt(e.stateNode,e.type,t)}}function xt(e){bt?yt?yt.push(e):yt=[e]:bt=e}function Et(){if(bt){var e=bt,t=yt;if(yt=bt=null,wt(e),t)for(e=0;e<t.length;e++)wt(t[e])}}function kt(e,t){return e(t)}function St(e,t,n){return e(t,n)}function Ct(){}var Tt=!1;function _t(e,t){if(Tt)return e(t);Tt=!0;try{return kt(e,t)}finally{Tt=!1,(null!==bt||null!==yt)&&(Ct(),Et())}}var Nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nt[e.type]:"textarea"===t}function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Lt(e){if(!De)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ot(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Mt(e){e._valueTracker||(e._valueTracker=function(e){var t=Ot(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function It(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ot(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Rt=G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dt=/^(.*)[\\\/]/,Ft="function"==typeof Symbol&&Symbol.for,jt=Ft?Symbol.for("react.element"):60103,Ht=Ft?Symbol.for("react.portal"):60106,Ut=Ft?Symbol.for("react.fragment"):60107,$t=Ft?Symbol.for("react.strict_mode"):60108,Vt=Ft?Symbol.for("react.profiler"):60114,Wt=Ft?Symbol.for("react.provider"):60109,Bt=Ft?Symbol.for("react.context"):60110,zt=Ft?Symbol.for("react.concurrent_mode"):60111,qt=Ft?Symbol.for("react.forward_ref"):60112,Gt=Ft?Symbol.for("react.suspense"):60113,Kt=Ft?Symbol.for("react.memo"):60115,Yt=Ft?Symbol.for("react.lazy"):60116,Xt="function"==typeof Symbol&&Symbol.iterator;function Qt(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Xt&&e[Xt]||e["@@iterator"])?e:null}function Jt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case zt:return"ConcurrentMode";case Ut:return"Fragment";case Ht:return"Portal";case Vt:return"Profiler";case $t:return"StrictMode";case Gt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Bt:return"Context.Consumer";case Wt:return"Context.Provider";case qt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Kt:return Jt(e.type);case Yt:if(e=1===e._status?e._result:null)return Jt(e)}return null}function Zt(e){var t="";do{e:switch(e.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var n=e._debugOwner,r=e._debugSource,i=Jt(e.type),o=null;n&&(o=Jt(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Dt,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break e;default:o=""}t+=o,e=e.return}while(e);return t}var en=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tn=Object.prototype.hasOwnProperty,nn={},rn={};function on(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new on(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new on(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new on(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new on(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new on(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){an[e]=new on(e,3,!0,e,null)}),["capture","download"].forEach(function(e){an[e]=new on(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){an[e]=new on(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){an[e]=new on(e,5,!1,e.toLowerCase(),null)});var sn=/[\-:]([a-z])/g;function ln(e){return e[1].toUpperCase()}function cn(e,t,n,r){var i=an.hasOwnProperty(t)?an[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!tn.call(rn,e)||!tn.call(nn,e)&&(en.test(e)?rn[e]=!0:(nn[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function un(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function hn(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function dn(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=un(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function pn(e,t){null!=(t=t.checked)&&cn(e,"checked",t,!1)}function fn(e,t){pn(e,t);var n=un(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?gn(e,t.type,n):t.hasOwnProperty("defaultValue")&&gn(e,t.type,un(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function mn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function gn(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sn,ln);an[t]=new on(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sn,ln);an[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sn,ln);an[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),an.tabIndex=new on("tabIndex",1,!1,"tabindex",null);var vn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function bn(e,t,n){return(e=Ze.getPooled(vn.change,e,t,n)).type="change",xt(n),Re(e),e}var yn=null,wn=null;function xn(e){Ee(e)}function En(e){if(It(Ne(e)))return e}function kn(e,t){if("change"===e)return t}var Sn=!1;function Cn(){yn&&(yn.detachEvent("onpropertychange",Tn),wn=yn=null)}function Tn(e){"value"===e.propertyName&&En(wn)&&_t(xn,e=bn(wn,e,At(e)))}function _n(e,t,n){"focus"===e?(Cn(),wn=n,(yn=t).attachEvent("onpropertychange",Tn)):"blur"===e&&Cn()}function Nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return En(wn)}function Pn(e,t){if("click"===e)return En(t)}function An(e,t){if("input"===e||"change"===e)return En(t)}De&&(Sn=Lt("input")&&(!document.documentMode||9<document.documentMode));var Ln={eventTypes:vn,_isInputEventSupported:Sn,extractEvents:function(e,t,n,r){var i=t?Ne(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=kn:Pt(i)?Sn?o=An:(o=Nn,a=_n):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Pn),o&&(o=o(e,t)))return bn(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&gn(i,"number",i.value)}},On=Ze.extend({view:null,detail:null}),Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function Rn(){return In}var Dn=0,Fn=0,jn=!1,Hn=!1,Un=On.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rn,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dn;return Dn=e.screenX,jn?"mousemove"===e.type?e.screenX-t:0:(jn=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Fn;return Fn=e.screenY,Hn?"mousemove"===e.type?e.screenY-t:0:(Hn=!0,0)}}),$n=Un.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Wn={eventTypes:Vn,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?Te(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Un,s=Vn.mouseLeave,l=Vn.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=$n,s=Vn.pointerLeave,l=Vn.pointerEnter,c="pointer");var u=null==o?i:Ne(o);if(i=null==t?i:Ne(t),(e=a.getPooled(s,o,n,r)).type=c+"leave",e.target=u,e.relatedTarget=i,(n=a.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=u,r=t,o&&r)e:{for(i=r,c=0,a=t=o;a;a=Ae(a))c++;for(a=0,l=i;l;l=Ae(l))a++;for(;0<c-a;)t=Ae(t),c--;for(;0<a-c;)i=Ae(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=Ae(t),i=Ae(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=Ae(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=Ae(r);for(r=0;r<t.length;r++)Me(t[r],"bubbled",e);for(r=o.length;0<r--;)Me(o[r],"captured",n);return[e,n]}},Bn=Object.prototype.hasOwnProperty;function zn(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function qn(e,t){if(zn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Bn.call(t,n[r])||!zn(e[n[r]],t[n[r]]))return!1;return!0}function Gn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function Kn(e){2!==Gn(e)&&Q("188")}function Yn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=Gn(e))&&Q("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return Kn(i),e;if(a===r)return Kn(i),t;a=a.sibling}Q("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||Q("189")}}n.alternate!==r&&Q("190")}return 3!==n.tag&&Q("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var Xn=Ze.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qn=Ze.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jn=On.extend({relatedTarget:null});function Zn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nr=On.extend({key:function(e){if(e.key){var t=er[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rn,charCode:function(e){return"keypress"===e.type?Zn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),rr=Un.extend({dataTransfer:null}),ir=On.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rn}),or=Ze.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ar=Un.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sr=[["abort","abort"],[Ve,"animationEnd"],[We,"animationIteration"],[Be,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ze,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],lr={},cr={};function ur(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},lr[e]=t,cr[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){ur(e,!0)}),sr.forEach(function(e){ur(e,!1)});var hr={eventTypes:lr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=cr[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=cr[e];if(!i)return null;switch(e){case"keypress":if(0===Zn(n))return null;case"keydown":case"keyup":e=nr;break;case"blur":case"focus":e=Jn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ir;break;case Ve:case We:case Be:e=Xn;break;case ze:e=or;break;case"scroll":e=On;break;case"wheel":e=ar;break;case"copy":case"cut":case"paste":e=Qn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=$n;break;default:e=Ze}return Re(t=e.getPooled(i,t,n,r)),t}},dr=hr.isInteractiveTopLevelEventType,pr=[];function fr(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=Te(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=At(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<le.length;s++){var l=le[s];l&&(l=l.extractEvents(r,t,o,i))&&(a=ge(a,l))}Ee(a)}}var mr=!0;function gr(e,t){if(!t)return null;var n=(dr(e)?br:yr).bind(null,e);t.addEventListener(e,n,!1)}function vr(e,t){if(!t)return null;var n=(dr(e)?br:yr).bind(null,e);t.addEventListener(e,n,!0)}function br(e,t){St(yr,e,t)}function yr(e,t){if(mr){var n=At(t);if(null===(n=Te(n))||"number"!=typeof n.tag||2===Gn(n)||(n=null),pr.length){var r=pr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{_t(fr,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>pr.length&&pr.push(e)}}}var wr={},xr=0,Er="_reactListenersID"+(""+Math.random()).slice(2);function kr(e){return Object.prototype.hasOwnProperty.call(e,Er)||(e[Er]=xr++,wr[e[Er]]={}),wr[e[Er]]}function Sr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tr(e,t){var n,r=Cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cr(r)}}function _r(){for(var e=window,t=Sr();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(n){break}t=Sr(e.document)}return t}function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Pr=De&&"documentMode"in document&&11>=document.documentMode,Ar={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Lr=null,Or=null,Mr=null,Ir=!1;function Rr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ir||null==Lr||Lr!==Sr(n)?null:("selectionStart"in(n=Lr)&&Nr(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Mr&&qn(Mr,n)?null:(Mr=n,(e=Ze.getPooled(Ar.select,Or,e,t)).type="select",e.target=Lr,Re(e),e))}var Dr={eventTypes:Ar,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=kr(o),i=he.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?Ne(t):window,e){case"focus":(Pt(o)||"true"===o.contentEditable)&&(Lr=o,Or=t,Mr=null);break;case"blur":Mr=Or=Lr=null;break;case"mousedown":Ir=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ir=!1,Rr(n,r);case"selectionchange":if(Pr)break;case"keydown":case"keyup":return Rr(n,r)}return null}};function Fr(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return G.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function jr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+un(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Hr(e,t){return null!=t.dangerouslySetInnerHTML&&Q("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ur(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&Q("92"),Array.isArray(t)&&(1>=t.length||Q("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:un(n)}}function $r(e,t){var n=un(t.value),r=un(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Vr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}we.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),de=Pe,pe=_e,fe=Ne,we.injectEventPluginsByName({SimpleEventPlugin:hr,EnterLeaveEventPlugin:Wn,ChangeEventPlugin:Ln,SelectEventPlugin:Dr,BeforeInputEventPlugin:gt});var Wr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Br(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Br(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qr,Gr=void 0,Kr=(qr=function(e,t){if(e.namespaceURI!==Wr.svg||"innerHTML"in e)e.innerHTML=t;else{for((Gr=Gr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Gr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return qr(e,t)})}:qr);function Yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Xr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qr=["Webkit","ms","Moz","O"];function Jr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Xr.hasOwnProperty(e)&&Xr[e]?(""+t).trim():t+"px"}function Zr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Jr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Xr).forEach(function(e){Qr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xr[t]=Xr[e]})});var ei=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ti(e,t){t&&(ei[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&Q("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&Q("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||Q("61")),null!=t.style&&"object"!=typeof t.style&&Q("62",""))}function ni(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ri(e,t){var n=kr(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=he[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":vr("scroll",e);break;case"focus":case"blur":vr("focus",e),vr("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Lt(i)&&vr(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===qe.indexOf(i)&&gr(i,e)}n[i]=!0}}}function ii(){}var oi=null,ai=null;function si(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function li(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ci="function"==typeof setTimeout?setTimeout:void 0,ui="function"==typeof clearTimeout?clearTimeout:void 0;function hi(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function di(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}var pi=[],fi=-1;function mi(e){0>fi||(e.current=pi[fi],pi[fi]=null,fi--)}function gi(e,t){pi[++fi]=e.current,e.current=t}var vi={},bi={current:vi},yi={current:!1},wi=vi;function xi(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ei(e){return null!=(e=e.childContextTypes)}function ki(e){mi(yi),mi(bi)}function Si(e){mi(yi),mi(bi)}function Ci(e,t,n){bi.current!==vi&&Q("168"),gi(bi,t),gi(yi,n)}function Ti(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||Q("108",Jt(t)||"Unknown",i);return a({},n,r)}function _i(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,gi(bi,t),gi(yi,yi.current),!0}function Ni(e,t,n){var r=e.stateNode;r||Q("169"),n?(t=Ti(e,t,wi),r.__reactInternalMemoizedMergedChildContext=t,mi(yi),mi(bi),gi(bi,t)):mi(yi),gi(yi,n)}var Pi=null,Ai=null;function Li(e){return function(t){try{return e(t)}catch(n){}}}function Oi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Mi(e,t,n,r){return new Oi(e,t,n,r)}function Ii(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ri(e,t){var n=e.alternate;return null===n?((n=Mi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.firstContextDependency=e.firstContextDependency,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Di(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Ii(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ut:return Fi(n.children,i,o,t);case zt:return ji(n,3|i,o,t);case $t:return ji(n,2|i,o,t);case Vt:return(e=Mi(12,n,t,4|i)).elementType=Vt,e.type=Vt,e.expirationTime=o,e;case Gt:return(e=Mi(13,n,t,i)).elementType=Gt,e.type=Gt,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Wt:a=10;break e;case Bt:a=9;break e;case qt:a=11;break e;case Kt:a=14;break e;case Yt:a=16,r=null;break e}Q("130",null==e?e:typeof e,"")}return(t=Mi(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Fi(e,t,n,r){return(e=Mi(7,e,r,t)).expirationTime=n,e}function ji(e,t,n,r){return e=Mi(8,e,r,t),t=0==(1&t)?$t:zt,e.elementType=t,e.type=t,e.expirationTime=n,e}function Hi(e,t,n){return(e=Mi(6,e,null,t)).expirationTime=n,e}function Ui(e,t,n){return(t=Mi(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $i(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),Bi(t,e)}function Vi(e,t){e.didError=!1;var n=e.latestPingedTime;0!==n&&n>=t&&(e.latestPingedTime=0),n=e.earliestPendingTime;var r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),Bi(t,e)}function Wi(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function Bi(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}var zi=!1;function qi(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Gi(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ki(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Yi(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Xi(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=qi(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=qi(e.memoizedState),i=n.updateQueue=qi(n.memoizedState)):r=e.updateQueue=Gi(i):null===i&&(i=n.updateQueue=Gi(r));null===i||r===i?Yi(r,t):null===r.lastUpdate||null===i.lastUpdate?(Yi(r,t),Yi(i,t)):(Yi(r,t),i.lastUpdate=t)}function Qi(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=qi(e.memoizedState):Ji(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Ji(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Gi(t)),t}function Zi(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=n.payload)?e.call(o,r,i):e))break;return a({},r,i);case 2:zi=!0}return r}function eo(e,t,n,r,i){zi=!1;for(var o=(t=Ji(e,t)).baseState,a=null,s=0,l=t.firstUpdate,c=o;null!==l;){var u=l.expirationTime;u<i?(null===a&&(a=l,o=c),s<u&&(s=u)):(c=Zi(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===u&&(u=l,null===a&&(o=c)),s<h&&(s=h)):(c=Zi(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===u&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=u,e.expirationTime=s,e.memoizedState=c}function to(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),no(t.firstEffect,n),t.firstEffect=t.lastEffect=null,no(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function no(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&Q("191",n),n.call(r)}e=e.nextEffect}}function ro(e,t){return{value:e,source:t,stack:Zt(t)}}var io={current:null},oo=null,ao=null,so=null;function lo(e,t){var n=e.type._context;gi(io,n._currentValue),n._currentValue=t}function co(e){var t=io.current;mi(io),e.type._context._currentValue=t}function uo(e){oo=e,so=ao=null,e.firstContextDependency=null}function ho(e,t){return so!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(so=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ao?(null===oo&&Q("293"),oo.firstContextDependency=ao=t):ao=ao.next=t),e._currentValue}var po={},fo={current:po},mo={current:po},go={current:po};function vo(e){return e===po&&Q("174"),e}function bo(e,t){gi(go,t),gi(mo,e),gi(fo,po);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zr(null,"");break;default:t=zr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}mi(fo),gi(fo,t)}function yo(e){mi(fo),mi(mo),mi(go)}function wo(e){vo(go.current);var t=vo(fo.current),n=zr(t,e.type);t!==n&&(gi(mo,e),gi(fo,n))}function xo(e){mo.current===e&&(mi(fo),mi(mo))}function Eo(e,t){if(e&&e.defaultProps)for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ko=Rt.ReactCurrentOwner,So=(new G.Component).refs;function Co(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var To={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Gn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ps(),i=Ki(r=Ha(r,e));i.payload=t,null!=n&&(i.callback=n),Xi(e,i),Va(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ps(),i=Ki(r=Ha(r,e));i.tag=1,i.payload=t,null!=n&&(i.callback=n),Xi(e,i),Va(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ps(),r=Ki(n=Ha(n,e));r.tag=2,null!=t&&(r.callback=t),Xi(e,r),Va(e,n)}};function _o(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!qn(n,r)||!qn(i,o))}function No(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=ko.currentDispatcher.readContext(o):(i=Ei(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?xi(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=To,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Po(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function Ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=So;var o=t.contextType;"object"==typeof o&&null!==o?i.context=ko.currentDispatcher.readContext(o):(o=Ei(t)?wi:bi.current,i.context=xi(e,o)),null!==(o=e.updateQueue)&&(eo(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Co(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&To.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(eo(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Lo=Array.isArray;function Oo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&Q("289"),r=n.stateNode),r||Q("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===So&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&Q("284"),n._owner||Q("290",e)}return e}function Mo(e,t){"textarea"!==e.type&&Q("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Io(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Ri(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Hi(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Oo(e,t,n),r.return=e,r):((r=Di(n.type,n.key,n.props,null,e.mode,r)).ref=Oo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ui(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Fi(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case jt:return(n=Di(t.type,t.key,t.props,null,e.mode,n)).ref=Oo(e,null,t),n.return=e,n;case Ht:return(t=Ui(t,e.mode,n)).return=e,t}if(Lo(t)||Qt(t))return(t=Fi(t,e.mode,n,null)).return=e,t;Mo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case jt:return n.key===i?n.type===Ut?u(e,t,n.props.children,r,i):l(e,t,n,r):null;case Ht:return n.key===i?c(e,t,n,r):null}if(Lo(n)||Qt(n))return null!==i?null:u(e,t,n,r,null);Mo(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case jt:return e=e.get(null===r.key?n:r.key)||null,r.type===Ut?u(t,e,r.props.children,i,r.key):l(t,e,r,i);case Ht:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Lo(r)||Qt(r))return u(t,e=e.get(n)||null,r,i,null);Mo(t,r)}return null}function f(i,a,s,l){for(var c=null,u=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=d(i,f,s[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)(f=h(i,s[m],l))&&(a=o(f,a,m),null===u?c=f:u.sibling=f,u=f);return c}for(f=r(i,f);m<s.length;m++)(g=p(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),c}function m(i,a,s,l){var c=Qt(s);"function"!=typeof c&&Q("150"),null==(s=c.call(s))&&Q("151");for(var u=c=null,f=a,m=a=0,g=null,v=s.next();null!==f&&!v.done;m++,v=s.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=d(i,f,v.value,l);if(null===b){f||(f=g);break}e&&f&&null===b.alternate&&t(i,f),a=o(b,a,m),null===u?c=b:u.sibling=b,u=b,f=g}if(v.done)return n(i,f),c;if(null===f){for(;!v.done;m++,v=s.next())null!==(v=h(i,v.value,l))&&(a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return c}for(f=r(i,f);!v.done;m++,v=s.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),c}return function(e,r,o,s){var l="object"==typeof o&&null!==o&&o.type===Ut&&null===o.key;l&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case jt:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?o.type===Ut:l.elementType===o.type){n(e,l.sibling),(r=i(l,o.type===Ut?o.props.children:o.props)).ref=Oo(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===Ut?((r=Fi(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Di(o.type,o.key,o.props,null,e.mode,s)).ref=Oo(e,r,o),s.return=e,e=s)}return a(e);case Ht:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ui(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hi(o,e.mode,s)).return=e,e=r),a(e);if(Lo(o))return f(e,r,o,s);if(Qt(o))return m(e,r,o,s);if(c&&Mo(e,o),void 0===o&&!l)switch(e.tag){case 1:case 0:Q("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var Ro=Io(!0),Do=Io(!1),Fo=null,jo=null,Ho=!1;function Uo(e,t){var n=Mi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function $o(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Vo(e){if(Ho){var t=jo;if(t){var n=t;if(!$o(e,t)){if(!(t=hi(n))||!$o(e,t))return e.effectTag|=2,Ho=!1,void(Fo=e);Uo(Fo,n)}Fo=e,jo=di(t)}else e.effectTag|=2,Ho=!1,Fo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Fo=e}function Bo(e){if(e!==Fo)return!1;if(!Ho)return Wo(e),Ho=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!li(t,e.memoizedProps))for(t=jo;t;)Uo(e,t),t=hi(t);return Wo(e),jo=Fo?hi(e.stateNode):null,!0}function zo(){jo=Fo=null,Ho=!1}var qo=Rt.ReactCurrentOwner;function Go(e,t,n,r){t.child=null===e?Do(t,null,n,r):Ro(t,e.child,n,r)}function Ko(e,t,n,r,i){n=n.render;var o=t.ref;return uo(t),r=n(r,o),t.effectTag|=1,Go(e,t,r,i),t.child}function Yo(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Ii(a)||void 0!==a.defaultProps||null!==n.compare?((e=Di(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Xo(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:qn)(i,r)&&e.ref===t.ref)?ra(e,t,o):(t.effectTag|=1,(e=Ri(a,r)).ref=t.ref,e.return=t,t.child=e)}function Xo(e,t,n,r,i,o){return null!==e&&i<o&&qn(e.memoizedProps,r)&&e.ref===t.ref?ra(e,t,o):Jo(e,t,n,r,o)}function Qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Jo(e,t,n,r,i){var o=Ei(n)?wi:bi.current;return o=xi(t,o),uo(t),n=n(r,o),t.effectTag|=1,Go(e,t,n,i),t.child}function Zo(e,t,n,r,i){if(Ei(n)){var o=!0;_i(t)}else o=!1;if(uo(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),No(t,n,r),Ao(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=ko.currentDispatcher.readContext(c):c=xi(t,c=Ei(n)?wi:bi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Po(t,a,r,c),zi=!1;var d=t.memoizedState;l=a.state=d;var p=t.updateQueue;null!==p&&(eo(t,p,r,a,i),l=t.memoizedState),s!==r||d!==l||yi.current||zi?("function"==typeof u&&(Co(t,n,u,r),l=t.memoizedState),(s=zi||_o(t,n,s,r,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Eo(t.type,s),l=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=ko.currentDispatcher.readContext(c):c=xi(t,c=Ei(n)?wi:bi.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Po(t,a,r,c),zi=!1,l=t.memoizedState,d=a.state=l,null!==(p=t.updateQueue)&&(eo(t,p,r,a,i),d=t.memoizedState),s!==r||l!==d||yi.current||zi?("function"==typeof u&&(Co(t,n,u,r),d=t.memoizedState),(u=zi||_o(t,n,s,r,l,d,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=c,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return ea(e,t,n,r,o,i)}function ea(e,t,n,r,i,o){Qo(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Ni(t,n,!1),ra(e,t,o);r=t.stateNode,qo.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ro(t,e.child,null,o),t.child=Ro(t,null,s,o)):Go(e,t,s,o),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function ta(e){var t=e.stateNode;t.pendingContext?Ci(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ci(0,t.context,!1),bo(e,t.containerInfo)}function na(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;return null===e?a?(a=i.fallback,i=Fi(null,r,0,null),0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),r=Fi(a,r,n,null),i.sibling=r,(n=i).return=r.return=t):n=r=Do(t,null,i.children,n):null!==e.memoizedState?(e=(r=e.child).sibling,a?(n=i.fallback,i=Ri(r,r.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=Ri(e,n,e.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=Ro(t,r.child,i.children,n)):(e=e.child,a?(a=i.fallback,(i=Fi(null,r,0,null)).child=e,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Fi(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=Ro(t,e,i.children,n)),t.memoizedState=o,t.child=n,r}function ra(e,t,n){if(null!==e&&(t.firstContextDependency=e.firstContextDependency),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&Q("153"),null!==t.child){for(n=Ri(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ri(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function ia(e,t,n){var r=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!yi.current&&r<n){switch(t.tag){case 3:ta(t),zo();break;case 5:wo(t);break;case 1:Ei(t.type)&&_i(t);break;case 4:bo(t,t.stateNode.containerInfo);break;case 10:lo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?na(e,t,n):null!==(t=ra(e,t,n))?t.sibling:null}return ra(e,t,n)}switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=xi(t,bi.current);if(uo(t),i=r(e,i),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Ei(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&Co(t,r,a,e),i.updater=To,t.stateNode=i,i._reactInternalFiber=t,Ao(t,r,e,n),t=ea(null,t,r,!0,o,n)}else t.tag=0,Go(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Ii(e)?1:0;if(null!=e){if((e=e.$$typeof)===qt)return 11;if(e===Kt)return 14}return 2}(e),o=Eo(e,o),a=void 0,i){case 0:a=Jo(null,t,e,o,n);break;case 1:a=Zo(null,t,e,o,n);break;case 11:a=Ko(null,t,e,o,n);break;case 14:a=Yo(null,t,e,Eo(e.type,o),r,n);break;default:Q("283",e)}return a;case 0:return r=t.type,i=t.pendingProps,Jo(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Zo(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 3:return ta(t),null===(r=t.updateQueue)&&Q("282"),i=null!==(i=t.memoizedState)?i.element:null,eo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(zo(),t=ra(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(jo=di(t.stateNode.containerInfo),Fo=t,i=Ho=!0),i?(t.effectTag|=2,t.child=Do(t,null,r,n)):(Go(e,t,r,n),zo()),t=t.child),t;case 5:return wo(t),null===e&&Vo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,li(r,i)?a=null:null!==o&&li(r,o)&&(t.effectTag|=16),Qo(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=1,t=null):(Go(e,t,a,n),t=t.child),t;case 6:return null===e&&Vo(t),null;case 13:return na(e,t,n);case 4:return bo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ro(t,null,r,n):Go(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Eo(r,i),n);case 7:return Go(e,t,t.pendingProps,n),t.child;case 8:case 12:return Go(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,lo(t,o=i.value),null!==a){var s=a.value;if(0===(o=s===o&&(0!==s||1/s==1/o)||s!=s&&o!=o?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!yi.current){t=ra(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){if(null!==(s=a.firstContextDependency))do{if(s.context===r&&0!=(s.observedBits&o)){if(1===a.tag){var l=Ki(n);l.tag=2,Xi(a,l)}a.expirationTime<n&&(a.expirationTime=n),null!==(l=a.alternate)&&l.expirationTime<n&&(l.expirationTime=n);for(var c=a.return;null!==c;){if(l=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==l&&l.childExpirationTime<n&&(l.childExpirationTime=n);else{if(!(null!==l&&l.childExpirationTime<n))break;l.childExpirationTime=n}c=c.return}}l=a.child,s=s.next}while(null!==s);else l=10===a.tag&&a.type===t.type?null:a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===t){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}Go(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,uo(t),r=r(i=ho(i,o.unstable_observedBits)),t.effectTag|=1,Go(e,t,r,n),t.child;case 14:return Yo(e,t,i=t.type,o=Eo(i.type,t.pendingProps),r,n);case 15:return Xo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Ei(r)?(e=!0,_i(t)):e=!1,uo(t),No(t,r,i),Ao(t,r,i,n),ea(null,t,r,!0,e,n);default:Q("156")}}function oa(e){e.effectTag|=4}var aa=void 0,sa=void 0,la=void 0,ca=void 0;function ua(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Zt(n)),null!==n&&Jt(n.type),t=t.value,null!==e&&1===e.tag&&Jt(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function ha(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(n){ja(e,n)}else t.current=null}function da(e){switch("function"==typeof Ai&&Ai(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(null!==r){var i=e;try{r()}catch(o){ja(i,o)}}n=n.next}while(n!==t)}break;case 1:if(ha(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){ja(e,o)}break;case 5:ha(e);break;case 4:ma(e)}}function pa(e){return 5===e.tag||3===e.tag||4===e.tag}function fa(e){e:{for(var t=e.return;null!==t;){if(pa(t)){var n=t;break e}t=t.return}Q("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:Q("161")}16&n.effectTag&&(Yr(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||pa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,a=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else t.insertBefore(i.stateNode,n);else r?(a=t,s=i.stateNode,8===a.nodeType?(o=a.parentNode).insertBefore(s,a):(o=a).appendChild(s),null!=(a=a._reactRootContainer)||null!==o.onclick||(o.onclick=ii)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ma(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&Q("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,a=o;;)if(da(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=t.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag?(r=t.stateNode.containerInfo,i=!0):da(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function va(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Ce]=r,"input"===e&&"radio"===r.type&&null!=r.name&&pn(n,r),ni(e,i),t=ni(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?Zr(n,s):"dangerouslySetInnerHTML"===a?Kr(n,s):"children"===a?Yr(n,s):cn(n,a,s,t)}switch(e){case"input":fn(n,r);break;case"textarea":$r(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?jr(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?jr(n,!!r.multiple,r.defaultValue,!0):jr(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===t.stateNode&&Q("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(e=t,null===(n=t.memoizedState)?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=ps())),null!==e)e:for(t=n=e;;){if(5===t.tag)e=t.stateNode,r?e.style.display="none":(e=t.stateNode,o=null!=(o=t.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,e.style.display=Jr("display",o));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(e=t.child.sibling).return=t,t=e;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break e;for(;null===t.sibling;){if(null===t.return||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}break;case 17:break;default:Q("163")}}function ba(e,t,n){(n=Ki(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ks(r),ua(e,t)},n}function ya(e,t,n){(n=Ki(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ma?Ma=new Set([this]):Ma.add(this));var n=t.value,i=t.stack;ua(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function wa(e){switch(e.tag){case 1:Ei(e.type)&&ki();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return yo(),Si(),0!=(64&(t=e.effectTag))&&Q("285"),e.effectTag=-2049&t|64,e;case 5:return xo(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 4:return yo(),null;case 10:return co(e),null;default:return null}}aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},la=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(vo(fo.current),e=null,n){case"input":o=hn(s,o),r=hn(s,r),e=[];break;case"option":o=Fr(s,o),r=Fr(s,r),e=[];break;case"select":o=a({},o,{value:void 0}),r=a({},r,{value:void 0}),e=[];break;case"textarea":o=Hr(s,o),r=Hr(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=ii)}ti(n,r),s=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(s in c)c.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(ue.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(l||(l={}),l[s]=u[s])}else l||(e||(e=[]),e.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(ue.hasOwnProperty(n)?(null!=u&&ri(i,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}l&&(e=e||[]).push("style",l),i=e,(t.updateQueue=i)&&oa(t)}},ca=function(e,t,n,r){n!==r&&oa(t)};var xa={readContext:ho},Ea=Rt.ReactCurrentOwner,ka=1073741822,Sa=0,Ca=!1,Ta=null,_a=null,Na=0,Pa=-1,Aa=!1,La=null,Oa=!1,Ma=null;function Ia(){if(null!==Ta)for(var e=Ta.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&ki();break;case 3:yo(),Si();break;case 5:xo(t);break;case 4:yo();break;case 10:co(t)}e=e.return}_a=null,Na=0,Pa=-1,Aa=!1,Ta=null}function Ra(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Ta=e;e:{var i=t,o=Na,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ei(t.type)&&ki();break;case 3:yo(),Si(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||(Bo(t),t.effectTag&=-3),sa(t);break;case 5:xo(t);var l=vo(go.current);if(o=t.type,null!==i&&null!=t.stateNode)la(i,t,o,s,l),i.ref!==t.ref&&(t.effectTag|=128);else if(s){var c=vo(fo.current);if(Bo(t)){i=(s=t).stateNode;var u=s.type,h=s.memoizedProps,d=l;switch(i[Se]=s,i[Ce]=h,o=void 0,l=u){case"iframe":case"object":gr("load",i);break;case"video":case"audio":for(u=0;u<qe.length;u++)gr(qe[u],i);break;case"source":gr("error",i);break;case"img":case"image":case"link":gr("error",i),gr("load",i);break;case"form":gr("reset",i),gr("submit",i);break;case"details":gr("toggle",i);break;case"input":dn(i,h),gr("invalid",i),ri(d,"onChange");break;case"select":i._wrapperState={wasMultiple:!!h.multiple},gr("invalid",i),ri(d,"onChange");break;case"textarea":Ur(i,h),gr("invalid",i),ri(d,"onChange")}for(o in ti(l,h),u=null,h)h.hasOwnProperty(o)&&(c=h[o],"children"===o?"string"==typeof c?i.textContent!==c&&(u=["children",c]):"number"==typeof c&&i.textContent!==""+c&&(u=["children",""+c]):ue.hasOwnProperty(o)&&null!=c&&ri(d,o));switch(l){case"input":Mt(i),mn(i,h,!0);break;case"textarea":Mt(i),Vr(i);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(i.onclick=ii)}o=u,s.updateQueue=o,(s=null!==o)&&oa(t)}else{h=t,i=o,d=s,u=9===l.nodeType?l:l.ownerDocument,c===Wr.html&&(c=Br(i)),c===Wr.html?"script"===i?((i=u.createElement("div")).innerHTML="<script><\/script>",u=i.removeChild(i.firstChild)):"string"==typeof d.is?u=u.createElement(i,{is:d.is}):(u=u.createElement(i),"select"===i&&d.multiple&&(u.multiple=!0)):u=u.createElementNS(c,i),(i=u)[Se]=h,i[Ce]=s,aa(i,t,!1,!1),d=i;var p=l,f=ni(u=o,h=s);switch(u){case"iframe":case"object":gr("load",d),l=h;break;case"video":case"audio":for(l=0;l<qe.length;l++)gr(qe[l],d);l=h;break;case"source":gr("error",d),l=h;break;case"img":case"image":case"link":gr("error",d),gr("load",d),l=h;break;case"form":gr("reset",d),gr("submit",d),l=h;break;case"details":gr("toggle",d),l=h;break;case"input":dn(d,h),l=hn(d,h),gr("invalid",d),ri(p,"onChange");break;case"option":l=Fr(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},l=a({},h,{value:void 0}),gr("invalid",d),ri(p,"onChange");break;case"textarea":Ur(d,h),l=Hr(d,h),gr("invalid",d),ri(p,"onChange");break;default:l=h}ti(u,l),c=void 0;var m=u,g=d,v=l;for(c in v)if(v.hasOwnProperty(c)){var b=v[c];"style"===c?Zr(g,b):"dangerouslySetInnerHTML"===c?null!=(b=b?b.__html:void 0)&&Kr(g,b):"children"===c?"string"==typeof b?("textarea"!==m||""!==b)&&Yr(g,b):"number"==typeof b&&Yr(g,""+b):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ue.hasOwnProperty(c)?null!=b&&ri(p,c):null!=b&&cn(g,c,b,f))}switch(u){case"input":Mt(d),mn(d,h,!1);break;case"textarea":Mt(d),Vr(d);break;case"option":null!=h.value&&d.setAttribute("value",""+un(h.value));break;case"select":(l=d).multiple=!!h.multiple,null!=(d=h.value)?jr(l,!!h.multiple,d,!1):null!=h.defaultValue&&jr(l,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof l.onClick&&(d.onclick=ii)}(s=si(o,s))&&oa(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&Q("166");break;case 6:i&&null!=t.stateNode?ca(i,t,i.memoizedProps,s):("string"!=typeof s&&(null===t.stateNode&&Q("166")),i=vo(go.current),vo(fo.current),Bo(t)?(o=(s=t).stateNode,i=s.memoizedProps,o[Se]=s,(s=o.nodeValue!==i)&&oa(t)):(o=t,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[Se]=t,o.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=o,Ta=t;break e}s=null!==s,o=null!==i&&null!==i.memoizedState,null!==i&&!s&&o&&(null!==(i=i.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=i,i.nextEffect=l):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(s!==o||0==(1&t.effectTag)&&s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:yo(),sa(t);break;case 10:co(t);break;case 9:case 14:break;case 17:Ei(t.type)&&ki();break;default:Q("156")}Ta=null}if(t=e,1===Na||1!==t.childExpirationTime){for(s=0,o=t.child;null!==o;)(i=o.expirationTime)>s&&(s=i),(l=o.childExpirationTime)>s&&(s=l),o=o.sibling;t.childExpirationTime=s}if(null!==Ta)return Ta;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=wa(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Da(e){var t=ia(e.alternate,e,Na);return e.memoizedProps=e.pendingProps,null===t&&(t=Ra(e)),Ea.current=null,t}function Fa(e,t){Ca&&Q("243"),Ca=!0,Ea.currentDispatcher=xa;var n=e.nextExpirationTimeToWorkOn;n===Na&&e===_a&&null!==Ta||(Ia(),Na=n,Ta=Ri((_a=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==Ta&&!vs();)Ta=Da(Ta);else for(;null!==Ta;)Ta=Da(Ta)}catch(y){if(so=ao=oo=null,null===Ta)r=!0,ks(y);else{null===Ta&&Q("271");var i=Ta,o=i.return;if(null!==o){e:{var a=e,s=o,l=i,c=y;if(o=Na,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c;c=s;var h=-1,d=-1;do{if(13===c.tag){var p=c.alternate;if(null!==p&&null!==(p=p.memoizedState)){d=10*(1073741822-p.timedOutAt);break}"number"==typeof(p=c.pendingProps.maxDuration)&&(0>=p?h=0:(-1===h||p<h)&&(h=p))}c=c.return}while(null!==c);c=s;do{if((p=13===c.tag)&&(p=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),p){if(s=Ua.bind(null,a,c,l,0==(1&c.mode)?1073741823:o),u.then(s,s),0==(1&c.mode)){c.effectTag|=64,l.effectTag&=-1957,1===l.tag&&null===l.alternate&&(l.tag=17),l.expirationTime=o;break e}-1===h?a=1073741823:(-1===d&&(d=10*(1073741822-Wi(a,o))-5e3),a=d+h),0<=a&&Pa<a&&(Pa=a),c.effectTag|=2048,c.expirationTime=o;break e}c=c.return}while(null!==c);c=Error((Jt(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Zt(l))}Aa=!0,c=ro(c,l),a=s;do{switch(a.tag){case 3:l=c,a.effectTag|=2048,a.expirationTime=o,Qi(a,o=ba(a,l,o));break e;case 1:if(l=c,s=a.type,u=a.stateNode,0==(64&a.effectTag)&&("function"==typeof s.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Ma||!Ma.has(u)))){a.effectTag|=2048,a.expirationTime=o,Qi(a,o=ya(a,l,o));break e}}a=a.return}while(null!==a)}Ta=Ra(i);continue}r=!0,ks(y)}}break}if(Ca=!1,so=ao=oo=Ea.currentDispatcher=null,r)_a=null,e.finishedWork=null;else if(null!==Ta)e.finishedWork=null;else{if(null===(r=e.current.alternate)&&Q("281"),_a=null,Aa){if(i=e.latestPendingTime,o=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<n||0!==o&&o<n||0!==a&&a<n)return Vi(e,n),void ds(e,r,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,void ds(e,r,n,t,-1)}t&&-1!==Pa?(Vi(e,n),(t=10*(1073741822-Wi(e,n)))<Pa&&(Pa=t),t=10*(1073741822-ps()),t=Pa-t,ds(e,r,n,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=r)}}function ja(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ma||!Ma.has(r)))return Xi(n,e=ya(n,e=ro(t,e),1073741823)),void Va(n,1073741823);break;case 3:return Xi(n,e=ba(n,e=ro(t,e),1073741823)),void Va(n,1073741823)}n=n.return}3===e.tag&&(Xi(e,n=ba(e,n=ro(t,e),1073741823)),Va(e,1073741823))}function Ha(e,t){return 0!==Sa?e=Sa:Ca?e=Oa?1073741823:Na:1&t.mode?(e=ns?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==_a&&e===Na&&--e):e=1073741823,ns&&(0===Qa||e<Qa)&&(Qa=e),e}function Ua(e,t,n,r){var i=e.earliestSuspendedTime,o=e.latestSuspendedTime;if(0!==i&&r<=i&&r>=o){o=i=r,e.didError=!1;var a=e.latestPingedTime;(0===a||a>o)&&(e.latestPingedTime=o),Bi(o,e)}else $i(e,i=Ha(i=ps(),t));0!=(1&t.mode)&&e===_a&&Na===r&&(_a=null),$a(t,i),0==(1&t.mode)&&($a(n,i),1===n.tag&&null!==n.stateNode&&((t=Ki(i)).tag=2,Xi(n,t))),0!==(n=e.expirationTime)&&fs(e,n)}function $a(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Va(e,t){null!==(e=$a(e,t))&&(!Ca&&0!==Na&&t>Na&&Ia(),$i(e,t),Ca&&!Oa&&_a===e||fs(e,e.expirationTime),ls>ss&&(ls=0,Q("185")))}function Wa(e,t,n,r,i){var o=Sa;Sa=1073741823;try{return e(t,n,r,i)}finally{Sa=o}}var Ba=null,za=null,qa=0,Ga=void 0,Ka=!1,Ya=null,Xa=0,Qa=0,Ja=!1,Za=null,es=!1,ts=!1,ns=!1,rs=null,is=X.unstable_now(),os=1073741822-(is/10|0),as=os,ss=50,ls=0,cs=null;function us(){os=1073741822-((X.unstable_now()-is)/10|0)}function hs(e,t){if(0!==qa){if(t<qa)return;null!==Ga&&X.unstable_cancelCallback(Ga)}qa=t,e=X.unstable_now()-is,Ga=X.unstable_scheduleCallback(bs,{timeout:10*(1073741822-t)-e})}function ds(e,t,n,r,i){e.expirationTime=r,0!==i||vs()?0<i&&(e.timeoutHandle=ci(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,us(),as=os,ws(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function ps(){return Ka?as:(ms(),0!==Xa&&1!==Xa||(us(),as=os),as)}function fs(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===za?(Ba=za=e,e.nextScheduledRoot=e):(za=za.nextScheduledRoot=e).nextScheduledRoot=Ba):t>e.expirationTime&&(e.expirationTime=t),Ka||(es?ts&&(Ya=e,Xa=1073741823,xs(e,1073741823,!1)):1073741823===t?ys(1073741823,!1):hs(e,t))}function ms(){var e=0,t=null;if(null!==za)for(var n=za,r=Ba;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===za)&&Q("244"),r===r.nextScheduledRoot){Ba=za=r.nextScheduledRoot=null;break}if(r===Ba)Ba=i=r.nextScheduledRoot,za.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===za){(za=n).nextScheduledRoot=Ba,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===za)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}Ya=t,Xa=e}var gs=!1;function vs(){return!!gs||!!X.unstable_shouldYield()&&(gs=!0)}function bs(){try{if(!vs()&&null!==Ba){us();var e=Ba;do{var t=e.expirationTime;0!==t&&os<=t&&(e.nextExpirationTimeToWorkOn=os),e=e.nextScheduledRoot}while(e!==Ba)}ys(0,!0)}finally{gs=!1}}function ys(e,t){if(ms(),t)for(us(),as=os;null!==Ya&&0!==Xa&&e<=Xa&&!(gs&&os>Xa);)xs(Ya,Xa,os>Xa),ms(),us(),as=os;else for(;null!==Ya&&0!==Xa&&e<=Xa;)xs(Ya,Xa,!1),ms();if(t&&(qa=0,Ga=null),0!==Xa&&hs(Ya,Xa),ls=0,cs=null,null!==rs)for(e=rs,rs=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){Ja||(Ja=!0,Za=r)}}if(Ja)throw e=Za,Za=null,Ja=!1,e}function ws(e,t){Ka&&Q("253"),Ya=e,Xa=t,xs(e,t,!1),ys(1073741823,!1)}function xs(e,t,n){if(Ka&&Q("245"),Ka=!0,n){var r=e.finishedWork;null!==r?Es(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,ui(r)),Fa(e,n),null!==(r=e.finishedWork)&&(vs()?e.finishedWork=r:Es(e,r,t)))}else null!==(r=e.finishedWork)?Es(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,ui(r)),Fa(e,n),null!==(r=e.finishedWork)&&Es(e,r,t));Ka=!1}function Es(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===rs?rs=[r]:rs.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===cs?ls++:(cs=e,ls=0),Oa=Ca=!0,e.current===t&&Q("177"),0===(n=e.pendingCommitExpirationTime)&&Q("261"),e.pendingCommitExpirationTime=0,r=t.expirationTime;var i=t.childExpirationTime;if(r=i>r?i:r,e.didError=!1,0===r?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(0!==(i=e.latestPendingTime)&&(i>r?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>r&&(e.earliestPendingTime=e.latestPendingTime)),0===(i=e.earliestSuspendedTime)?$i(e,r):r<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,$i(e,r)):r>i&&$i(e,r)),Bi(0,e),Ea.current=null,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,oi=mr,Nr(i=_r())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{var a=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(a&&0!==a.rangeCount){o=a.anchorNode;var s=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{o.nodeType,l.nodeType}catch(R){o=null;break e}var c=0,u=-1,h=-1,d=0,p=0,f=i,m=null;t:for(;;){for(var g;f!==o||0!==s&&3!==f.nodeType||(u=c+s),f!==l||0!==a&&3!==f.nodeType||(h=c+a),3===f.nodeType&&(c+=f.nodeValue.length),null!==(g=f.firstChild);)m=f,f=g;for(;;){if(f===i)break t;if(m===o&&++d===s&&(u=c),m===l&&++p===a&&(h=c),null!==(g=f.nextSibling))break;m=(f=m).parentNode}f=g}o=-1===u||-1===h?null:{start:u,end:h}}else o=null}o=o||{start:0,end:0}}else o=null;for(ai={focusedElem:i,selectionRange:o},mr=!1,La=r;null!==La;){i=!1,o=void 0;try{for(;null!==La;){if(256&La.effectTag)e:{var v=La.alternate;switch((s=La).tag){case 0:case 11:case 15:break e;case 1:if(256&s.effectTag&&null!==v){var b=v.memoizedProps,y=v.memoizedState,w=s.stateNode,x=w.getSnapshotBeforeUpdate(s.elementType===s.type?b:Eo(s.type,b),y);w.__reactInternalSnapshotBeforeUpdate=x}break e;case 3:case 5:case 6:case 4:case 17:break e;default:Q("163")}}La=La.nextEffect}}catch(R){i=!0,o=R}i&&(null===La&&Q("178"),ja(La,o),null!==La&&(La=La.nextEffect))}for(La=r;null!==La;){v=!1,b=void 0;try{for(;null!==La;){var E=La.effectTag;if(16&E&&Yr(La.stateNode,""),128&E){var k=La.alternate;if(null!==k){var S=k.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&E){case 2:fa(La),La.effectTag&=-3;break;case 6:fa(La),La.effectTag&=-3,va(La.alternate,La);break;case 4:va(La.alternate,La);break;case 8:ma(y=La),y.return=null,y.child=null,y.alternate&&(y.alternate.child=null,y.alternate.return=null)}La=La.nextEffect}}catch(R){v=!0,b=R}v&&(null===La&&Q("178"),ja(La,b),null!==La&&(La=La.nextEffect))}if(S=ai,k=_r(),E=S.focusedElem,b=S.selectionRange,k!==E&&E&&E.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(E.ownerDocument.documentElement,E)){null!==b&&Nr(E)&&(k=b.start,void 0===(S=b.end)&&(S=k),"selectionStart"in E?(E.selectionStart=k,E.selectionEnd=Math.min(S,E.value.length)):(S=(k=E.ownerDocument||document)&&k.defaultView||window).getSelection&&(S=S.getSelection(),y=E.textContent.length,v=Math.min(b.start,y),b=void 0===b.end?v:Math.min(b.end,y),!S.extend&&v>b&&(y=b,b=v,v=y),y=Tr(E,v),w=Tr(E,b),y&&w&&(1!==S.rangeCount||S.anchorNode!==y.node||S.anchorOffset!==y.offset||S.focusNode!==w.node||S.focusOffset!==w.offset)&&((k=k.createRange()).setStart(y.node,y.offset),S.removeAllRanges(),v>b?(S.addRange(k),S.extend(w.node,w.offset)):(k.setEnd(w.node,w.offset),S.addRange(k))))),k=[];for(S=E;S=S.parentNode;)1===S.nodeType&&k.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<k.length;E++)(S=k[E]).element.scrollLeft=S.left,S.element.scrollTop=S.top}for(ai=null,mr=!!oi,oi=null,e.current=t,La=r;null!==La;){r=!1,E=void 0;try{for(k=n;null!==La;){var C=La.effectTag;if(36&C){var T=La.alternate;switch(v=k,(S=La).tag){case 0:case 11:case 15:break;case 1:var _=S.stateNode;if(4&S.effectTag)if(null===T)_.componentDidMount();else{var N=S.elementType===S.type?T.memoizedProps:Eo(S.type,T.memoizedProps);_.componentDidUpdate(N,T.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=S.updateQueue;null!==P&&to(0,P,_);break;case 3:var A=S.updateQueue;if(null!==A){if(b=null,null!==S.child)switch(S.child.tag){case 5:b=S.child.stateNode;break;case 1:b=S.child.stateNode}to(0,A,b)}break;case 5:var L=S.stateNode;null===T&&4&S.effectTag&&si(S.type,S.memoizedProps)&&L.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:Q("163")}}if(128&C){var O=La.ref;if(null!==O){var M=La.stateNode;switch(La.tag){case 5:var I=M;break;default:I=M}"function"==typeof O?O(I):O.current=I}}La=La.nextEffect}}catch(R){r=!0,E=R}r&&(null===La&&Q("178"),ja(La,E),null!==La&&(La=La.nextEffect))}Ca=Oa=!1,"function"==typeof Pi&&Pi(t.stateNode),C=t.expirationTime,0===(t=(t=t.childExpirationTime)>C?t:C)&&(Ma=null),e.expirationTime=t,e.finishedWork=null}function ks(e){null===Ya&&Q("246"),Ya.expirationTime=0,Ja||(Ja=!0,Za=e)}function Ss(e,t){var n=es;es=!0;try{return e(t)}finally{(es=n)||Ka||ys(1073741823,!1)}}function Cs(e,t){if(es&&!ts){ts=!0;try{return e(t)}finally{ts=!1}}return e(t)}function Ts(e,t,n){if(ns)return e(t,n);es||Ka||0===Qa||(ys(Qa,!1),Qa=0);var r=ns,i=es;es=ns=!0;try{return e(t,n)}finally{ns=r,(es=i)||Ka||ys(1073741823,!1)}}function _s(e,t,n,r,i){var o=t.current;e:if(n){t:{2===Gn(n=n._reactInternalFiber)&&1===n.tag||Q("170");var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Ei(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);Q("171"),a=void 0}if(1===n.tag){var s=n.type;if(Ei(s)){n=Ti(n,s,a);break e}}n=a}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Ki(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Xi(o,i),Va(o,r),r}function Ns(e,t,n,r){var i=t.current;return _s(e,t,n,i=Ha(ps(),i),r)}function Ps(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function As(e){var t=1073741822-25*(1+((1073741822-ps()+500)/25|0));t>=ka&&(t=ka-1),this._expirationTime=ka=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ls(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Os(e,t,n){e={current:t=Mi(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Ms(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Is(e,t,n,r,i){Ms(n)||Q("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=Ps(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Os(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=Ps(o._internalRoot);s.call(e)}}Cs(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Ps(o._internalRoot)}function Rs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ms(t)||Q("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ht,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}vt=function(e,t,n){switch(t){case"input":if(fn(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Pe(r);i||Q("90"),It(r),fn(r,i)}}}break;case"textarea":$r(e,n);break;case"select":null!=(t=n.value)&&jr(e,!!n.multiple,t,!1)}},As.prototype.render=function(e){this._defer||Q("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ls;return _s(e,t,null,n,r._onCommit),r},As.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},As.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||Q("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&Q("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,ws(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},As.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ls.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ls.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&Q("191",n),n()}}},Os.prototype.render=function(e,t){var n=this._internalRoot,r=new Ls;return null!==(t=void 0===t?null:t)&&r.then(t),Ns(e,n,null,r._onCommit),r},Os.prototype.unmount=function(e){var t=this._internalRoot,n=new Ls;return null!==(e=void 0===e?null:e)&&n.then(e),Ns(null,t,null,n._onCommit),n},Os.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Ls;return null!==(n=void 0===n?null:n)&&i.then(n),Ns(t,r,e,i._onCommit),i},Os.prototype.createBatch=function(){var e=new As(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},kt=Ss,St=Ts,Ct=function(){Ka||0===Qa||(ys(Qa,!1),Qa=0)};var Ds={createPortal:Rs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?Q("188"):Q("268",Object.keys(e))),e=null===(e=Yn(t))?null:e.stateNode},hydrate:function(e,t,n){return Is(null,e,t,!0,n)},render:function(e,t,n){return Is(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&Q("38"),Is(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Ms(e)||Q("40"),!!e._reactRootContainer&&(Cs(function(){Is(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Rs.apply(void 0,arguments)},unstable_batchedUpdates:Ss,unstable_interactiveUpdates:Ts,flushSync:function(e,t){Ka&&Q("187");var n=es;es=!0;try{return Wa(e,t)}finally{es=n,ys(1073741823,!1)}},unstable_flushControlled:function(e){var t=es;es=!0;try{Wa(e)}finally{(es=t)||Ka||ys(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[_e,Ne,Pe,we.injectEventPluginsByName,ce,Re,function(e){ve(e,Ie)},xt,Et,yr,Ee]},unstable_createRoot:function(e,t){return Ms(e)||Q("299","unstable_createRoot"),new Os(e,!0,null!=t&&!0===t.hydrate)}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Pi=Li(function(e){return t.onCommitFiberRoot(n,e)}),Ai=Li(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(a({},e,{findHostInstanceByFiber:function(e){return null===(e=Yn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:Te,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"});var Fs={default:Ds},js=Fs&&Ds||Fs,Hs=js.default||js,Us=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.__interactionsRef=null,t.__subscriberRef=null,t.unstable_clear=function(e){return e()},t.unstable_getCurrent=function(){return null},t.unstable_getThreadID=function(){return++n},t.unstable_trace=function(e,t,n){return n()},t.unstable_wrap=function(e){return e},t.unstable_subscribe=function(){},t.unstable_unsubscribe=function(){}});t(Us);Us.__interactionsRef,Us.__subscriberRef,Us.unstable_clear,Us.unstable_getCurrent,Us.unstable_getThreadID,Us.unstable_trace,Us.unstable_wrap,Us.unstable_subscribe,Us.unstable_unsubscribe;var $s=n(function(e,t){});t($s);$s.__interactionsRef,$s.__subscriberRef,$s.unstable_clear,$s.unstable_getCurrent,$s.unstable_getThreadID,$s.unstable_trace,$s.unstable_wrap,$s.unstable_subscribe,$s.unstable_unsubscribe,n(function(e){e.exports=Us}),n(function(e){});var Vs=n(function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=Hs});function Ws(){}var Bs=n(function(e){e.exports=function(){function e(e,t,n,r,i,o){if(o!==q){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=Ws,n.PropTypes=n,n}()}),zs=n(function(e){var t,n;t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen},e.exports?e.exports=n:window.ExecutionEnvironment=n});function qs(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Gs=qs(G),Ks=qs(zs),Ys=qs(function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0});var Xs=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i=[],o=void 0;function a(){o=e(i.map(function(e){return e.props})),s.canUseDOM?t(o):n&&(o=n(o))}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.peek=function(){return o},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=o;return o=void 0,i=[],e},t.prototype.shouldComponentUpdate=function(e){return!Ys(e,this.props)},t.prototype.componentWillMount=function(){i.push(this),a()},t.prototype.componentDidUpdate=function(){a()},t.prototype.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),a()},t.prototype.render=function(){return Gs.createElement(r,this.props)},t}(G.Component);return s.displayName="SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")",s.canUseDOM=Ks.canUseDOM,s}},Qs=n(function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Js=(Qs.shim,n(function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i})),Zs=(Js.supported,Js.unsupported,n(function(e){var t=Array.prototype.slice,n=e.exports=function(e,o,a){return a||(a={}),e===o||(e instanceof Date&&o instanceof Date?e.getTime()===o.getTime():!e||!o||"object"!=typeof e&&"object"!=typeof o?a.strict?e===o:e==o:function(e,o,a){var s,l;if(r(e)||r(o))return!1;if(e.prototype!==o.prototype)return!1;if(Js(e))return!!Js(o)&&(e=t.call(e),o=t.call(o),n(e,o,a));if(i(e)){if(!i(o))return!1;if(e.length!==o.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==o[s])return!1;return!0}try{var c=Qs(e),u=Qs(o)}catch(h){return!1}if(c.length!=u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!=u[s])return!1;for(s=c.length-1;s>=0;s--)if(l=c[s],!n(e[l],o[l],a))return!1;return typeof e==typeof o}(e,o,a))};function r(e){return null==e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}})),el=n(function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map(function(e){return n[e]}),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce(function(e,t){return e[r[t]]=t,e},{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"});t(el);el.ATTRIBUTE_NAMES,el.TAG_NAMES,el.VALID_TAG_NAMES,el.TAG_PROPERTIES,el.REACT_TAG_MAP,el.HELMET_PROPS,el.HTML_TAG_MAP,el.SELF_CLOSING_TAGS,el.HELMET_ATTRIBUTE;var tl=n(function(t,n){n.__esModule=!0,n.warn=n.requestAnimationFrame=n.reducePropsToState=n.mapStateOnServer=n.handleClientStateChange=n.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(G),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}var c,u=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},h=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return i({},e,t)},{})},d=function(e,t,n){var i={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&b("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var r={};n.filter(function(e){for(var n=void 0,o=Object.keys(e),a=0;a<o.length;a++){var s=o[a],l=s.toLowerCase();-1===t.indexOf(l)||n===el.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||l===el.TAG_PROPERTIES.REL&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(s)||s!==el.TAG_PROPERTIES.INNER_HTML&&s!==el.TAG_PROPERTIES.CSS_TEXT&&s!==el.TAG_PROPERTIES.ITEM_PROP||(n=s)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][c]&&(r[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a],c=(0,s.default)({},i[l],r[l]);i[l]=c}return e},[]).reverse()},p=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},f=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout(function(){f(e)},0)}),m=function(e){return clearTimeout(e)},g="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||f:e.requestAnimationFrame||f,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||m:e.cancelAnimationFrame||m,b=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},y=null,w=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,s=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,h=e.title,d=e.titleAttributes;k(el.TAG_NAMES.BODY,r),k(el.TAG_NAMES.HTML,i),E(h,d);var p={baseTag:S(el.TAG_NAMES.BASE,n),linkTags:S(el.TAG_NAMES.LINK,o),metaTags:S(el.TAG_NAMES.META,a),noscriptTags:S(el.TAG_NAMES.NOSCRIPT,s),scriptTags:S(el.TAG_NAMES.SCRIPT,c),styleTags:S(el.TAG_NAMES.STYLE,u)},f={},m={};Object.keys(p).forEach(function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(f[e]=n),r.length&&(m[e]=p[e].oldTags)}),t&&t(),l(e,f,m)},x=function(e){return Array.isArray(e)?e.join(""):e},E=function(e,t){void 0!==e&&document.title!==e&&(document.title=x(e)),k(el.TAG_NAMES.TITLE,t)},k=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(el.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),s=0;s<a.length;s++){var l=a[s],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=o.indexOf(l);-1!==u&&o.splice(u,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute(el.HELMET_ATTRIBUTE):n.getAttribute(el.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(el.HELMET_ATTRIBUTE,a.join(","))}},S=function(e,t){var n=document.head||document.querySelector(el.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+el.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===el.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===el.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var s=void 0===t[r]?"":t[r];n.setAttribute(r,s)}n.setAttribute(el.HELMET_ATTRIBUTE,"true"),i.some(function(e,t){return a=t,n.isEqualNode(e)})?i.splice(a,1):o.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:o}},C=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[el.REACT_TAG_MAP[n]||n]=e[n],t},t)},_=function(e,t,n){switch(e){case el.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[el.HELMET_ATTRIBUTE]=!0,i=T(n,r),[o.default.createElement(el.TAG_NAMES.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=C(n),o=x(t);return i?"<"+e+" "+el.HELMET_ATTRIBUTE+'="true" '+i+">"+u(o,r)+"</"+e+">":"<"+e+" "+el.HELMET_ATTRIBUTE+'="true">'+u(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case el.ATTRIBUTE_NAMES.BODY:case el.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return T(t)},toString:function(){return C(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[el.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach(function(e){var n=el.REACT_TAG_MAP[e]||e;if(n===el.TAG_PROPERTIES.INNER_HTML||n===el.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),o.default.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===el.TAG_PROPERTIES.INNER_HTML||e===el.TAG_PROPERTIES.CSS_TEXT)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+u(r[t],n)+'"';return e?e+" "+i:i},""),o=r.innerHTML||r.cssText||"",a=-1===el.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+el.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+o+"</"+e+">")},"")}(e,t,n)}}}};n.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[el.HTML_TAG_MAP[n]||n]=e[n],t},t)},n.handleClientStateChange=function(e){y&&v(y),e.defer?y=g(function(){w(e,function(){y=null})}):(w(e),y=null)},n.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,s=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,h=void 0===u?"":u,d=e.titleAttributes;return{base:_(el.TAG_NAMES.BASE,t,r),bodyAttributes:_(el.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:_(el.ATTRIBUTE_NAMES.HTML,i,r),link:_(el.TAG_NAMES.LINK,o,r),meta:_(el.TAG_NAMES.META,a,r),noscript:_(el.TAG_NAMES.NOSCRIPT,s,r),script:_(el.TAG_NAMES.SCRIPT,l,r),style:_(el.TAG_NAMES.STYLE,c,r),title:_(el.TAG_NAMES.TITLE,{title:h,titleAttributes:d},r)}},n.reducePropsToState=function(e){return{baseTag:function(e,t){return t.filter(function(e){return void 0!==e[el.TAG_NAMES.BASE]}).map(function(e){return e[el.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t},[])}([el.TAG_PROPERTIES.HREF],e),bodyAttributes:h(el.ATTRIBUTE_NAMES.BODY,e),defer:p(e,el.HELMET_PROPS.DEFER),encode:p(e,el.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:h(el.ATTRIBUTE_NAMES.HTML,e),linkTags:d(el.TAG_NAMES.LINK,[el.TAG_PROPERTIES.REL,el.TAG_PROPERTIES.HREF],e),metaTags:d(el.TAG_NAMES.META,[el.TAG_PROPERTIES.NAME,el.TAG_PROPERTIES.CHARSET,el.TAG_PROPERTIES.HTTPEQUIV,el.TAG_PROPERTIES.PROPERTY,el.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:d(el.TAG_NAMES.NOSCRIPT,[el.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:function(e){return p(e,el.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}}(e),scriptTags:d(el.TAG_NAMES.SCRIPT,[el.TAG_PROPERTIES.SRC,el.TAG_PROPERTIES.INNER_HTML],e),styleTags:d(el.TAG_NAMES.STYLE,[el.TAG_PROPERTIES.CSS_TEXT],e),title:function(e){var t=p(e,el.TAG_NAMES.TITLE),n=p(e,el.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return t});var r=p(e,el.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0}(e),titleAttributes:h(el.ATTRIBUTE_NAMES.TITLE,e)}},n.requestAnimationFrame=g,n.warn=b});t(tl);tl.warn,tl.requestAnimationFrame,tl.reducePropsToState,tl.mapStateOnServer,tl.handleClientStateChange,tl.convertReactPropstoHtmlAttributes;var nl=n(function(e,t){t.__esModule=!0,t.Helmet=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Bs),a=l(Xs),s=l(Zs);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var u,h,d,p=(0,a.default)(tl.reducePropsToState,tl.handleClientStateChange,tl.mapStateOnServer)(function(){return null}),f=(u=p,d=h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,s.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case el.TAG_NAMES.SCRIPT:case el.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case el.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,i=e.arrayTypeChildren,o=e.newChildProps,a=e.nestedChildren;return n({},i,((t={})[r.type]=[].concat(i[r.type]||[],[n({},o,this.mapNestedChildrenToProps(r,a))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,i=e.child,o=e.newProps,a=e.newChildProps,s=e.nestedChildren;switch(i.type){case el.TAG_NAMES.TITLE:return n({},o,((t={})[i.type]=s,t.titleAttributes=n({},a),t));case el.TAG_NAMES.BODY:return n({},o,{bodyAttributes:n({},a)});case el.TAG_NAMES.HTML:return n({},o,{htmlAttributes:n({},a)})}return n({},o,((r={})[i.type]=n({},a),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=n({},t);return Object.keys(e).forEach(function(t){var i;r=n({},r,((i={})[t]=e[t],i))}),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return i.default.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,o=i.children,a=c(i,["children"]),s=(0,tl.convertReactPropstoHtmlAttributes)(a);switch(n.warnOnInvalidChildren(e,o),e.type){case el.TAG_NAMES.LINK:case el.TAG_NAMES.META:case el.TAG_NAMES.NOSCRIPT:case el.TAG_NAMES.SCRIPT:case el.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=c(e,["children"]),o=n({},r);return t&&(o=this.mapChildrenToProps(t,o)),i.default.createElement(u,o)},r(t,null,[{key:"canUseDOM",set:function(e){u.canUseDOM=e}}]),t}(i.default.Component),h.propTypes={base:o.default.object,bodyAttributes:o.default.object,children:o.default.oneOfType([o.default.arrayOf(o.default.node),o.default.node]),defaultTitle:o.default.string,defer:o.default.bool,encodeSpecialCharacters:o.default.bool,htmlAttributes:o.default.object,link:o.default.arrayOf(o.default.object),meta:o.default.arrayOf(o.default.object),noscript:o.default.arrayOf(o.default.object),onChangeClientState:o.default.func,script:o.default.arrayOf(o.default.object),style:o.default.arrayOf(o.default.object),title:o.default.string,titleAttributes:o.default.object,titleTemplate:o.default.string},h.defaultProps={defer:!0,encodeSpecialCharacters:!0},h.peek=u.peek,h.rewind=function(){var e=u.rewind();return e||(e=(0,tl.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},d);f.renderStatic=f.rewind,t.Helmet=f,t.default=f});t(nl);var rl=nl.Helmet,il=function(){},ol=function(){},al=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};function sl(e){return"/"===e.charAt(0)}function ll(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ul=function(e){return"/"===e.charAt(0)?e:"/"+e},hl=function(e){return"/"===e.charAt(0)?e.substr(1):e},dl=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},pl=function(e,t){return dl(e,t)?e.substr(t.length):e},fl=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},ml=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vl=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=gl({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&sl(e),o=t&&sl(t),a=i||o;if(e&&sl(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var l=r[r.length-1];s="."===l||".."===l||""===l}else s=!1;for(var c=0,u=r.length;u>=0;u--){var h=r[u];"."===h?ll(r,u):".."===h?(ll(r,u),c++):c&&(ll(r,u),c--)}if(!a)for(;c--;c)r.unshift("..");!a||""===r[0]||r[0]&&sl(r[0])||r.unshift("");var d=r.join("/");return s&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},bl=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var r=void 0===t?"undefined":cl(t);if(r!==(void 0===n?"undefined":cl(n)))return!1;if("object"===r){var i=t.valueOf(),o=n.valueOf();if(i!==t||o!==n)return e(i,o);var a=Object.keys(t),s=Object.keys(n);return a.length===s.length&&a.every(function(r){return e(t[r],n[r])})}return!1}(e.state,t.state)},yl=function(){var e=null,t=[];return{setPrompt:function(t){return ol(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):(ol(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}},wl=!("undefined"==typeof window||!window.document||!window.document.createElement),xl=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},El=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},kl=function(e,t){return t(window.confirm(e))},Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tl=function(){try{return window.history.state||{}}catch(e){return{}}},_l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};al(wl,"Browser history needs a DOM");var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e.forceRefresh,a=void 0!==o&&o,s=e.getUserConfirmation,l=void 0===s?kl:s,c=e.keyLength,u=void 0===c?6:c,h=e.basename?fl(ul(e.basename)):"",d=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return ol(!h||dl(o,h),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+h+'".'),h&&(o=pl(o,h)),vl(o,r,n)},p=function(){return Math.random().toString(36).substr(2,u)},f=yl(),m=function(e){Cl(N,e),N.length=n.length,f.notifyListeners(N.location,N.action)},g=function(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||y(d(e.state))},v=function(){y(d(Tl()))},b=!1,y=function(e){if(b)b=!1,m();else{f.confirmTransitionTo(e,"POP",l,function(t){t?m({action:"POP",location:e}):w(e)})}},w=function(e){var t=N.location,n=E.indexOf(t.key);-1===n&&(n=0);var r=E.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(b=!0,S(i))},x=d(Tl()),E=[x.key],k=function(e){return h+ml(e)},S=function(e){n.go(e)},C=0,T=function(e){1===(C+=e)?(xl(window,"popstate",g),i&&xl(window,"hashchange",v)):0===C&&(El(window,"popstate",g),i&&El(window,"hashchange",v))},_=!1,N={length:n.length,action:"POP",location:x,createHref:k,push:function(e,t){ol(!("object"===(void 0===e?"undefined":Sl(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=vl(e,t,p(),N.location);f.confirmTransitionTo(i,"PUSH",l,function(e){if(e){var t=k(i),o=i.key,s=i.state;if(r)if(n.pushState({key:o,state:s},null,t),a)window.location.href=t;else{var l=E.indexOf(N.location.key),c=E.slice(0,-1===l?0:l+1);c.push(i.key),E=c,m({action:"PUSH",location:i})}else ol(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function(e,t){ol(!("object"===(void 0===e?"undefined":Sl(e))&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=vl(e,t,p(),N.location);f.confirmTransitionTo(i,"REPLACE",l,function(e){if(e){var t=k(i),o=i.key,s=i.state;if(r)if(n.replaceState({key:o,state:s},null,t),a)window.location.replace(t);else{var l=E.indexOf(N.location.key);-1!==l&&(E[l]=i.key),m({action:"REPLACE",location:i})}else ol(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:S,goBack:function(){return S(-1)},goForward:function(){return S(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=f.setPrompt(e);return _||(T(1),_=!0),function(){return _&&(_=!1,T(-1)),t()}},listen:function(e){var t=f.appendListener(e);return T(1),function(){T(-1),t()}}};return N},Nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+hl(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:hl,decodePath:ul},slash:{encodePath:ul,decodePath:ul}},Al=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},Ll=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},Ol=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};al(wl,"Hash history needs a DOM");var t=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=e.getUserConfirmation,i=void 0===r?kl:r,o=e.hashType,a=void 0===o?"slash":o,s=e.basename?fl(ul(e.basename)):"",l=Pl[a],c=l.encodePath,u=l.decodePath,h=function(){var e=u(Al());return ol(!s||dl(e,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+s+'".'),s&&(e=pl(e,s)),vl(e)},d=yl(),p=function(e){Nl(_,e),_.length=t.length,d.notifyListeners(_.location,_.action)},f=!1,m=null,g=function(){var e=Al(),t=c(e);if(e!==t)Ll(t);else{var n=h(),r=_.location;if(!f&&bl(r,n))return;if(m===ml(n))return;m=null,v(n)}},v=function(e){if(f)f=!1,p();else{d.confirmTransitionTo(e,"POP",i,function(t){t?p({action:"POP",location:e}):b(e)})}},b=function(e){var t=_.location,n=E.lastIndexOf(ml(t));-1===n&&(n=0);var r=E.lastIndexOf(ml(e));-1===r&&(r=0);var i=n-r;i&&(f=!0,k(i))},y=Al(),w=c(y);y!==w&&Ll(w);var x=h(),E=[ml(x)],k=function(e){ol(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},S=0,C=function(e){1===(S+=e)?xl(window,"hashchange",g):0===S&&El(window,"hashchange",g)},T=!1,_={length:t.length,action:"POP",location:x,createHref:function(e){return"#"+c(s+ml(e))},push:function(e,t){ol(void 0===t,"Hash history cannot push state; it is ignored");var n=vl(e,void 0,void 0,_.location);d.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=ml(n),r=c(s+t);if(Al()!==r){m=t,function(e){window.location.hash=e}(r);var i=E.lastIndexOf(ml(_.location)),o=E.slice(0,-1===i?0:i+1);o.push(t),E=o,p({action:"PUSH",location:n})}else ol(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),p()}})},replace:function(e,t){ol(void 0===t,"Hash history cannot replace state; it is ignored");var n=vl(e,void 0,void 0,_.location);d.confirmTransitionTo(n,"REPLACE",i,function(e){if(e){var t=ml(n),r=c(s+t);Al()!==r&&(m=t,Ll(r));var i=E.indexOf(ml(_.location));-1!==i&&(E[i]=t),p({action:"REPLACE",location:n})}})},go:k,goBack:function(){return k(-1)},goForward:function(){return k(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d.setPrompt(e);return T||(C(1),T=!0),function(){return T&&(T=!1,C(-1)),t()}},listen:function(e){var t=d.appendListener(e);return C(1),function(){C(-1),t()}}};return _},Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rl=function(e,t,n){return Math.min(Math.max(e,t),n)},Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,i=e.initialIndex,o=void 0===i?0:i,a=e.keyLength,s=void 0===a?6:a,l=yl(),c=function(e){Il(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)},u=function(){return Math.random().toString(36).substr(2,s)},h=Rl(o,0,r.length-1),d=r.map(function(e){return vl(e,void 0,"string"==typeof e?u():e.key||u())}),p=ml,f=function(e){var n=Rl(m.index+e,0,m.entries.length-1),r=m.entries[n];l.confirmTransitionTo(r,"POP",t,function(e){e?c({action:"POP",location:r,index:n}):c()})},m={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,n){ol(!("object"===(void 0===e?"undefined":Ml(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=vl(e,n,u(),m.location);l.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),c({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,n){ol(!("object"===(void 0===e?"undefined":Ml(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=vl(e,n,u(),m.location);l.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(m.entries[m.index]=r,c({action:"REPLACE",location:r}))})},go:f,goBack:function(){return f(-1)},goForward:function(){return f(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m},Fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function jl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Hl=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=jl(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},jl(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:Fl({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;al(null==n||1===G.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){il(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?G.Children.only(e):null},t}(G.Component);function Ul(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Hl.propTypes={history:Bs.object.isRequired,children:Bs.node},Hl.contextTypes={router:Bs.object},Hl.childContextTypes={router:Bs.object.isRequired},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Ul(this,e.call.apply(e,[this].concat(o))),r.history=Dl(r.props),Ul(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component)).propTypes={initialEntries:Bs.array,initialIndex:Bs.number,getUserConfirmation:Bs.func,keyLength:Bs.number,children:Bs.node};var $l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){al(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(G.Component);$l.propTypes={when:Bs.bool,message:Bs.oneOfType([Bs.func,Bs.string]).isRequired},$l.defaultProps={when:!0},$l.contextTypes={router:Bs.shape({history:Bs.shape({block:Bs.func.isRequired}).isRequired}).isRequired};var Vl=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Wl=rc,Bl=Yl,zl=function(e,t){return Ql(Yl(e,t))},ql=Ql,Gl=nc,Kl=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Yl(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=Kl.exec(e));){var l=n[0],c=n[1],u=n.index;if(a+=e.slice(o,u),o=u+l.length,c)a+=c[1];else{var h=e[o],d=n[2],p=n[3],f=n[4],m=n[5],g=n[6],v=n[7];a&&(r.push(a),a="");var b=null!=d&&null!=h&&h!==d,y="+"===g||"*"===g,w="?"===g||"*"===g,x=n[2]||s,E=f||m;r.push({name:p||i++,prefix:d||"",delimiter:x,optional:w,repeat:y,partial:b,asterisk:!!v,pattern:E?Zl(E):v?".*":"[^"+Jl(x)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function Xl(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ql(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=(r||{}).pretty?Xl:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,u=o[l.name];if(null==u){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Vl(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(c=a(u[h]),!t[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===h?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):a(u),!t[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function Jl(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Zl(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ec(e,t){return e.keys=t,e}function tc(e){return e.sensitive?"":"i"}function nc(e,t,n){Vl(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=Jl(s);else{var l=Jl(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+l+c+")*"),o+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=Jl(n.delimiter||"/"),h=o.slice(-u.length)===u;return r||(o=(h?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+u+"|$)",ec(new RegExp("^"+o,tc(n)),t)}function rc(e,t,n){return Vl(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ec(e,t)}(e,t):Vl(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(rc(e[i],t,n).source);return ec(new RegExp("(?:"+r.join("|")+")",tc(n)),t)}(e,t,n):function(e,t,n){return nc(Yl(e,n),t,n)}(e,t,n)}Wl.parse=Bl,Wl.compile=zl,Wl.tokensToFunction=ql,Wl.tokensToRegExp=Gl;var ic={},oc=0,ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=ic[t]||(ic[t]={});if(n[e])return n[e];var r=Wl.compile(e);return oc<1e4&&(n[e]=r,oc++),r}(e)(t,{pretty:!0})},sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var lc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){al(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=vl(e.to),n=vl(this.props.to);bl(t,n)?il(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?ac(n,t.params):sc({},n,{pathname:ac(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(G.Component);lc.propTypes={computedMatch:Bs.object,push:Bs.bool,from:Bs.string,to:Bs.oneOfType([Bs.string,Bs.object]).isRequired},lc.defaultProps={push:!1},lc.contextTypes={router:Bs.shape({history:Bs.shape({push:Bs.func.isRequired,replace:Bs.func.isRequired}).isRequired,staticContext:Bs.object}).isRequired};var cc={},uc=0,hc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,l=void 0!==s&&s,c=r.sensitive;if(null==i)return n;var u=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=cc[n]||(cc[n]={});if(r[e])return r[e];var i=[],o={re:Wl(e,i,t),keys:i};return uc<1e4&&(r[e]=o,uc++),o}(i,{end:a,strict:l,sensitive:void 0!==c&&c}),h=u.re,d=u.keys,p=h.exec(e);if(!p)return null;var f=p[0],m=p.slice(1),g=e===f;return a&&!g?null:{path:i,url:"/"===i&&""===f?"/":f,isExact:g,params:d.reduce(function(e,t,n){return e[t.name]=m[n],e},{})}},dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function pc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fc=function(e){return 0===G.Children.count(e)},mc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=pc(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},pc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:dc({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;al(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,c=(r||l.location).pathname;return hc(c,{path:i,strict:o,exact:a,sensitive:s},l.match)},t.prototype.componentWillMount=function(){il(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),il(!(this.props.component&&this.props.children&&!fc(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),il(!(this.props.render&&this.props.children&&!fc(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){il(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),il(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,a=o.history,s=o.route,l=o.staticContext,c={match:e,location:this.props.location||s.location,history:a,staticContext:l};return r?e?G.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!fc(n)?G.Children.only(n):null},t}(G.Component);mc.propTypes={computedMatch:Bs.object,path:Bs.string,exact:Bs.bool,strict:Bs.bool,sensitive:Bs.bool,component:Bs.func,render:Bs.func,children:Bs.oneOfType([Bs.func,Bs.node]),location:Bs.object},mc.contextTypes={router:Bs.shape({history:Bs.object.isRequired,route:Bs.object.isRequired,staticContext:Bs.object})},mc.childContextTypes={router:Bs.object.isRequired};var gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function vc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var bc=function(e){return"/"===e.charAt(0)?e:"/"+e},yc=function(e,t){return e?gc({},t,{pathname:bc(e)+t.pathname}):t},wc=function(e){return"string"==typeof e?e:ml(e)},xc=function(e){return function(){al(!1,"You cannot %s with <StaticRouter>",e)}},Ec=function(){},kc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=vc(this,e.call.apply(e,[this].concat(o))),r.createHref=function(e){return bc(r.props.basename+wc(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=yc(n,vl(e)),i.url=wc(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=yc(n,vl(e)),i.url=wc(i.location)},r.handleListen=function(){return Ec},r.handleBlock=function(){return Ec},vc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){il(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=bc(e);return 0!==t.pathname.indexOf(n)?t:gc({},t,{pathname:t.pathname.substr(n.length)})}(t,vl(n)),push:this.handlePush,replace:this.handleReplace,go:xc("go"),goBack:xc("goBack"),goForward:xc("goForward"),listen:this.handleListen,block:this.handleBlock};return G.createElement(Hl,gc({},r,{history:i}))},t}(G.Component);kc.propTypes={basename:Bs.string,context:Bs.object.isRequired,location:Bs.oneOfType([Bs.string,Bs.object])},kc.defaultProps={basename:"",location:"/"},kc.childContextTypes={router:Bs.object.isRequired};var Sc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){al(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){il(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),il(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return G.Children.forEach(t,function(t){if(null==r&&G.isValidElement(t)){var o=t.props,a=o.path,s=o.exact,l=o.strict,c=o.sensitive,u=o.from,h=a||u;i=t,r=hc(n.pathname,{path:h,exact:s,strict:l,sensitive:c},e.match)}}),r?G.cloneElement(i,{location:n,computedMatch:r}):null},t}(G.Component);Sc.contextTypes={router:Bs.shape({route:Bs.object.isRequired}).isRequired},Sc.propTypes={children:Bs.node,location:Bs.object};var Cc={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Tc={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_c=Object.defineProperty,Nc=Object.getOwnPropertyNames,Pc=Object.getOwnPropertySymbols,Ac=Object.getOwnPropertyDescriptor,Lc=Object.getPrototypeOf,Oc=Lc&&Lc(Object);var Mc=function e(t,n,r){if("string"!=typeof n){if(Oc){var i=Lc(n);i&&i!==Oc&&e(t,i,r)}var o=Nc(n);Pc&&(o=o.concat(Pc(n)));for(var a=0;a<o.length;++a){var s=o[a];if(!(Cc[s]||Tc[s]||r&&r[s])){var l=Ac(n,s);try{_c(t,s,l)}catch(c){}}}return t}return t},Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Rc=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return G.createElement(mc,{children:function(t){return G.createElement(e,Ic({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:Bs.func},Mc(t,e)};function Dc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Fc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Dc(this,e.call.apply(e,[this].concat(o))),r.history=_l(r.props),Dc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component);function jc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Fc.propTypes={basename:Bs.string,forceRefresh:Bs.bool,getUserConfirmation:Bs.func,keyLength:Bs.number,children:Bs.node},(function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=jc(this,e.call.apply(e,[this].concat(o))),r.history=Ol(r.props),jc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){il(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return G.createElement(Hl,{history:this.history,children:this.props.children})},t}(G.Component)).propTypes={basename:Bs.string,getUserConfirmation:Bs.func,hashType:Bs.oneOf(["hashbang","noslash","slash"]),children:Bs.node};var Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Uc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $c=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},Vc=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Uc(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!$c(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},Uc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);al(this.context.router,"You should not use <Link> outside a <Router>"),al(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?vl(t,null,null,i.location):t,a=i.createHref(o);return G.createElement("a",Hc({},r,{onClick:this.handleClick,href:a,ref:n}))},t}(G.Component);Vc.propTypes={onClick:Bs.func,target:Bs.string,replace:Bs.bool,to:Bs.oneOfType([Bs.string,Bs.object]).isRequired,innerRef:Bs.oneOfType([Bs.string,Bs.func])},Vc.defaultProps={replace:!1},Vc.contextTypes={router:Bs.shape({history:Bs.shape({push:Bs.func.isRequired,replace:Bs.func.isRequired,createHref:Bs.func.isRequired}).isRequired}).isRequired};var Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var zc=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,o=e.activeClassName,a=e.className,s=e.activeStyle,l=e.style,c=e.isActive,u=e["aria-current"],h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),d="object"===(void 0===t?"undefined":Bc(t))?t.pathname:t,p=d&&d.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return G.createElement(mc,{path:p,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return G.createElement(Vc,Wc({to:t,className:i?[a,o].filter(function(e){return e}).join(" "):a,style:i?Wc({},l,s):l,"aria-current":i&&u||null},h))}})};function qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qc(e,t,n[t])})}return e}function Kc(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}zc.propTypes={to:Vc.propTypes.to,exact:Bs.bool,strict:Bs.bool,location:Bs.object,activeClassName:Bs.string,className:Bs.string,activeStyle:Bs.object,style:Bs.object,isActive:Bs.func,"aria-current":Bs.oneOf(["page","step","location","date","time","true"])},zc.defaultProps={activeClassName:"active","aria-current":"page"};class Yc extends Error{}class Xc extends Error{}class Qc extends Error{}class Jc extends Error{constructor(e){super(),e&&Object.assign(this,e)}}class Zc extends Error{constructor(e){super(),e&&Object.assign(this,e)}}var eu=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),tu=new RegExp("%[a-f0-9]{2}","gi"),nu=new RegExp("(%[a-f0-9]{2})+","gi");function ru(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],ru(n),ru(r))}function iu(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(tu),n=1;n<t.length;n++)t=(e=ru(t,n).join("")).match(tu);return e}}var ou=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"","%FF%FE":""},r=nu.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=iu(r[0]);i!==r[0]&&(n[r[0]]=i)}r=nu.exec(e)}n["%C2"]="";for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}};function au(e,t){return t.encode?t.strict?eu(e):encodeURIComponent(e):e}function su(e,t){return t.decode?ou(e):e}var lu=function(e,t){const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,arrayFormat:"none"},t)),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,o]=i.replace(/\+/g," ").split("=");o=void 0===o?null:su(o,t),n(su(e,t),o,r)}return Object.keys(r).sort().reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))},cu=(e,t)=>{if(!e)return"";const n=function(e){switch(e.arrayFormat){case"index":return(t,n,r)=>null===n?[au(t,e),"[",r,"]"].join(""):[au(t,e),"[",au(r,e),"]=",au(n,e)].join("");case"bracket":return(t,n)=>null===n?[au(t,e),"[]"].join(""):[au(t,e),"[]=",au(n,e)].join("");default:return(t,n)=>null===n?au(t,e):[au(t,e),"=",au(n,e)].join("")}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.keys(e);return!1!==t.sort&&r.sort(t.sort),r.map(r=>{const i=e[r];if(void 0===i)return"";if(null===i)return au(r,t);if(Array.isArray(i)){const e=[];for(const t of i.slice())void 0!==t&&e.push(n(r,t,e.length));return e.join("&")}return au(r,t)+"="+au(i,t)}).filter(e=>e.length>0).join("&")};function uu(e){let t=cu(e);return t?`?${t}`:""}const hu={viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",width:16,height:16},du=e=>t=>G.createElement("svg",Object.assign({},hu,t),"string"==typeof e?G.createElement("path",{d:e}):e),pu=du("M9 3h4v4M7 13H3V9M13 3L9 7M3 13l4-4"),fu=du("M12 12L7 8l5-4zM4 12V4"),mu=du("M8 4v8.624M4 8h8.41"),gu=du("M3.5 8H12.5"),vu=du("M8 3v7M4.5 6.5h7M4.5 12.5h7"),bu=du("M13 8H3M7 12L3 8l4-4"),yu=du("M11 2l3 3-8 8H3v-3l8-8z"),wu=du("M13 3L3 13M3 3l10 10"),xu=du("M14 4v9H2V4M1 1h14v3H1zM6.5 6.5h3"),Eu=du("M6 13l4-4-4-4"),ku=du("M14 10c0 .736-.597 1.333-1.333 1.333h-8L2 14V3.333C2 2.597 2.597 2 3.333 2h9.334C13.403 2 14 2.597 14 3.333V10z"),Su=du("M2 3.554V6.89h3.273M14 12.446V9.11h-3.273 M12.63 6.333a5.007 5.007 0 0 0-1.366-2.07 4.877 4.877 0 0 0-2.178-1.14 4.822 4.822 0 0 0-2.447.074 4.891 4.891 0 0 0-2.108 1.269L2 6.889M14 9.11l-2.53 2.423a4.892 4.892 0 0 1-2.109 1.27 4.823 4.823 0 0 1-2.447.073 4.878 4.878 0 0 1-2.178-1.14 5.008 5.008 0 0 1-1.367-2.07"),Cu=du(G.createElement("g",null,G.createElement("path",{d:"M5 10.5l3 3 3-3"}),G.createElement("path",{d:"M4.5 3C4.5 5 8 5.922 8 9.5v4M11.5 3C11.5 5 8 5.922 8 9.5v4"}))),Tu=du(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"7"}),G.createElement("path",{d:"M1 8h14M8 1a10.816 10.816 0 0 1 2.75 7A10.816 10.816 0 0 1 8 15a10.816 10.816 0 0 1-2.75-7A10.816 10.816 0 0 1 8 1z"}))),_u=du(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"2"}),G.createElement("path",{d:"M12.71 9.91a1.05 1.05 0 0 0 .21 1.157l.037.038a1.273 1.273 0 1 1-1.8 1.801l-.039-.038a1.05 1.05 0 0 0-1.158-.21 1.05 1.05 0 0 0-.636.961v.108a1.273 1.273 0 1 1-2.546 0v-.057a1.05 1.05 0 0 0-.687-.96 1.05 1.05 0 0 0-1.158.21l-.038.037a1.273 1.273 0 1 1-1.801-1.8l.038-.039c.3-.307.383-.765.21-1.158a1.05 1.05 0 0 0-.961-.636h-.108a1.273 1.273 0 0 1 0-2.546h.057a1.05 1.05 0 0 0 .96-.687 1.05 1.05 0 0 0-.21-1.158l-.037-.038a1.273 1.273 0 1 1 1.8-1.801l.039.038c.307.3.765.383 1.158.21h.05a1.05 1.05 0 0 0 .637-.961v-.108a1.273 1.273 0 0 1 2.546 0v.057c.001.419.251.796.636.96.393.174.851.091 1.158-.21l.038-.037a1.273 1.273 0 1 1 1.801 1.8l-.038.039a1.05 1.05 0 0 0-.21 1.158v.05c.165.386.543.636.961.637h.108a1.273 1.273 0 1 1 0 2.546h-.057a1.05 1.05 0 0 0-.96.636z"}))),Nu=du(G.createElement("g",null,G.createElement("path",{d:"M10.727 13.09V12a2.182 2.182 0 0 0-2.182-2.182H4.182A2.182 2.182 0 0 0 2 12v1.09"}),G.createElement("circle",{cx:"6.364",cy:"5.455",r:"2.182"}),G.createElement("path",{d:"M14 13.09V12c0-.994-.674-1.862-1.636-2.11M10.182 3.344a2.182 2.182 0 0 1 0 4.227"}))),Pu=du("M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1"),Au=du("M14.36 10.475a2.408 2.408 0 0 0-.229-2.357A2.646 2.646 0 0 0 11.951 7h-.658c-.438-1.647-1.915-2.85-3.684-3M4 4.5C2.32 5.389 1.5 7 2 9s2 3 4 3h5c.303 0 .554-.051.84-.15M3 3l11 10"),Lu=du(G.createElement("g",null,G.createElement("path",{d:"M12.5 11c1.457-.296 2.373-1.447 2.223-2.926-.15-1.479-1.433-3.021-2.92-3.02H11C10.472 3.01 8.61 2 6.5 2S2.675 3.428 2.148 5.472C1.62 7.516 2.153 9.978 4 11"}),",",G.createElement("path",{d:"M9 7l-2 3.5h3L8 14"}))),Ou=du("M3 7.5v4.8c0 .663.56 1.2 1.25 1.2h7.5c.69 0 1.25-.537 1.25-1.2V7.5M10.5 5L8 2 5.5 5M8 3v6"),Mu=du("M3 5h10M12 5v8c0 .621-.369 1-1 1H5c-.631 0-1-.379-1-1V5m1 0V3c0-.552.5-1 1-1h4c.5 0 1 .448 1 1v2"),Iu=du("M4 4h4v4H4zM8 4h4v4H8zM8 8h4v4H8zM4 8h4v4H4z"),Ru=du(G.createElement("path",{d:"M13.075 3.925A3.157 3.157 0 0 0 10.842 3c-.838 0-1.641.478-2.233 1.07L8 4.68l-.609-.61c-1.233-1.233-3.233-1.378-4.466-.145a3.158 3.158 0 0 0 0 4.467L3.534 9 8 13.788 12.466 9l.609-.608a3.157 3.157 0 0 0 0-4.467z"})),Du=du(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"6"}),G.createElement("circle",{cx:"8",cy:"8",r:"2"}),G.createElement("path",{d:"M3.824 3.824L6.5 6.5m3 3l2.295 2.295M9.5 6.5l2.55-2.55m-8.226 7.845l2.5-2.5"}))),Fu=du(G.createElement("g",null,G.createElement("circle",{cx:"7",cy:"7",r:"4"}),G.createElement("path",{d:"M13 13l-3-3"}))),ju=du(G.createElement("g",null,G.createElement("path",{d:"M8.688 1H3.875C3.115 1 2.5 1.627 2.5 2.4v11.2c0 .773.616 1.4 1.375 1.4h8.25c.76 0 1.375-.627 1.375-1.4V5.9L8.687 1z"}),G.createElement("path",{d:"M8.5 1v5h5"}))),Hu=du(G.createElement("g",null,G.createElement("circle",{cx:"5",cy:"12.5",r:"1.5"}),G.createElement("circle",{cx:"5",cy:"3.5",r:"1.5"}),G.createElement("circle",{cx:"11",cy:"3.5",r:"1.5"}),G.createElement("path",{d:"M5 10.5V5"}),G.createElement("path",{d:"M5 8h3.995C10.332 8 11 7 11 5"}))),Uu=du(G.createElement("g",null,G.createElement("path",{d:"M13 8.922v2.967c0 .614-.497 1.111-1.111 1.111H4.11A1.111 1.111 0 0 1 3 11.889V4.11C3 3.497 3.497 3 4.111 3h2.967"}),G.createElement("path",{d:"M12 2l2 2-5 5H7V7z"}))),$u=du(G.createElement("g",null,G.createElement("path",{d:"M11.889 13H4.11A1.111 1.111 0 0 1 3 11.889V4.11C3 3.497 3.497 3 4.111 3h6.111L13 5.778v6.11c0 .615-.497 1.112-1.111 1.112z"}),G.createElement("path",{d:"M10 13v-3H6v3M6 3v3h3"}))),Vu=du(G.createElement("g",null,G.createElement("path",{d:"M7 8.76A2.927 2.927 0 0 0 9.15 10c.848.064 1.668-.272 2.27-.906l1.757-1.855c1.11-1.213 1.095-3.141-.035-4.334a2.823 2.823 0 0 0-4.108-.037L8 4"}),G.createElement("path",{d:"M9 7.24C8.49 6.52 7.71 6.064 6.863 6a2.853 2.853 0 0 0-2.282.906L2.823 8.76c-1.11 1.213-1.095 3.141.035 4.334C3.988 14.287 5.85 14.172 7 13l1-1.003"}))),Wu=({strong:e})=>G.createElement("svg",{width:"16",height:"16",className:e?"db bump":"db",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:e?"currentColor":"none"},G.createElement("path",{d:"M4 3L12 8L4 13Z"})),Bu=e=>G.createElement("svg",Object.assign({},hu,{viewBox:"0 0 12 8"},e),G.createElement("path",{d:"M10 6L6 2 2 6"})),zu=e=>G.createElement("svg",Object.assign({width:"4",height:"21"},e),G.createElement("rect",{width:"4",height:"21",fill:"currentColor",stroke:"none"})),qu=(du(G.createElement("g",null,G.createElement("circle",{cx:"8",cy:"8",r:"7"}),G.createElement("path",{d:"M6.06 6a2 2 0 0 1 3.887.667c0 1.333-2 2-2 2"}),G.createElement("line",{x1:"8",y1:"11",x2:"8",y2:"11"}))),e=>G.createElement("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},e),G.createElement("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"}))),Gu=e=>G.createElement("svg",Object.assign({viewBox:"0 0 24 24"},e),G.createElement("path",{fill:"currentColor",d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205\n11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422\n18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084\n1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93\n0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267\n1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12\n3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0\n1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24\n12.297c0-6.627-5.373-12-12-12"})),Ku=e=>G.createElement("svg",Object.assign({role:"img",viewBox:"0 0 24 24","aria-label":"Observable",fill:"currentColor"},e),G.createElement("path",{d:"M12 21c-1.108 0-2.068-.261-2.88-.783a5.137 5.137 0 0 1-1.867-2.126 11.821 11.821 0 0 1-.952-2.847A16.523 16.523 0 0 1 6 12c0-.862.052-1.686.157-2.474.104-.787.297-1.587.578-2.399.281-.812.643-1.516 1.084-2.113a4.987 4.987 0 0 1 1.735-1.455C10.27 3.186 11.084 3 12 3c1.108 0 2.068.261 2.88.783a5.137 5.137 0 0 1 1.867 2.126c.434.895.751 1.844.952 2.847.2 1.002.301 2.084.301 3.244 0 .862-.052 1.686-.157 2.474a11.76 11.76 0 0 1-.59 2.399c-.29.812-.65 1.516-1.084 2.113-.434.597-1.008 1.082-1.723 1.455-.715.373-1.53.559-2.446.559zm2.118-6.882A2.888 2.888 0 0 0 15 12c0-.824-.287-1.53-.86-2.118C13.566 9.294 12.853 9 12 9c-.853 0-1.566.294-2.14.882A2.925 2.925 0 0 0 9 12c0 .824.287 1.53.86 2.118.574.588 1.287.882 2.14.882.853 0 1.559-.294 2.118-.882zM12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z"})),Yu=e=>G.createElement("svg",Object.assign({},hu,{fill:"currentColor",stroke:"none"},e),G.createElement("circle",{r:"2",cy:"8",cx:"2"}),G.createElement("circle",{r:"2",cy:"8",cx:"8"}),G.createElement("circle",{r:"2",cy:"8",cx:"14"})),Xu=e=>G.createElement("svg",Object.assign({},hu,{fill:"currentColor",stroke:"none"},e,{viewBox:"0 0 8 14",width:"8",height:"14"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"2"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"7"}),G.createElement("circle",{r:"1.5",cx:"4",cy:"12"}));const Qu=Rc(class extends G.Component{render(){let{location:{pathname:e}}=this.props;return/^\/error(\?|$)/.test(e)&&(e="/"),G.createElement("div",{className:"mt6 sans-serif tc"},G.createElement(rl,null,G.createElement("title",null,"Login")),G.createElement("div",{className:"flex fixed top-0 right-0 bottom-0 left-0 items-center justify-center z-1"},G.createElement(Zu,{location:this.props.location})))}}),Ju={playground:"Please sign in to save your playground.",like:"Please sign in to like this notebook.",fork:"Please sign in to save your fork."};function Zu({loginReason:e,onDismiss:t,loginAction:n,location:{pathname:r}}){return G.createElement("div",{className:"relative"},e in Ju&&G.createElement("div",{className:"absolute w-100 tc",style:{bottom:"calc(100% + 1rem)"}},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 black-50 bg-near-white bb b--black-10 br2 br--top"},Ju[e])),t&&G.createElement("div",{onClick:t,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("div",{className:"pa3 tc"},G.createElement("div",{className:"center"},G.createElement(Ku,{className:"dib v-mid black",style:{height:24,width:24}}),G.createElement("span",{className:"dib v-mid ml2 f3 fw7 black"},"Observable")),G.createElement("div",{className:"mt2 mb4 f6 fw4 black-50"},"A better way to code."),G.createElement("div",{className:"mh3 mt5"},G.createElement("button",{onClick:()=>{n&&n(),window.location.assign(function(e){return`https://github.com/login/oauth/authorize?scope=user:email&client_id=1a8619df27715d9d2c97&state=${nh.token}&redirect_uri=${`https://api.observablehq.com/github/oauth?path=/loggedin${e}`}`}(r))},className:"flex w-100 justify-center pv2 pl2 pr3 f6 fw6 white bg-green hover-bg-dark-green br2 pointer shadow-2-hover z-2 bn"},G.createElement(Gu,{className:"w1 h1 ml1 mr2"}),"signup"===e?"Sign up":"Sign in"," with GitHub"),G.createElement("div",{className:"mt5 f7 fw4 lh-copy black-50"},"By continuing you agree to our"," ",G.createElement("a",{className:"blue hover-dark-blue link",href:"/terms-of-service",rel:"noopener noreferrer",target:"_blank"},"Terms of Service"),"."))))}class eh extends G.Component{constructor(e){super(e),qc(this,"onDismissMouseDown",e=>{if(e.target!==this.backdropRef.current)return;const{onDismiss:t}=this.props;this.stopEvent(e),t&&t(e)}),qc(this,"stopEvent",e=>{e.stopPropagation()}),this.backdropRef=G.createRef()}render(){const{wrapperClass:e}=this.props;return Vs.createPortal(G.createElement("div",null,G.createElement("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-navy z-1 o-30 min-vh-100"}),G.createElement("div",{className:"flex fixed top-0 right-0 bottom-0 left-0 items-center justify-center mt5 z-1",ref:this.backdropRef,onMouseDown:this.onDismissMouseDown},G.createElement("div",{className:`bg-white mw6 pa3 br2 shadow-1 ${e||""}`,onClick:this.stopEvent,style:{maxHeight:"100%"}},this.props.children))),document.getElementsByClassName("modal")[0])}}async function th(e){nh.token=e;const t=await fetch("https://api.observablehq.com/user",{credentials:"include",cache:"no-store"});if(!t.ok)throw new Yc;const n=await t.json();nh.user=n,nh.api=function(e,t=window.fetch){return function n(r){function i(t,n={}){return o(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Gc({token:e},n))})}async function o(e,n={}){const{method:i}=n,o=await t("https://api.observablehq.com"+e,Gc({credentials:"include"},n,r));if(204===o.status)return!0;let a;if((o.status>=400||!o.ok)&&(400===o.status?a=new Jc(await o.json()):401===o.status?a=new Qc:404===o.status?a=new Zc(await o.json()):o.ok||(a=new Yc)),a)throw"POST"===i||"undefined"==typeof window||window.hasOwnProperty("onunhandledrejection")||dispatchEvent(new CustomEvent("unhandledrejection",{detail:a})),a;return o.json()}return{init:e=>n(e),documentNew(e,t){e||(e={nodes:[{id:0,value:"md`# Untitled`"}]});const{version:n,title:r,nodes:o}=e;return i("/document/new",{version:n,title:r,nodes:o,team:t})},documentTrash:e=>i(`/document/${e}/trash`,{trashed:!0}),documentTransfer:(e,t)=>i(`/document/${e}/transfer`,{user:t}),documentPutBack:e=>i(`/document/${e}/trash`,{trashed:!1}),documentsLoadPublic:e=>o(`/documents/public${uu({before:e})}`),documentsLoadUser:({before:e,types:t}={})=>o(`/user/documents${uu({before:e,types:t})}`),documentsLoadTeam:(e,{before:t,types:n}={})=>o(`/team/${e}/documents${uu({before:t,types:n})}`),documentsLoadUserLikes:e=>o(`/user/likes${uu({before:e})}`),documentsEmptyTrash:e=>i("/user/trash/empty",e?{team:e}:{}),documentPublish:(e,t,n,r=!1)=>i(`/document/${e}/publish`,{version:t,title:n,unlisted:r}),documentFork:(e,t,{events:n,team:r,comments:o})=>i(`/document/${e}/fork`,{version:t,team:r,comments:o,events:n}),documentMerge:(e,t,{events:n,target:r})=>i(`/document/${e}/merge`,{version:t,events:n,target:r}),documentUnpublish:e=>i(`/document/${e}/unpublish`),documentLike:(e,t)=>i(`/document/${e}/like`,{like:t}),documentLoad:(e,t)=>o(`/document/${e}${void 0===t?"":`@${t}`}`),documentLoadSecrets:e=>o(`/document/${e}/secrets`),documentAllowSecrets:(e,t)=>i(`/document/${e}/secrets`,{allow:t}),documentLoadHead:e=>o(`/document/${e}/head`),documentLoadMeta:e=>o(`/document/${e}/meta`),documentLoadLiked:e=>o(`/document/${e}/like`),documentLoadForks:(e,t,n)=>o(`/document/${e}/forks${uu({before:t,type:n})}`),documentLoadPublicForks:(e,t,n)=>o(`/document/${e}/forks${uu({before:t,type:n})}`),documentLoadPublished:(e,t,n)=>o(`/document/@${e}/${t}${void 0===n?"":`@${n}`}`),documentLoadByUser:(e,t)=>o(`/documents/@${e}${uu({before:t})}`),documentVersion:e=>o(`/document/${e}/version`),documentSearch:(e,t,n)=>o(`/documents/search${uu({query:e.trim().toLowerCase(),offset:t,limit:n})}`),documentsLoadCommonAncestry:(e,t,n,r)=>o(`/documents/${e}@${t}/${n}@${r}/ancestry`),collectionsLoadUser:(e,{before:t}={})=>o(`/collections/@${e}${uu({before:t})}`),collectionsLoadUserPinned:e=>o(`/collections/@${e}/pinned`),collectionLoad:(e,t,{before:n}={})=>o(`/collection/@${e}/${t}${uu({before:n})}`),userLoad:e=>o(`/user/@${e}`),userLoadStats:e=>o(`/user/@${e}/stats`),userSecrets:()=>o("/user/secrets"),userSetSecret:({name:e,value:t})=>i("/user/secret",{name:e,value:t}),usersExist:e=>o(`/users-exist?${e.map(e=>`login=${e}`).join("&")}`),teamAcceptInvitation:(e,t)=>i(`/team/${e}/accept`,{id:t}),teamRescindInvitation:(e,t)=>i(`/team/${e}/rescind`,{id:t}),teamMembers:e=>o(`/team/${e}/members`),teamInvitations:e=>o(`/team/${e}/invitations`),teamSecrets:e=>o(`/team/${e}/secrets`),teamSetSecret:(e,{name:t,value:n})=>i(`/team/${e}/secret`,{name:t,value:n}),teamInvite:(e,t)=>i(`/team/${e}/invite`,{email:t}),teamMemberRemove:(e,t)=>i(`/team/${e}/remove`,{user:t}),teamMemberRole:(e,t,n)=>i(`/team/${e}/role`,{user:t,role:n}),teamBillingUpdate:(e,t)=>i(`/team/${e}/billing`,{stripe_token:t}),teamBilling:e=>o(`/team/${e}/billing`),teamBillingDelete:e=>i(`/team/${e}/billing/delete`),teamEdit:(e,t)=>i(`/team/${e}/edit`,t),teamEditEmail:(e,t)=>i(`/team/${e}/email`,{email:t}),teamEditAvatar:(e,t)=>i(`/team/${e}/avatar`,{avatar:t}),teamCreate:({login:e,name:t,email:n,stripe_token:r})=>i("/team/new",{login:e,name:t,email:n,stripe_token:r}),userEdit:e=>i("/user",e),userEditEmail:e=>i("/user/email",{email:e}),userEditAvatar:e=>i("/user/avatar",{avatar:e}),userEmailConfirm:e=>i("/user/email/confirm",{id:e}),userSetLogin:e=>i("/user/login",{login:e}),collectionNew:({title:e,description:t,owner:n})=>i("/collection/new",{title:e,description:t,owner:n}),collectionEdit:({id:e,title:t,description:n,feature_rank:r,pinned:o})=>i(`/collection/${e}/edit`,{title:t,description:n,feature_rank:r,pinned:o}),collectionDelete:e=>i(`/collection/${e}/delete`),collectionAddDocument:({id:e,document_id:t})=>i(`/collection/${e}/add`,{id:t}),collectionRemoveDocument:({id:e,document_id:t})=>i(`/collection/${e}/remove`,{id:t})}}()}(e),n&&ga("set","userId",n.id)}const nh=new class{constructor(){this.user=null,this.token=null,this.api=null}isEditable(e){if(!this.user)return!1;const{user:{id:t,teams:n}}=this;return e.team?n.some(t=>e.team.id===t.id):e.creator.id===t}isSelfOrMember(e){if(!this.user)return!1;const{user:{login:t,teams:n}}=this;return t===e||n.some(t=>t.login===e)}};class rh extends G.Component{constructor(...e){super(...e),qc(this,"state",{loginVisible:!1,loginAction:void 0,loginReason:void 0}),qc(this,"showLogin",({loginReason:e,loginAction:t})=>{this.setState({loginVisible:!0,loginReason:e,loginAction:t})}),qc(this,"hideLogin",()=>{this.setState({loginVisible:!1})}),qc(this,"refreshUser",async()=>{await th(nh.token),this.setState({})})}render(){const e=this.props,{permissions:t,userRedirect:n,component:r}=e,i=Kc(e,["permissions","userRedirect","component"]),{loginVisible:o,loginReason:a,loginAction:s}=this.state;return G.createElement(mc,Object.assign({},nh,i,{render:e=>{if(n&&nh.user)return G.createElement(lc,{to:n});if("private"===t&&!nh.user)throw new Qc;if(nh.user&&!nh.user.login)throw new Xc;const i="undefined"!=typeof window&&window.preloadData;return i&&delete window.preloadData,G.createElement(G.Fragment,null,G.createElement(r,Object.assign({showLogin:this.showLogin,refreshUser:this.refreshUser,key:1,preloadData:i},nh,e)),o&&G.createElement(eh,{key:2,onDismiss:this.hideLogin,wrapperClass:"mb-25vh"},G.createElement(Zu,{loginReason:a,loginAction:s,location:this.props.location,onDismiss:this.hideLogin})))}}))}}const ih="w-100 mw8 ph3 center",oh="w-100 mw8 center";var ah=e=>{let{user:t,s:n}=e,r=Kc(e,["user","s"]);const{style:i}=r,o=Kc(r,["style"]);return G.createElement("img",Object.assign({alt:t?`@${t.login}`:null,src:t&&t.avatar_url?`${t.avatar_url}${t.avatar_url.includes("?")?"&":"?"}s=${2*n}`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVR4nGOaCQAAnwCc1NtUdAAAAABJRU5ErkJggg==",style:Gc({width:n,height:n,maxWidth:"none"},i)},o))};function sh({collection:e}){const t=e?`/collection/@${e.owner.login}/${e.slug}`:"#",n=e&&e.thumbnail;return G.createElement(Vc,{to:t,className:"flex-auto no-underline black hover-blue br2 hover-shadow-4-trigger hide-child"},G.createElement("div",{className:`bg-white${n?" cover bg-center":""} br2 hover-shadow-4`,style:{height:"11rem",backgroundImage:n?`url(https://static.observableusercontent.com/thumbnail/${n}.jpg)`:"var(--checkerboard)"}}),G.createElement("div",{className:"pt2"},G.createElement("div",{className:"f4 fw7 truncate"},e?e.title:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~"),G.createElement(Eu,{className:"w1 h1 ml1 child",style:{strokeWidth:2}})),G.createElement("div",{className:"pv1 f6 black-60 hover-blue"},e?`${e.document_count} notebook${1===e.document_count?"":"s"}`:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),G.createElement("div",{className:"f6 fw4 lh-copy"},e?e.description:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~"))))}const lh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ch=e=>`${lh[e.getMonth()]} ${e.getDate()}`,uh=e=>{const t=Math.floor((Date.now()-e)/1e3/60);return(t<=1?"seconds":t<45?`${t} minutes`:t<90?"1 hour":t<1440?`${Math.floor(t/60)} hours`:t<2880?"1 day":t<43200?`${Math.floor(t/1440)} days`:t<86400?"1 month":t<525960?`${Math.floor(t/43200)} months`:t<1051199?"1 year":`${Math.floor(t/525960)} years`)+" ago"};function hh(e,t){if(!e)return!1;const{id:n,teams:r}=e;return t.team?r.some(e=>t.team.id===e.id):t.creator.id===n}class dh extends G.Component{constructor(e){super(e),qc(this,"onKeyDown",e=>{const{onClickOutside:t}=this.props;"Escape"===e.key&&t(e)}),qc(this,"onClick",e=>{const{onClickOutside:t}=this.props;this.container.contains(e.target)||t(e)}),this.getContainer=this.getContainer.bind(this)}componentDidMount(){document.addEventListener("click",this.onClick,!0),document.addEventListener("keydown",this.onKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.onClick,!0),document.removeEventListener("keydown",this.onKeyDown,!0)}getContainer(e){this.container=e}render(){const e=this.props,{children:t,onClickOutside:n}=e,r=Kc(e,["children","onClickOutside"]);return G.createElement("div",Object.assign({},r,{ref:this.getContainer}),t)}}function ph({open:e,children:t,onClickOutside:n,extraStyle:r,top:i}){return G.createElement(dh,{onClickOutside:n},G.createElement("nav",{className:"db absolute lh-solid tl z-2",style:Gc({right:-8,width:"10rem"},i?{bottom:"1.6rem"}:{},r),"aria-label":"submenu","aria-hidden":""+!e},G.createElement("div",{className:"bg-white br2 shadow-4 overflow-hidden",style:{marginTop:"10px"}},t),G.createElement("div",{className:"absolute right-1",style:Gc({clip:"rect(0 18px 14px -4px)"},i?{right:6,bottom:-14,transform:"rotate(180deg)"}:{top:-4})},G.createElement("div",{className:"w1 h1 bg-white",style:{boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(6px, 6px)"}}))))}function fh(e){return(e|=0)>=1e3?(e/1e3).toFixed(Math.max(0,4-Math.floor(Math.log10(e)))).replace(/\.?0*$/,"")+"K":e+""}function mh(e){return e<1e4?e.toLocaleString():(e/1e3).toFixed(1)+"k"}function gh(e,t,n=(e=>G.createElement("span",{className:"black bg-light-yellow"},e))){let r,i=0,o=0,a=[];const s=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");if(!e)return null;for(;null!==(r=s.exec(e));)r.index!==i&&a.push(e.substring(i,r.index)),a.push(G.cloneElement(n(r[0]),{key:++o})),i=r.index+r[0].length;return i!==e.length&&a.push(e.substring(i)),a}let vh=({user:e,notebook:t,toggleMenu:n,open:r})=>t&&hh(e,t)?G.createElement("svg",{"aria-haspopup":!0,className:`pointer absolute right-0 bottom-0 ${r?"black-70":"black-30 hover-blue"}`,onClick:n,width:"24",height:"48"},r&&G.createElement("circle",{r:"10",cx:"12",cy:"24",className:"near-white",fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:19,fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:24,fill:"currentColor"}),G.createElement("circle",{r:"1.5",cx:"12",cy:29,fill:"currentColor"})):null,bh=({notebook:e})=>e&&e.likes?G.createElement("div",{className:"inline-flex items-center ml2"},G.createElement(Ru,{style:{width:14,strokeWidth:1,height:14,marginRight:2}}),G.createElement("span",null,fh(e.likes))):null;const yh=({notebook:e,closeMenu:t,onPutBack:n,onTrash:r,onRemoveFromCollection:i,url:o})=>G.createElement(ph,{onClickOutside:t,extraStyle:{right:-12,marginTop:-5,width:"auto"}},e.trashed?G.createElement("a",{onClick:n,className:"flex items-center pa2 f6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(bu,{className:"w1 h1 mr1"}),"Put back"):G.createElement("a",{onClick:r,className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Mu,{className:"w1 h1 mr1"}),"Move to trash"),G.createElement(Vc,{to:`${o}/safe`,className:"flex items-center pa2 f6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(Du,{className:"w1 h1 mr1"}),"Safe mode"),i&&G.createElement("a",{onClick:()=>i(e),className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(wu,{className:"w1 h1 mr1"}),"Remove from collection")),wh=({notebook:e})=>{if(!e)return G.createElement("div",{className:"flex ph2 pb2 f7 fw4"},G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~"));const{team:t,creator:n,update_time:r}=e,i=new Date(r),o=G.createElement(Vc,{className:"inline-flex items-center no-underline black-50 hover-blue",to:`/@${t?t.login:n.login}`},G.createElement(ah,{user:t||n,s:16,className:"mr1 br-100"}),G.createElement("span",null,t?t.name||t.login:n.name||n.login)),a=e.slug?`on ${ch(i)}`:uh(i);return G.createElement("div",{className:"flex ph2 pb2 f7 fw4 black-30"},G.createElement("div",{className:"inline-flex items-center"},o,G.createElement("span",{title:i.toLocaleString(),className:"ml1 nowrap"},a)),G.createElement(bh,{notebook:e}))};class xh extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1,hidden:!1}),qc(this,"toggleMenu",e=>{this.setState({open:!this.state.open}),e.stopPropagation()}),qc(this,"closeMenu",e=>{this.setState({open:!1}),e.stopPropagation()}),qc(this,"onTrash",async()=>{this.setState({hidden:!0}),await this.props.api.documentTrash(this.props.notebook.id),this.props.reload()}),qc(this,"onPutBack",async()=>{this.setState({hidden:!0}),await this.props.api.documentPutBack(this.props.notebook.id),this.props.reload()})}render(){const{user:e,notebook:t,onRemoveFromCollection:n,query:r}=this.props,{open:i,hidden:o}=this.state;if(o)return null;const{team:a,creator:s}=t||{},l=t?t.slug?`/@${a?a.login:s.login}/${t.slug}`:`/d/${t.id}`:"#";return G.createElement("div",{className:"flex-auto relative"},G.createElement("div",{className:"bg-white br2 hover-shadow-4"},G.createElement(Vc,{"aria-label":t?t.title:"",to:l},G.createElement("div",{className:`br2 br--top${t&&t.thumbnail?" cover bg-center":""}`,style:Gc({paddingTop:"62.5%"},{backgroundImage:t&&t.thumbnail?`url(https://static.observableusercontent.com/thumbnail/${t.thumbnail}.jpg)`:"var(--checkerboard)"})})),G.createElement("div",{className:"truncate bt b--black-10"},G.createElement(Vc,{to:l,className:"db flex pl2 pr4 f6 fw4 lh-solid no-underline black hover-blue"},G.createElement("div",{title:t?t.title:"",className:"pt2 pb1 mr2 truncate"},t?(r?gh(t.title,r):t.title)||"Untitled":G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~")),t&&!t.slug&&G.createElement("div",{style:{paddingTop:"0.625rem"},className:"ml2 f7 fw4 ttu black-30"},t.publish_time?"SHARED":"PRIVATE"),t&&t.fork_of&&G.createElement(Hu,{style:{paddingTop:"0.55rem",width:".8rem",height:".8rem",flexShrink:"0",strokeWidth:1},className:"dib w1 h1 v-base ml1 black-30"})),G.createElement(wh,{notebook:t})),G.createElement(vh,{notebook:t,open:i,user:e,toggleMenu:this.toggleMenu})),i&&G.createElement(yh,{notebook:t,closeMenu:this.closeMenu,onPutBack:this.onPutBack,onRemoveFromCollection:n,onTrash:this.onTrash,url:l}))}}function Eh(e){return function(){return e}}var kh=function(){};kh.thatReturns=Eh,kh.thatReturnsFalse=Eh(!1),kh.thatReturnsTrue=Eh(!0),kh.thatReturnsNull=Eh(null),kh.thatReturnsThis=function(){return this},kh.thatReturnsArgument=function(e){return e};var Sh=kh,Ch=function(e){};var Th=function(e,t,n,r,i,o,a,s){if(Ch(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},_h=Object.getOwnPropertySymbols,Nh=Object.prototype.hasOwnProperty,Ph=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}})()&&Object.assign;var Ah,Lh="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oh=(function(e){e.exports=function(){function e(e,t,n,r,i,o){o!==Lh&&Th(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=Sh,n.PropTypes=n,n}()}(Ah={exports:{}},Ah.exports),Ah.exports),Mh=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},Ih=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},Rh=function(e){var t="",n=Object.keys(e);return n.forEach(function(r,i){var o=e[r];(function(e){return/[height|width]$/.test(e)})(r=Ih(r))&&"number"==typeof o&&(o+="px"),t+=!0===o?r:!1===o?"not "+r:"("+r+": "+o+")",i<n.length-1&&(t+=" and ")}),t},Dh=function(e){var t="";return"string"==typeof e?e:e instanceof Array?(e.forEach(function(n,r){t+=Rh(n),r<e.length-1&&(t+=", ")}),t):Rh(e)},Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Hh=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Uh=function(e){function t(){var n,r;jh(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Hh(this,e.call.apply(e,[this].concat(o))),r.state={matches:r.props.defaultMatches},r.updateMatches=function(){return r.setState({matches:r.mediaQueryList.matches})},Hh(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){if("object"===("undefined"==typeof window?"undefined":Fh(window))){var e=this.props.targetWindow||window;Mh("function"==typeof e.matchMedia,"<Media targetWindow> does not support `matchMedia`.");var t=this.props.query;"string"!=typeof t&&(t=Dh(t)),this.mediaQueryList=e.matchMedia(t),this.mediaQueryList.addListener(this.updateMatches),this.updateMatches()}},t.prototype.componentWillUnmount=function(){this.mediaQueryList.removeListener(this.updateMatches)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.render,r=this.state.matches;return n?r?n():null:t?"function"==typeof t?t(r):(!Array.isArray(t)||t.length)&&r?G.Children.only(t):null:null},t}(G.Component);Uh.propTypes={defaultMatches:Oh.bool,query:Oh.oneOfType([Oh.string,Oh.object,Oh.arrayOf(Oh.object.isRequired)]).isRequired,render:Oh.func,children:Oh.oneOfType([Oh.node,Oh.func]),targetWindow:Oh.object},Uh.defaultProps={defaultMatches:!0};class $h extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"close",e=>{e.stopPropagation(),this.setState({open:!1})}),qc(this,"toggle",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))})}render(){const{user:e,mobile:t}=this.props,{open:n}=this.state;if(!e)return G.createElement("span",null);let r=G.createElement("div",{className:t?"":"pv2 nowrap"},e.login&&G.createElement(G.Fragment,null,G.createElement(Vc,{to:`/@${e.login}`,onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(ah,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),e.name||e.login),e.teams.map(e=>G.createElement(Vc,{key:e.login,to:`/@${e.login}`,onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(ah,{user:e,s:16,className:"mr1 br-100",style:{marginTop:-1,marginBottom:-1}}),e.name||e.login)),G.createElement(Vc,{to:"/settings",onClick:this.close,className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},"Settings")),G.createElement("form",{method:"POST",action:"/logout"},G.createElement("input",{type:"hidden",name:"token",value:nh.token}),G.createElement("button",{className:"flex w-100 items-center ph3 pv2 f6 fw6 tl black-70 hover-black bg-transparent hover-bg-near-white input-reset bn pointer"},"Sign out")));return t?G.createElement("div",{className:"nl2 nr2"},r):G.createElement("section",{style:{lineHeight:0},className:"dib relative","aria-haspopup":!0},G.createElement(ah,{user:e,onClick:this.toggle,className:"dib ba b--white br-100 pointer",s:32}),n&&G.createElement(ph,{onClickOutside:this.close,extraStyle:{width:"auto"}},r))}}var Vh=function(e,t){if(e===t)return!0;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},Wh=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bh=function(e){var t=e.data,n=e.multiSection;function r(e){var r=Wh(e,2),i=r[0],o=r[1];return n?null===o||o===t[i]-1?null===(i=function(e){for(null===e?e=0:e++;e<t.length&&0===t[e];)e++;return e===t.length?null:e}(i))?[null,null]:[i,0]:[i,o+1]:0===t||o===t-1?[null,null]:null===o?[null,0]:[null,o+1]}return{next:r,prev:function(e){var r=Wh(e,2),i=r[0],o=r[1];return n?null===o||0===o?null===(i=function(e){for(null===e?e=t.length-1:e--;e>=0&&0===t[e];)e--;return-1===e?null:e}(i))?[null,null]:[i,t[i]-1]:[i,o-1]:0===t||0===o?[null,null]:null===o?[null,t-1]:[null,o-1]},isLast:function(e){return null===r(e)[1]}}},zh=Object.prototype.propertyIsEnumerable;function qh(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(t){return zh.call(e,t)})}var Gh=Object.assign||function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){n=arguments[o],r=qh(Object(n));for(var a=0;a<r.length;a++)i[r[a]]=n[r[a]]}return i},Kh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i,o=(i=Gh)&&i.__esModule?i:{default:i},a=function(e){return e};t.default=function(e){var t=Array.isArray(e)&&2===e.length?e:[e,null],i=n(t,2),s=i[0],l=i[1];return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var c=n.map(function(e){return s[e]}).filter(a);return"string"==typeof c[0]||"function"==typeof l?{key:e,className:l?l.apply(void 0,r(c)):c.join(" ")}:{key:e,style:o.default.apply(void 0,[{}].concat(r(c)))}}},e.exports=t.default});t(Kh);var Yh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e===t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!0;var a={},s=void 0,l=void 0;for(s=0,l=r.length;s<l;s++)a[r[s]]=!0;for(s=0,l=i.length;s<l;s++){var c=i[s],u=e[c],h=t[c];if(u!==h){if(!a[c]||null===u||null===h||"object"!==(void 0===u?"undefined":n(u))||"object"!==(void 0===h?"undefined":n(h)))return!0;var d=Object.keys(u),p=Object.keys(h);if(d.length!==p.length)return!0;for(var f=0,m=d.length;f<m;f++){var g=d[f];if(u[g]!==h[g])return!0}}}return!1}});t(Yh);var Xh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=a(G),i=a(Bs),o=a(Yh);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),n(t,[{key:"shouldComponentUpdate",value:function(e){return(0,o.default)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.section,n=e.renderSectionTitle,i=e.theme,o=e.sectionKeyPrefix,a=n(t);return a?r.default.createElement("div",i(o+"title","sectionTitle"),a):null}}]),t}();s.propTypes={section:i.default.any.isRequired,renderSectionTitle:i.default.func.isRequired,theme:i.default.func.isRequired,sectionKeyPrefix:i.default.string.isRequired},t.default=s});t(Xh);var Qh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(G),o=s(Bs),a=s(Yh);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.storeItemReference=function(e){null!==e&&(r.item=e)},r.onMouseEnter=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseEnter(e,{sectionIndex:n,itemIndex:i})},r.onMouseLeave=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseLeave(e,{sectionIndex:n,itemIndex:i})},r.onMouseDown=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onMouseDown(e,{sectionIndex:n,itemIndex:i})},r.onClick=function(e){var t=r.props,n=t.sectionIndex,i=t.itemIndex;r.props.onClick(e,{sectionIndex:n,itemIndex:i})},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,a.default)(e,this.props,["renderItemData"])}},{key:"render",value:function(){var e=this.props,t=e.isHighlighted,r=e.item,o=e.renderItem,a=e.renderItemData,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isHighlighted","item","renderItem","renderItemData"]);return delete s.sectionIndex,delete s.itemIndex,"function"==typeof s.onMouseEnter&&(s.onMouseEnter=this.onMouseEnter),"function"==typeof s.onMouseLeave&&(s.onMouseLeave=this.onMouseLeave),"function"==typeof s.onMouseDown&&(s.onMouseDown=this.onMouseDown),"function"==typeof s.onClick&&(s.onClick=this.onClick),i.default.createElement("li",n({role:"option"},s,{ref:this.storeItemReference}),o(r,n({isHighlighted:t},a)))}}]),t}();c.propTypes={sectionIndex:o.default.number,isHighlighted:o.default.bool.isRequired,itemIndex:o.default.number.isRequired,item:o.default.any.isRequired,renderItem:o.default.func.isRequired,renderItemData:o.default.object.isRequired,onMouseEnter:o.default.func,onMouseLeave:o.default.func,onMouseDown:o.default.func,onClick:o.default.func},t.default=c});t(Qh);var Jh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Bs),a=l(Qh),s=l(Yh);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.storeHighlightedItemReference=function(e){r.props.onHighlightedItemChange(null===e?null:e.item)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,s.default)(e,this.props,["itemProps"])}},{key:"render",value:function(){var e=this,t=this.props,r=t.items,o=t.itemProps,s=t.renderItem,l=t.renderItemData,c=t.sectionIndex,u=t.highlightedItemIndex,h=t.getItemId,d=t.theme,p=t.keyPrefix,f=null===c?p:p+"section-"+c+"-",m="function"==typeof o;return i.default.createElement("ul",n({role:"listbox"},d(f+"items-list","itemsList")),r.map(function(t,r){var p=0===r,g=r===u,v=f+"item-"+r,b=m?o({sectionIndex:c,itemIndex:r}):o,y=n({id:h(c,r),"aria-selected":g},d(v,"item",p&&"itemFirst",g&&"itemHighlighted"),b);return g&&(y.ref=e.storeHighlightedItemReference),i.default.createElement(a.default,n({},y,{sectionIndex:c,isHighlighted:g,itemIndex:r,item:t,renderItem:s,renderItemData:l}))}))}}]),t}();u.propTypes={items:o.default.array.isRequired,itemProps:o.default.oneOfType([o.default.object,o.default.func]),renderItem:o.default.func.isRequired,renderItemData:o.default.object.isRequired,sectionIndex:o.default.number,highlightedItemIndex:o.default.number,onHighlightedItemChange:o.default.func.isRequired,getItemId:o.default.func.isRequired,theme:o.default.func.isRequired,keyPrefix:o.default.string.isRequired},u.defaultProps={sectionIndex:null},t.default=u});t(Jh);var Zh=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(G),a=h(Bs),s=h(Bh),l=h(Kh),c=h(Xh),u=h(Jh);function h(e){return e&&e.__esModule?e:{default:e}}var d={},p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.storeInputReference=function(e){null!==e&&(n.input=e)},n.storeItemsContainerReference=function(e){null!==e&&(n.itemsContainer=e)},n.onHighlightedItemChange=function(e){n.highlightedItem=e},n.getItemId=function(e,t){return null===t?null:"react-autowhatever-"+n.props.id+"-"+(null===e?"":"section-"+e)+"-item-"+t},n.onFocus=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!0}),t.onFocus&&t.onFocus(e)},n.onBlur=function(e){var t=n.props.inputProps;n.setState({isInputFocused:!1}),t.onBlur&&t.onBlur(e)},n.onKeyDown=function(e){var t=n.props,i=t.inputProps,o=t.highlightedSectionIndex,a=t.highlightedItemIndex;switch(e.key){case"ArrowDown":case"ArrowUp":var s="ArrowDown"===e.key?"next":"prev",l=n.sectionIterator[s]([o,a]),c=r(l,2),u=c[0],h=c[1];i.onKeyDown(e,{newHighlightedSectionIndex:u,newHighlightedItemIndex:h});break;default:i.onKeyDown(e,{highlightedSectionIndex:o,highlightedItemIndex:a})}},n.highlightedItem=null,n.state={isInputFocused:!1},n.setSectionsItems(e),n.setSectionIterator(e),n.setTheme(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),i(t,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),e.items===this.props.items&&e.multiSection===this.props.multiSection||this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map(function(t){return e.getSectionItems(t)}),this.sectionsLengths=this.sectionsItems.map(function(e){return e.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(e){return 0===e}))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,s.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,l.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var t=this.theme,n=this.props,r=n.id,i=n.items,a=n.renderItem,s=n.renderItemData,l=n.renderSectionTitle,h=n.highlightedSectionIndex,d=n.highlightedItemIndex,p=n.itemProps;return i.map(function(n,i){var f="react-autowhatever-"+r+"-",m=f+"section-"+i+"-",g=0===i;return o.default.createElement("div",t(m+"container","sectionContainer",g&&"sectionContainerFirst"),o.default.createElement(c.default,{section:n,renderSectionTitle:l,theme:t,sectionKeyPrefix:m}),o.default.createElement(u.default,{items:e.sectionsItems[i],itemProps:p,renderItem:a,renderItemData:s,sectionIndex:i,highlightedItemIndex:h===i?d:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:t,keyPrefix:f,ref:e.storeItemsListReference}))})}},{key:"renderItems",value:function(){var e=this.props.items;if(0===e.length)return null;var t=this.theme,n=this.props,r=n.id,i=n.renderItem,a=n.renderItemData,s=n.highlightedSectionIndex,l=n.highlightedItemIndex,c=n.itemProps;return o.default.createElement(u.default,{items:e,itemProps:c,renderItem:i,renderItemData:a,highlightedItemIndex:null===s?l:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:t,keyPrefix:"react-autowhatever-"+r+"-"})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var t=this.itemsContainer,n=e.offsetParent===t?e.offsetTop:e.offsetTop-t.offsetTop,r=t.scrollTop;n<r?r=n:n+e.offsetHeight>r+t.offsetHeight&&(r=n+e.offsetHeight-t.offsetHeight),r!==t.scrollTop&&(t.scrollTop=r)}}},{key:"render",value:function(){var e=this.theme,t=this.props,r=t.id,i=t.multiSection,a=t.renderInputComponent,s=t.renderItemsContainer,l=t.highlightedSectionIndex,c=t.highlightedItemIndex,u=this.state.isInputFocused,h=i?this.renderSections():this.renderItems(),d=null!==h,p=this.getItemId(l,c),f="react-autowhatever-"+r,m=n({role:"combobox","aria-haspopup":"listbox","aria-owns":f,"aria-expanded":d},e("react-autowhatever-"+r+"-container","container",d&&"containerOpen"),this.props.containerProps),g=a(n({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":f,"aria-activedescendant":p},e("react-autowhatever-"+r+"-input","input",d&&"inputOpen",u&&"inputFocused"),this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),v=s({containerProps:n({id:f,role:"listbox"},e("react-autowhatever-"+r+"-items-container","itemsContainer",d&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:h});return o.default.createElement("div",m,g,v)}}]),t}();p.propTypes={id:a.default.string,multiSection:a.default.bool,renderInputComponent:a.default.func,renderItemsContainer:a.default.func,items:a.default.array.isRequired,renderItem:a.default.func,renderItemData:a.default.object,renderSectionTitle:a.default.func,getSectionItems:a.default.func,containerProps:a.default.object,inputProps:a.default.object,itemProps:a.default.oneOfType([a.default.object,a.default.func]),highlightedSectionIndex:a.default.number,highlightedItemIndex:a.default.number,theme:a.default.oneOfType([a.default.object,a.default.array])},p.defaultProps={id:"1",multiSection:!1,renderInputComponent:function(e){return o.default.createElement("input",e)},renderItemsContainer:function(e){var t=e.containerProps,n=e.children;return o.default.createElement("div",t,n)},renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:d,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:d,inputProps:d,itemProps:d,highlightedSectionIndex:null,highlightedItemIndex:null,theme:{container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"}},t.default=p});t(Zh);var ed=Zh.default,td=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"},t.mapToAutowhateverTheme=function(e){var t={};for(var n in e)switch(n){case"suggestionsContainer":t.itemsContainer=e[n];break;case"suggestionsContainerOpen":t.itemsContainerOpen=e[n];break;case"suggestion":t.item=e[n];break;case"suggestionFirst":t.itemFirst=e[n];break;case"suggestionHighlighted":t.itemHighlighted=e[n];break;case"suggestionsList":t.itemsList=e[n];break;default:t[n]=e[n]}return t}});t(td);td.defaultTheme,td.mapToAutowhateverTheme;var nd=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(G),o=l(Bs),a=l(Vh),s=l(ed);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){return!0},u=function(e){function t(e){var n=e.alwaysRenderSuggestions;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.call(r),r.state={isFocused:!1,isCollapsed:!n,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},r.justPressedUpDown=!1,r.justMouseEntered=!1,r.pressedSuggestion=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,G.Component),r(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"componentWillReceiveProps",value:function(e){(0,a.default)(e.suggestions,this.props.suggestions)?e.highlightFirstSuggestion&&e.suggestions.length>0&&!1===this.justPressedUpDown&&!1===this.justMouseEntered&&this.highlightFirstSuggestion():this.willRenderSuggestions(e)?this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions():this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.suggestions,i=n.onSuggestionHighlighted,o=n.highlightFirstSuggestion;if(!(0,a.default)(r,e.suggestions)&&r.length>0&&o)this.highlightFirstSuggestion();else if(i){var s=this.getHighlightedSuggestion();s!=t.highlightedSuggestion&&i({suggestion:s})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(e,t,n){var r=this;this.setState(function(i){var o=i.valueBeforeUpDown;return null===t?o=null:null===o&&void 0!==n&&(o=n),{highlightedSectionIndex:e,highlightedSuggestionIndex:t,highlightedSuggestion:null===t?null:r.getSuggestion(e,t),valueBeforeUpDown:o}})}},{key:"resetHighlightedSuggestion",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(t){var n=t.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:e?null:n}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,t){var n=this.props,r=n.suggestions,i=n.multiSection,o=n.getSectionSuggestions;return i?o(r[e])[t]:r[t]}},{key:"getHighlightedSuggestion",value:function(){var e=this.state,t=e.highlightedSectionIndex,n=e.highlightedSuggestionIndex;return null===n?null:this.getSuggestion(t,n)}},{key:"getSuggestionValueByIndex",value:function(e,t){return(0,this.props.getSuggestionValue)(this.getSuggestion(e,t))}},{key:"getSuggestionIndices",value:function(e){var t=e.getAttribute("data-section-index"),n=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,suggestionIndex:parseInt(n,10)}}},{key:"findSuggestionElement",value:function(e){var t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentNode}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,t,n){var r=this.props.inputProps,i=r.value,o=r.onChange;t!==i&&o(e,{newValue:t,method:n})}},{key:"willRenderSuggestions",value:function(e){var t=e.suggestions,n=e.inputProps,r=e.shouldRenderSuggestions,i=n.value;return t.length>0&&r(i)}},{key:"getQuery",value:function(){var e=this.props.inputProps.value,t=this.state.valueBeforeUpDown;return(null===t?e:t).trim()}},{key:"render",value:function(){var e=this,t=this.props,r=t.suggestions,o=t.renderInputComponent,a=t.onSuggestionsFetchRequested,l=t.renderSuggestion,u=t.inputProps,h=t.multiSection,d=t.renderSectionTitle,p=t.id,f=t.getSectionSuggestions,m=t.theme,g=t.getSuggestionValue,v=t.alwaysRenderSuggestions,b=t.highlightFirstSuggestion,y=this.state,w=y.isFocused,x=y.isCollapsed,E=y.highlightedSectionIndex,k=y.highlightedSuggestionIndex,S=y.valueBeforeUpDown,C=v?c:this.props.shouldRenderSuggestions,T=u.value,_=u.onFocus,N=u.onKeyDown,P=this.willRenderSuggestions(this.props),A=v||w&&!x&&P,L=A?r:[],O=n({},u,{onFocus:function(t){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var n=C(T);e.setState({isFocused:!0,isCollapsed:!n}),_&&_(t),n&&a({value:T,reason:"input-focused"})}},onBlur:function(t){e.justClickedOnSuggestionsContainer?e.input.focus():(e.blurEvent=t,e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested()))},onChange:function(t){var r=t.target.value,i=C(r);e.maybeCallOnChange(t,r,"type"),e.setState(n({},b?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!i})),i?a({value:r,reason:"input-changed"}):e.onSuggestionsClearRequested()},onKeyDown:function(t,n){var i=t.keyCode;switch(i){case 40:case 38:if(x)C(T)&&(a({value:T,reason:"suggestions-revealed"}),e.revealSuggestions());else if(r.length>0){var o=n.newHighlightedSectionIndex,s=n.newHighlightedItemIndex,l=void 0;l=null===s?null===S?T:S:e.getSuggestionValueByIndex(o,s),e.updateHighlightedSuggestion(o,s,T),e.maybeCallOnChange(t,l,40===i?"down":"up")}t.preventDefault(),e.justPressedUpDown=!0,setTimeout(function(){e.justPressedUpDown=!1});break;case 13:if(229===t.keyCode)break;var c=e.getHighlightedSuggestion();if(A&&!v&&e.closeSuggestions(),null!=c){var u=g(c);e.maybeCallOnChange(t,u,"enter"),e.onSuggestionSelected(t,{suggestion:c,suggestionValue:u,suggestionIndex:k,sectionIndex:E,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout(function(){e.justSelectedSuggestion=!1})}break;case 27:A&&t.preventDefault();var h=A&&!v;if(null===S){if(!h){e.maybeCallOnChange(t,"","escape"),C("")?a({value:"",reason:"escape-pressed"}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(t,S,"escape");h?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetHighlightedSuggestion()}N&&N(t)}}),M={query:this.getQuery()};return i.default.createElement(s.default,{multiSection:h,items:L,renderInputComponent:o,renderItemsContainer:this.renderSuggestionsContainer,renderItem:l,renderItemData:M,renderSectionTitle:d,getSectionItems:f,highlightedSectionIndex:E,highlightedItemIndex:k,inputProps:O,itemProps:this.itemProps,theme:(0,td.mapToAutowhateverTheme)(m),id:p,ref:this.storeAutowhateverRef})}}]),t}();u.propTypes={suggestions:o.default.array.isRequired,onSuggestionsFetchRequested:function(e,t){var n=e[t];if("function"!=typeof n)throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(e,t){var n=e[t];if(!1===e.alwaysRenderSuggestions&&"function"!=typeof n)throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},onSuggestionSelected:o.default.func,onSuggestionHighlighted:o.default.func,renderInputComponent:o.default.func,renderSuggestionsContainer:o.default.func,getSuggestionValue:o.default.func.isRequired,renderSuggestion:o.default.func.isRequired,inputProps:function(e,t){var n=e[t];if(!n.hasOwnProperty("value"))throw new Error("'inputProps' must have 'value'.");if(!n.hasOwnProperty("onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:o.default.func,alwaysRenderSuggestions:o.default.bool,multiSection:o.default.bool,renderSectionTitle:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(e,t){var n=e[t];if(!0===e.multiSection&&"function"!=typeof n)throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:o.default.bool,highlightFirstSuggestion:o.default.bool,theme:o.default.object,id:o.default.string},u.defaultProps={renderSuggestionsContainer:function(e){var t=e.containerProps,n=e.children;return i.default.createElement("div",t,n)},shouldRenderSuggestions:function(e){return e.trim().length>0},alwaysRenderSuggestions:!1,multiSection:!1,focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:td.defaultTheme,id:"1"};var h=function(){var e=this;this.onDocumentMouseDown=function(t){e.justClickedOnSuggestionsContainer=!1;for(var n=t.detail&&t.detail.target||t.target;null!==n&&n!==document;){if(null!==n.getAttribute("data-suggestion-index"))return;if(n===e.suggestionsContainer)return void(e.justClickedOnSuggestionsContainer=!0);n=n.parentNode}},this.storeAutowhateverRef=function(t){null!==t&&(e.autowhatever=t)},this.onSuggestionMouseEnter=function(t,n){var r=n.sectionIndex,i=n.itemIndex;e.updateHighlightedSuggestion(r,i),t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!0),e.justMouseEntered=!0,setTimeout(function(){e.justMouseEntered=!1})},this.highlightFirstSuggestion=function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)},this.onDocumentMouseUp=function(){e.pressedSuggestion&&!e.justSelectedSuggestion&&e.input.focus(),e.pressedSuggestion=null},this.onSuggestionMouseDown=function(t){e.justSelectedSuggestion||(e.justSelectedSuggestion=!0,e.pressedSuggestion=t.target)},this.onSuggestionsClearRequested=function(){var t=e.props.onSuggestionsClearRequested;t&&t()},this.onSuggestionSelected=function(t,n){var r=e.props,i=r.alwaysRenderSuggestions,o=r.onSuggestionSelected,a=r.onSuggestionsFetchRequested;o&&o(t,n),i?a({value:n.suggestionValue,reason:"suggestion-selected"}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()},this.onSuggestionClick=function(t){var n=e.props,r=n.alwaysRenderSuggestions,i=n.focusInputOnSuggestionClick,o=e.getSuggestionIndices(e.findSuggestionElement(t.target)),a=o.sectionIndex,s=o.suggestionIndex,l=e.getSuggestion(a,s),c=e.props.getSuggestionValue(l);e.maybeCallOnChange(t,c,"click"),e.onSuggestionSelected(t,{suggestion:l,suggestionValue:c,suggestionIndex:s,sectionIndex:a,method:"click"}),r||e.closeSuggestions(),!0===i?e.input.focus():e.onBlur(),setTimeout(function(){e.justSelectedSuggestion=!1})},this.onBlur=function(){var t=e.props,n=t.inputProps,r=t.shouldRenderSuggestions,i=n.value,o=n.onBlur,a=e.getHighlightedSuggestion(),s=r(i);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!s}),o&&o(e.blurEvent,{highlightedSuggestion:a})},this.onSuggestionMouseLeave=function(t){e.resetHighlightedSuggestion(!1),e.justSelectedSuggestion&&t.target===e.pressedSuggestion&&(e.justSelectedSuggestion=!1)},this.onSuggestionTouchStart=function(){e.justSelectedSuggestion=!0},this.onSuggestionTouchMove=function(){e.justSelectedSuggestion=!1,e.pressedSuggestion=null,e.input.focus()},this.itemProps=function(t){return{"data-section-index":t.sectionIndex,"data-suggestion-index":t.itemIndex,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.onSuggestionMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionTouchStart,onTouchMove:e.onSuggestionTouchMove,onClick:e.onSuggestionClick}},this.renderSuggestionsContainer=function(t){var n=t.containerProps,r=t.children;return(0,e.props.renderSuggestionsContainer)({containerProps:n,children:r,query:e.getQuery()})}};t.default=u});t(nd);var rd=nd.default;function id(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var od="object"==typeof global&&global&&global.Object===Object&&global,ad="object"==typeof self&&self&&self.Object===Object&&self,sd=od||ad||Function("return this")(),ld=function(){return sd.Date.now()},cd=sd.Symbol,ud=Object.prototype,hd=ud.hasOwnProperty,dd=ud.toString,pd=cd?cd.toStringTag:void 0;var fd=Object.prototype.toString;var md="[object Null]",gd="[object Undefined]",vd=cd?cd.toStringTag:void 0;function bd(e){return null==e?void 0===e?gd:md:vd&&vd in Object(e)?function(e){var t=hd.call(e,pd),n=e[pd];try{e[pd]=void 0}catch(i){}var r=dd.call(e);return t?e[pd]=n:delete e[pd],r}(e):function(e){return fd.call(e)}(e)}var yd="[object Symbol]";var wd=NaN,xd=/^\s+|\s+$/g,Ed=/^[-+]0x[0-9a-f]+$/i,kd=/^0b[01]+$/i,Sd=/^0o[0-7]+$/i,Cd=parseInt;function Td(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&bd(e)==yd}(e))return wd;if(id(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=id(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(xd,"");var n=kd.test(e);return n||Sd.test(e)?Cd(e.slice(2),n?2:8):Ed.test(e)?wd:+e}var _d="Expected a function",Nd=Math.max,Pd=Math.min;function Ad(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(_d);function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=ld();if(f(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return h?Pd(n,o-(e-c)):n}(e))}function g(e){return s=void 0,d&&r?p(e):(r=i=void 0,a)}function v(){var e=ld(),n=f(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):a}(l);if(h)return s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=Td(t)||0,id(n)&&(u=!!n.leading,o=(h="maxWait"in n)?Nd(Td(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:g(ld())},v}function Ld({notebook:{creator:e,team:t,update_time:n}}){const r=t||e,i=new Date(n);return G.createElement("div",{className:"inline-flex items-center"},G.createElement("span",{className:"inline-flex items-center black-50"},G.createElement(ah,{user:r,s:16,className:"mr1 br-100"}),G.createElement("span",null,r.name||r.login)),G.createElement("span",{title:i.toLocaleString(),className:"ml1 nowrap"},"on ",ch(i)))}const Od={},Md=({containerProps:e,children:t})=>G.createElement("div",e,G.createElement("div",{style:{marginTop:10},className:"db absolute left-0 w5 bg-white br1 shadow-4 overflow-hidden"},t),G.createElement("div",{className:"absolute left-1",style:{top:-4,clip:"rect(0 18px 14px -4px)"}},G.createElement("div",{className:"w1 h1 bg-white shadow-4",style:{transform:"rotate(45deg) translate(6px, 6px)"}}))),Id=e=>{const{mobile:t}=e,n=Kc(e,["mobile"]);return G.createElement("div",{className:"relative"},G.createElement("input",Object.assign({},n,{style:t?{}:{paddingTop:7,paddingBottom:7},className:`w5 f6 ba b--black-10 input-reset bg-white outline-0 ${t?"w-100 pa2 br2 pl4":"search mr1 mr2-m mr3-l pl4 pr3 br2 fw6"}`,key:1})),G.createElement(Fu,{className:"absolute left-0 w1 h1 pa2 ml1 black-30 pen",style:{strokeWidth:1}}))},Rd=Rc(class extends G.PureComponent{constructor(e){if(super(e),qc(this,"controller",null),qc(this,"renderSuggestion",(e,{query:t,isHighlighted:n})=>e===Od?G.createElement(Vc,{to:`/search?query=${encodeURIComponent(this.state.value)}`,className:`db pa2 f6 hover-bg-near-white pointer black-50 hover-blue no-underline ${n?"bg-near-white blue":""}`},"Search for ",t,""):G.createElement("div",null,G.createElement("div",{className:"mh2 bb b--black-10"}),G.createElement(Vc,{to:`/@${e.team?e.team.login:e.creator.login}/${e.slug}`,className:`db no-underline pv1 ph2 hover-bg-near-white pointer black hover-blue ${n?"bg-near-white blue":""}`},G.createElement("div",{className:"flex items-center pv1 f6 fw4 truncate"},G.createElement("span",null,gh(e.title||"Untitled",t)),e.fork_of&&G.createElement(Hu,{style:{marginBottom:"-0.05rem",width:".8rem",height:".8rem",strokeWidth:1},className:"ml1 black-30"})),G.createElement("div",{className:"pb1 f7 fw4 black-30"},G.createElement(Ld,{notebook:e}))))),qc(this,"onSuggestionsClearRequested",()=>{this.controller&&(this.controller.abort(),this.controller=null),this.setState({suggestions:[Od]})}),qc(this,"onChange",(e,{newValue:t})=>{this.setState({value:t})}),qc(this,"getSuggestionValue",()=>this.state.value),qc(this,"onSuggestionSelected",(e,{suggestion:t,method:n})=>{"click"!==n&&(this.onSuggestionsClearRequested(),this.props.history.push(t===Od?`/search?query=${encodeURIComponent(this.state.value)}`:`/@${t.team?t.team.login:t.creator.login}/${t.slug}`))}),qc(this,"onSuggestionsFetchRequested",Ad(({value:e})=>{const{api:t}=this.props;this.controller&&this.controller.abort(),this.controller="AbortController"in window?new window.AbortController:{abort(){}},t.init({signal:this.controller.signal}).documentSearch(e,0,10).then(e=>{this.controller=null,this.setState({suggestions:[Od].concat(e)})},()=>{})},250)),this.state={suggestions:[Od],value:""},"/search"===e.match.path){const{query:t}=lu(e.location.search);this.state.value=t||""}}componentWillUnmount(){this.controller&&(this.controller.abort(),this.controller=null)}render(){const{mobile:e}=this.props;let{suggestions:t,value:n}=this.state;const r={required:!0,title:"Search",placeholder:"Search",mobile:e,maxLength:256,autoFocus:e,value:n,onChange:this.onChange};return G.createElement(rd,{suggestions:t,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,renderSuggestionsContainer:Md,renderInputComponent:Id,inputProps:r,highlightFirstSuggestion:!0,theme:{container:e?"relative flex-auto":"dib relative",suggestionsContainer:"dn absolute z-max",suggestionsContainerOpen:"db",suggestionsList:"list ma0 pa0"}})}}),Dd="db flex items-center justify-between ph2 pb1 f6 lh-copy no-underline black-70 hover-blue pointer",Fd=({team:e})=>G.createElement(G.Fragment,null,e.name||e.login,G.createElement(ah,{user:e,s:16,className:"mr1 br-100"}));class jd extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{open:!1}),qc(this,"toggle",e=>{e.stopPropagation(),this.setState(({open:e})=>({open:!e}))}),qc(this,"close",e=>{e.stopPropagation(),this.setState({open:!1})}),qc(this,"popoverProps",{onClickOutside:this.close,extraStyle:{right:16,top:30}})}get soloButtonClasses(){const{highlight:e,inList:t}=this.props;return t?"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer":`no-underline pointer inline-flex fw6 mr3-ns mr2 ${e?"white bg-blue hover-bg-dark-blue":"black-70 hover-black bg-light-gray hover-bg-moon-gray"} br2 pa2 bn f6`}}class Hd extends jd{constructor(...e){super(...e),qc(this,"renderTeam",e=>G.createElement("a",{key:e.id,onClick:()=>this.props.fork({team:e.id}),className:Dd},G.createElement(Fd,{team:e})))}render(){const{open:e}=this.state,{fork:t,user:n,inList:r}=this.props,i=n&&G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Fork notebook for"),G.createElement("div",{className:"pv2"},G.createElement("a",{onClick:t,className:Dd},G.createElement(Fd,{team:n})),n.teams.map(this.renderTeam)));return n&&n.teams&&n.teams.length?G.createElement("div",{className:"relative"},r?G.createElement("a",{onClick:this.toggle,className:this.soloButtonClasses},G.createElement(Hu,{className:"w1 h1 mr1-ns"}),"Fork"):G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:`${this.soloButtonClasses} mr3-ns mr2 br2 bn`,onClick:this.toggle},G.createElement(Hu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"Fork")," "),e&&!r&&G.createElement(ph,this.popoverProps,i)),e&&r&&G.createElement("div",{className:"ph2 mv1 bg-near-white"},i)):G.createElement("a",{onClick:t,className:this.soloButtonClasses},G.createElement(Hu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"Fork"))}}class Ud extends jd{render(){const{open:e}=this.state,{transfer:t,user:n,owner:r}=this.props;return n&&n.teams&&n.teams.length?G.createElement("div",{className:"relative"},G.createElement("a",{onClick:this.toggle,className:this.soloButtonClasses},G.createElement(Nu,{className:"w1 h1 mr1-ns"}),"Transfer"),e&&G.createElement("div",{className:"ph2 mv1 bg-near-white"},G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Transfer notebook to"),G.createElement("div",{className:"pv2"},n.id!==r.id&&G.createElement("a",{onClick:()=>t(n.id),className:Dd},G.createElement(Fd,{team:n})),n.teams.filter(e=>e.id!==r.id).map(e=>G.createElement("a",{key:e.id,onClick:()=>t(e.id),className:Dd},G.createElement(Fd,{team:e})))))):null}}class $d extends jd{constructor(...e){super(...e),qc(this,"renderTeam",e=>G.createElement(Vc,{key:e.id,to:`/team/@${e.login}/new`,className:Dd,onClick:this.close},G.createElement(Fd,{team:e})))}render(){const{open:e}=this.state,{user:t}=this.props,n=t&&G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"New notebook for"),G.createElement("div",{className:"pv2"},G.createElement(Vc,{to:"/new",className:Dd,onClick:this.close},G.createElement(Fd,{team:t})),t.teams.map(this.renderTeam)));return t&&t.teams&&t.teams.length?G.createElement("div",{className:"relative"},G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:`${this.soloButtonClasses} mr3-ns mr2  br2 bn`,onClick:this.toggle},G.createElement(mu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"New")),e&&G.createElement(ph,this.popoverProps,n))):G.createElement(Vc,{to:"/new",className:this.soloButtonClasses},G.createElement(mu,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn db-ns"},"New"))}}const Vd=Rc(class extends G.Component{constructor(...e){super(...e),qc(this,"state",{mobileSearch:!1}),qc(this,"toggleSearch",()=>{this.setState(({mobileSearch:e})=>({mobileSearch:!e}))}),qc(this,"toggle",()=>{this.setState(({open:e})=>({open:!e}))}),qc(this,"dismissOnboarding",()=>{const{history:e,location:{path:t},onDismissHint:n}=this.props;n?n():e.replace(t,{})})}componentWillReceiveProps(e){e.location.pathname!==this.props.location.pathname&&this.setState({mobileSearch:!1})}render(){const{contextUI:e,gray:t,seamless:n,location:{pathname:r,state:i},forceMobile:o,user:a,showLogin:s,stickyHeader:l,hintVisible:c}=this.props,u=Kc(this.props,["contextUI","children","footerContent"]);return this.state.mobileSearch?G.createElement("div",{className:`z-3 bg-white ${n?"bb b--white":t?"shadow-1":"bb b--black-05"} ${l?"sticky":"relative"}`},G.createElement("div",{className:`${ih} flex justify-between pv2 items-center`},G.createElement(Rd,Object.assign({},u,{mobile:!0})),G.createElement("button",{onClick:this.toggleSearch,className:"inline-flex pa1 mr3-ns mr2 fw6 black-50 bg-transparent bn"},G.createElement(wu,{className:"w1 h1 v-top ml2"})))):G.createElement(Uh,{query:{maxWidth:640},defaultMatches:!1},h=>{const d=h||o;return G.createElement("div",{className:`z-3 bg-white top-0 ${n?"bb b--white":t?"shadow-1":"bb b--black-05"} ${l?"sticky":"relative"}`},G.createElement("div",{className:`${ih} flex justify-between pv2 items-center`},G.createElement("div",{className:"inline-flex items-center"},G.createElement(Vc,{to:"/",style:{lineHeight:0},className:"flex items-center ph2-ns pv2 mr3 mr2-ns no-underline"},G.createElement(Ku,{className:"black",style:{height:d?18:24,width:d?18:24}}),G.createElement(Uh,{query:{maxWidth:320},defaultMatches:!1},e=>!e&&G.createElement("span",{className:"ml2 f3-ns f4 fw7 black"},"Observable"))),d?G.createElement("button",{onClick:this.toggleSearch,style:{borderWidth:1},className:"inline-flex pa2 mr3-ns mr2 fw6 black-50 bg-transparent b--black-10 br2"},G.createElement(Fu,{className:"w1 h1 v-top mr1-ns"})):G.createElement(Rd,u)),G.createElement("div",{className:"flex items-center"},e&&G.cloneElement(e,{showLogin:s}),a?G.createElement($d,{user:a}):"/playground"!==r&&!d&&G.createElement(zc,{to:"/playground",activeClassName:"bg-white",activeStyle:{color:"black"},exact:!0,className:"pa2 mr3 f6 fw6 tc no-underline blue hover-dark-blue"},G.createElement(Uu,{className:"dib w1 h1 v-top mr1-ns"}),G.createElement("span",{className:"dn di-ns"},"Playground")),a?G.createElement($h,u):null===a?G.createElement("a",{onClick:s,href:s?null:"/login",className:"ph3-ns ph2 pv2 f6 fw6 no-underline white bg-green hover-bg-dark-green br2 bn pointer"},"Sign in"):G.createElement("div",{className:"w3"}))),(i&&i.signup||c&&!d)&&G.createElement("div",{className:`mt2 ${t?"":"bt b--black-05"} ${n?"":"bg-washed-yellow"}`},G.createElement("div",{className:`${ih} ${n?"bg-washed-yellow br2":""} pv2 items-center`},G.createElement("div",{className:"flex justify-between ph2-ns pv1"},G.createElement("span",null,c?G.createElement(G.Fragment,null," Welcome. This is live code! Click the left margin to view or edit."):G.createElement(G.Fragment,null," Thanks for signing up!"," ",G.createElement(Vc,{className:"no-underline blue hover-dark-blue",to:"/@observablehq/tutorial-1-lunch-calculator"},"Start writing with our tutorials."))),G.createElement("button",{onClick:this.dismissOnboarding,className:"inline-flex pa0 black-50 hover-black bg-transparent bn pointer"},G.createElement(wu,{className:"w1 h1"}))))))})}});class Wd extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{helpPopover:!1}),qc(this,"toggleHelpPopover",e=>{e.stopPropagation(),this.setState(({helpPopover:e})=>({helpPopover:!e}))}),qc(this,"closeHelpPopover",e=>{e&&e.stopPropagation(),this.setState({helpPopover:!1})})}render(){const{keyboardShortcuts:e,showKeyboardShortcuts:t,user:n}=this.props,{helpPopover:r}=this.state;return G.createElement("div",{className:"fixed right-1 z-2",style:{bottom:"1rem"}},G.createElement("div",{title:"Help",onClick:this.toggleHelpPopover,className:`inline-flex items-center justify-center bg-white ba b--black-20 ${r?"":"pointer hover-b--black-50"}`,style:{width:36,height:36,borderRadius:18}},"?"),r&&G.createElement(ph,{extraStyle:{bottom:"3rem",width:"auto",right:5},top:!0,onClickOutside:this.closeHelpPopover},G.createElement(Bd,{user:n,onClose:this.closeHelpPopover,keyboardShortcuts:e,showKeyboardShortcuts:t})))}}function Bd({onClose:e,showKeyboardShortcuts:t,user:n,keyboardShortcuts:r}){return G.createElement("div",{className:"pv2 f6 nowrap"},G.createElement(Vc,{to:"/@mbostock/five-minute-introduction",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Introduction"),G.createElement(Vc,{to:"/collection/@observablehq/tutorial",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Tutorials"),r&&G.createElement("div",{onClick:()=>{e(),t()},className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Keyboard shortcuts"),G.createElement("a",{href:"https://talk.observablehq.com/",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Forum"),n&&G.createElement("a",{href:`https://docs.google.com/forms/d/e/1FAIpQLScqO-VmXjQoIvqmULTCPN5spzjCR3tcefBv9o4rWZ3sikXiFA/viewform?entry.148008288=${n.login}`,rel:"noopener noreferrer",target:"_blank",className:"flex items-center pa2 no-underline black-70 hover-black hover-bg-near-white pointer"},"Feedback & bugs"))}class zd extends G.Component{constructor(...e){super(...e),qc(this,"state",{helpPopover:!1}),qc(this,"toggleHelpPopover",()=>{this.setState(({helpPopover:e})=>({helpPopover:!e}))}),qc(this,"closeHelpPopover",()=>{this.setState({helpPopover:!1})})}render(){const{helpPopover:e}=this.state,{grayFooter:t,footerContent:n,isNotebook:r,user:i}=this.props;return G.createElement("div",{key:4,className:t?"bg-near-white bt b--black-10":""},G.createElement("div",{className:`${ih} pt4 pb4`},n,G.createElement("div",{className:"flex flex-row flex-wrap justify-between pt4 f6 fw4 lh-copy black-50"},G.createElement("div",null," 2018"," ",G.createElement("span",{className:"mr2-ns nowrap"},"Observable, Inc.")," ",G.createElement("div",{className:"dib-ns nowrap"},G.createElement("a",{href:"/terms-of-service",className:"mh2-ns mr1 blue hover-dark-blue link"},"Terms")," ",G.createElement(Vc,{to:"/open-source",className:"mh2-ns mr1 blue hover-dark-blue link"},"Open Source"))),!r&&G.createElement("div",{className:"flex items-center pt3 pt0-ns"},G.createElement("a",{href:"https://twitter.com/observablehq",className:"inline-flex black-50 hover-blue",title:"Follow us on Twitter"},G.createElement("svg",{viewBox:"0 0 24 24",className:"w1 h1 pr2 mr2"},G.createElement("path",{fill:"currentColor",d:"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611\n1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717\n0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666\n1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693\n4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377\n4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209\n7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"}))),G.createElement("div",{onClick:this.toggleHelpPopover,className:"relative mh2-ns mr1 fw5 blue hover-dark-blue pointer"},"Help",e&&G.createElement(ph,{top:!0,onClickOutside:this.closeHelpPopover},G.createElement(Bd,{user:i})))))))}}function qd(e){const{children:t,gray:n,user:r,nofooter:i,footerContent:o,grayFooter:a,isNotebook:s}=e;return G.createElement("div",{className:"flex flex-column min-vh-100"},G.createElement(Vd,e),G.createElement(rl,null,G.createElement("body",{className:`relative sans-serif ${n?"bg-near-white":""}`})),G.createElement("div",{className:`${s?oh:ih} mt4`,style:{flex:1}},t),i||G.createElement(zd,{user:r,grayFooter:a,footerContent:o,isNotebook:s}))}let Gd=({title:e,to:t,user:n,showMore:r,wrapperClass:i="mt5"})=>G.createElement("div",{className:`flex justify-between mb3 ${i}`},G.createElement(Vc,{to:t,className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},n&&G.createElement(ah,{user:n,s:28,className:"mr2 br-100"}),e,G.createElement(Eu,{className:"w1 h1 ml1 child",style:{strokeWidth:1}})),r&&G.createElement(Vc,{to:t,className:"db ph2 pv1 no-underline blue hover-dark-blue hover-bg-white br2"},"Show more"));class Kd extends G.Component{constructor(e){super(e),qc(this,"state",{publishes:new Array(3).fill(void 0),notebooks:new Array(9).fill(void 0),collections:new Array(6).fill(void 0),teamNotebookGroups:[]}),qc(this,"reload",()=>{const{api:e}=this.props;this.load(Gc({},this.props,{api:e.init({cache:"no-cache"})}))}),qc(this,"showSignUp",()=>{this.props.showLogin({loginReason:"signup"})}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}load({api:e,user:t}){t&&(e.documentsLoadUser().then(e=>this.setState({notebooks:e.map(e=>Gc({creator:t},e))})),t.teams&&t.teams.forEach(t=>{e.documentsLoadTeam(t.id).then(e=>{e.length&&this.setState({teamNotebookGroups:this.state.teamNotebookGroups.concat({team:t,notebooks:e.map(e=>Gc({team:t},e))})})})})),e.documentsLoadPublic().then(e=>this.setState({publishes:e})),Promise.all([e.userLoad("observablehq"),e.collectionsLoadUserPinned("observablehq")]).then(([e,t])=>this.setState({collections:t.map(t=>Gc({},t,{owner:e}))}))}render(){const{publishes:e,notebooks:t,collections:n,teamNotebookGroups:r}=this.state,{api:i,user:o}=this.props;return G.createElement(qd,Object.assign({},this.props,{gray:!0,seamless:!o}),G.createElement(rl,null,G.createElement("meta",{name:"description",content:"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."})),!o&&G.createElement("div",{className:"pv5 nt4 black bg-white bb b--black-10 w--full"},G.createElement("div",{className:ih},G.createElement("div",{className:"mb3 f1-ns f2 fw6 lh-title"},"Observable is a",G.createElement("div",null,G.createElement("span",{className:"green"},"better")," way to code.")),G.createElement("div",{className:"measure f4-ns f5 fw4 lh-copy"},"Discover insights faster and communicate more effectively with interactive notebooks for data analysis, visualization, and exploration."),G.createElement("div",{className:"flex-ns mt4"},G.createElement("a",{onClick:this.showSignUp,className:"flex inline-flex-ns justify-center ph3-ns pa2 fw6 no-underline white bg-green hover-bg-dark-green br2 shadow-2-hover hover-rise z-1 pointer"},"Sign up for free"),G.createElement(Vc,{to:"/playground",className:"flex inline-flex-ns items-center justify-center ph3-ns pa2 mt3 mt0-ns ml3-ns fw6 no-underline white bg-blue hover-bg-dark-blue br2 shadow-2-hover hover-rise z-1"},G.createElement(Uu,{className:"w1 h1 mr1"}),"Try the playground")),G.createElement("div",{className:"mt5 f5 fw4 lh-copy dg-ns grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},G.createElement("div",{className:"mb3 mb0-ns"},G.createElement("div",{className:"mb1 fw7"},"Reactive programming"),G.createElement("div",{className:"black-70"},"JavaScript, simplified. Asynchronous state changes are handled at the language level.")),G.createElement("div",{className:"mb3 mb0-ns"},G.createElement("div",{className:"mb1 fw7"},"Community"),G.createElement("div",{className:"black-70"},"Fork, import, share, and learn with a community of artists, scientists, and software engineers.")),G.createElement("div",null,G.createElement("div",{className:"mb1 fw7"},"Web platform"),G.createElement("div",{className:"black-70"},"The power of the webs graphics and computation capabilities, and the largest developer community."))))),G.createElement(Gd,{title:"Featured collections",to:"/@observablehq?tab=collections",wrapperClass:o?"mt4":"mt5"}),G.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},n.slice(0,6).map((e,t)=>G.createElement(sh,{key:e?e.id:t,api:i,collection:e}))),n.length>6&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:"/collections/featured",className:"ph3 pv2 blue hover-dark-blue bg-white br2 link"},"Show more")),G.createElement(Gd,{title:"Recently published",to:"/recent",showMore:e.length>6}),G.createElement("div",{className:"listing-grid"},e.slice(0,6).map((e,t)=>G.createElement(xh,{key:e?e.id:t,api:i,reload:this.reload,user:o,notebook:e}))),o&&G.createElement(Gd,{title:"Your notebooks",to:`/@${o.login}`,user:o,showMore:t.length>6}),o&&0===t.length&&G.createElement("div",{className:"flex justify-center pv4"},G.createElement("div",null,G.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},"You dont have any notebooks."),G.createElement(Vc,{to:"/new",className:"flex dib items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},G.createElement(mu,{className:"dib w1 h1 mr2 v-bottom",style:{strokeWidth:1}}),G.createElement("div",null,"Create your first notebook")))),o&&t.length>0&&G.createElement("div",null,G.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>G.createElement(xh,{key:e?e.id:t,reload:this.reload,user:o,api:i,notebook:e})))),r.length>0&&r.map(({team:e,notebooks:t})=>G.createElement("div",{key:e.id},G.createElement(Gd,{to:`/@${e.login}`,user:e,title:`${e.name||e.login} notebooks`,showMore:t.length>6}),G.createElement("div",{className:"listing-grid"},t.slice(0,6).map((e,t)=>G.createElement(xh,{key:e?e.id:t,reload:this.reload,api:i,user:o,notebook:e}))))))}}function Yd(e){return G.createElement(qd,Object.assign({},e,{gray:!0}),G.createElement("div",{className:"mw6 center mt5"},G.createElement(rl,null,G.createElement("title",null,"Not found")),G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(bu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 black-70"},"Sorry, we couldnt find that page.")))}qc(Kd,"preload",({api:e})=>Promise.all([e.documentsLoadPublic(),e.userLoad("observablehq"),e.collectionsLoadUserPinned("observablehq")]).then(([e,t,n])=>({publishes:e,notebooks:[],collections:n.map(e=>Gc({},e,{owner:t})),teamNotebookGroups:[]})));class Xd extends G.Component{constructor(...e){super(...e),qc(this,"state",{online:!0})}componentDidMount(){this.setState({online:void 0===navigator.onLine||navigator.onLine})}render(){const{online:e}=this.state;return G.createElement(qd,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Error")),G.createElement("div",{className:"mw6 center mt5"},G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(bu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 lh-copy black-70"},e?"Oops, an unexpected error occurred.":"It looks like youre currently offline. Please connect to the internet to continue using Observable.")))}}const Qd=/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/,Jd={EMPTY:0,CONFLICT:1,INVALID:2,VALID:3};class Zd extends G.Component{constructor(...e){super(...e),qc(this,"state",{typedLogin:"",login:"",loginAvailable:Jd.EMPTY}),qc(this,"onLoginChange",e=>{const{target:{value:t}}=e,n=t.toLowerCase();this.setState({login:n,typedLogin:t}),this.props.onLoginChange(n),this.checkLoginAvailability()}),qc(this,"checkLoginAvailability",()=>{clearTimeout(this.loginRequestDebounce),this.loginRequestDebounce=setTimeout(this.fetchLoginAvailability,200)}),qc(this,"fetchLoginAvailability",()=>{const{login:e}=this.state,{api:t}=this.props;e?e.match(Qd)?t.usersExist([e]).then(t=>{const n=new Map(t);this.loginAvailability(e,n.get(e)?Jd.CONFLICT:Jd.VALID)}):this.setState({loginAvailable:Jd.INVALID}):this.setState({loginAvailable:Jd.EMPTY})}),qc(this,"loginAvailability",(e,t)=>{const{login:n}=this.state;n===e&&(this.setState({loginAvailable:t}),this.props.onLoginValid(t===Jd.VALID))})}componentWillUnmount(){clearTimeout(this.loginRequestDebounce)}render(){const{typedLogin:e,loginAvailable:t}=this.state,{title:n,name:r,serverError:i}=this.props;return G.createElement("div",null,G.createElement("div",{className:"flex flex-column items-stretch mt4"},G.createElement("label",{className:"pb1 f6 fw5 black-50",htmlFor:"login"},n),G.createElement("div",{className:`flex items-stretch br2 ba ${i||t===Jd.INVALID||t===Jd.CONFLICT?"b--dark-pink":"b--black-10 hover-b--black-30"}`},G.createElement("label",{className:"pa2 pr0 black-50 br--left br2",htmlFor:"login"},"observablehq.com/@"),G.createElement("input",{id:"login",name:"login",autoComplete:"off",maxLength:"255",autoFocus:!0,className:"flex-auto pa2 pl0 black br2 br--right bn",onChange:this.onLoginChange,value:e})),G.createElement("div",{className:"h2"},"LOGIN_CONFLICT"===i||t===Jd.CONFLICT?G.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"That ",r," is already taken."):"LOGIN_INVALID"===i||t===Jd.INVALID?G.createElement("div",{className:"mt1 f7 fw5 dark-pink"},"A ",r," can only include alphanumberic characters or single hyphens, cant start or end with a hyphen, and should be less than 40 characters long."):null)))}}class ep extends G.Component{constructor(...e){super(...e),qc(this,"state",{loginValid:!1,login:void 0,serverError:void 0}),qc(this,"onLoginValid",e=>{this.setState({loginValid:e})}),qc(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),qc(this,"setLogin",async e=>{e.preventDefault();const{loginValid:t,login:n}=this.state,{api:r}=this.props;if(t)try{await r.userSetLogin(n),location.reload(!0)}catch(i){if(!i.errors)throw i;const e=i.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":this.setState({loginValid:!1,serverError:e})}}})}render(){let{loginValid:e,serverError:t}=this.state;return G.createElement(Uh,{query:{maxWidth:640}},n=>G.createElement(qd,Object.assign({},this.props,{gray:!n}),G.createElement(rl,null,G.createElement("title",null,"Choose your login")),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("form",{className:"ph4-ns",onSubmit:this.setLogin},G.createElement("div",{className:"flex-ns justify-between items-center mt0 mb2"},G.createElement("h3",{className:"ma0 f4 fw7 black"},"Choose a login")),G.createElement(Zd,Object.assign({},this.props,{title:"Your Observable URL",name:"login",serverError:t,onLoginValid:this.onLoginValid,onLoginChange:this.onLoginChange})),G.createElement("button",{className:`ph3 pv2 mt3 mw4 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn ${e?"":"o-50 pen"}`,onClick:this.setLogin},"Set login")))))}}const tp=Rc(class extends G.Component{constructor(...e){super(...e),qc(this,"state",{error:this.props.error}),qc(this,"onUnhandledRejection",e=>{this.setState({error:e.reason||e.detail})})}componentDidMount(){addEventListener("unhandledrejection",this.onUnhandledRejection)}componentWillReceiveProps({location:{pathname:e}}){!document.activeElement||this.props.location.pathname.endsWith("/new")&&e.startsWith("/d/")||document.activeElement.blur(),this.setState({error:null})}componentDidUpdate(e){this.props.location.pathname===e.location.pathname&&this.props.location.search===e.location.search||(scrollTo(0,0),ga("set","page",this.props.location.pathname),ga("send","pageview"))}componentDidCatch(e){this.setState({error:e})}componentWillUnmount(){removeEventListener("unhandledrejection",this.onUnhandledRejection)}render(){const{error:e}=this.state;return e instanceof Zc?G.createElement(Yd,nh):e instanceof Qc?G.createElement(Qu,null):e instanceof Xc?G.createElement(ep,nh):e?G.createElement(Xd,nh):G.Children.map(this.props.children,e=>G.cloneElement(e,this.props))}});class np extends G.Component{constructor(e){super(e),qc(this,"state",{notebooks:new Array(27).fill(void 0)}),qc(this,"load",({api:e,location:{search:t}}=this.props)=>{this.setState({notebooks:new Array(27).fill(void 0)});const{before:n}=lu(t);e.documentsLoadPublic(n).then(e=>this.setState({notebooks:e.map(e=>Gc({published:!0},e))}))}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}render(){const{user:e}=this.props,{notebooks:t}=this.state;return G.createElement(qd,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Recently published"),G.createElement("meta",{name:"description",content:"Recently published notebooks on Observable"})),G.createElement("div",null,G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Recently published"),G.createElement("div",{className:"listing-grid"},t.slice(0,27).map((t,n)=>G.createElement(xh,Object.assign({},this.props,{key:t?t.id:n,reload:this.load,notebook:t,user:e})))),t.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?before=${t[26].update_time}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more"))))}}qc(np,"preload",({api:e,location:{search:t}})=>{const{before:n}=lu(t);return e.documentsLoadPublic(n).then(e=>({notebooks:e.map(e=>Gc({published:!0},e))}))});class rp extends G.Component{constructor(...e){super(...e),qc(this,"state",{error:null})}async componentWillMount(){const{match:{params:{teamId:e,id:t}},api:n,history:r}=this.props;try{const{team:o}=await n.teamAcceptInvitation(e,t);r.replace(`/@${o}`)}catch(i){this.setState({error:"Sorry, this invitation could not be accepted."})}}render(){const{error:e}=this.state;return G.createElement(Uh,{query:{maxWidth:640}},t=>G.createElement(qd,Object.assign({},this.props,{gray:!t}),G.createElement(rl,null,"Accept Team Invitation"),G.createElement("div",{className:"mw6 center mt5"},e&&G.createElement("a",{href:"/",className:"dib pa2 black-50 hover-blue hover-bg-white br4 link"},G.createElement(bu,{className:"w1 h1 v-top mr1"}),"Home"),G.createElement("p",{className:"f4 fw7 lh-copy black-70"},e||"Accepting team invitation"))))}}function ip(e){let{highlight:t,secondary:n,children:r}=e,i=Kc(e,["highlight","secondary","children"]);if(t&&n)throw new Error("Buttons cannot be both secondary and highlighted");return G.createElement("button",Object.assign({className:`inline-flex justify-center ph3 pv2 f6 fw6 ${t?"white bg-blue hover-bg-dark-blue pointer":n?"black-70 bg-light-gray hover-bg-moon-gray pointer":"black-40 bg-light-gray"} br2 bn`},i),r)}const op=/\B@([\w-]{1,39})/g;class ap extends G.Component{constructor(...e){super(...e),qc(this,"state",{links:null})}componentDidMount(){const{api:e,text:t}=this.props,n=t.match(op);n&&e.usersExist(n.map(e=>e.substr(1).toLowerCase())).then(e=>this.setState({links:new Map(e)}),()=>{})}render(){const{text:e}=this.props,{links:t}=this.state;if(!t)return e;const n=[];let r,i=0;for(;null!==(r=op.exec(e));){const o=r[1],a=t.get(o.toLowerCase()),s=e.substring(i,r.index);s&&n.push(s),a&&"unavailable"!==a?n.push(G.createElement("a",{className:"no-underline black-70 hover-blue",href:`/@${o.toLowerCase()}`,key:i},"@",o)):n.push(`@${o}`),i=r.index+r[0].length}return i!==e.length&&n.push(e.substring(i,e.length)),n}}let sp=({user:e,size:t=60})=>G.createElement(Vc,{to:e?`/@${e.login}`:"#",className:"inline-flex"},G.createElement(ah,{user:e,className:"br-100 mw-none",s:t})),lp=({user:e})=>G.createElement(Vc,{className:"no-underline black hover-blue",to:e?`/@${e.login}`:"#"},e?e.name||e.login:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~ ~~~~~~")),cp=({user:e})=>G.createElement(Vc,{className:"inline-flex items-center no-underline black hover-blue",to:e?`/@${e.login}`:"#"},e?e.name||e.login:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~ ~~~~~~"),G.createElement(Nu,{className:"w1 h1 ml1",alt:"Team"}));function up({user:e,socialLinks:t}){return e&&e.github_id&&t?G.createElement("div",{onClick:async t=>{t.preventDefault();const n=window.open("about:blank","_blank"),{github_id:r}=e,{login:i}=await(await fetch(`https://api.github.com/user/${r}`)).json();n.location=`https://github.com/${i}`},title:"GitHub",className:"dib ml2 black-30 hover-blue pointer",style:{lineHeight:0}},G.createElement(Gu,{style:{width:16,height:16}})):null}function hp({socialLinks:e,user:t}){if(!t||!t.home_url||!e)return null;const{home_url:n}=t;return G.createElement("a",{title:n,href:n,rel:"noopener noreferrer",target:"_blank",className:"inline-flex items-center ml2 no-underline black-30 hover-blue",style:{lineHeight:0}},G.createElement(Tu,{className:"mr1"}),G.createElement("span",{className:"mw4 lh-copy truncate"},n.replace(/https?:\/\//,"").replace(/\/$/,"")))}let dp=({api:e,user:t})=>t?t.bio?G.createElement(ap,{api:e,text:t.bio}):null:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~ ~~~~~~~~~~~ ~~~~~~~~ ~~~~~~~~ ~~~~~~~~~~~"),pp=({currentUser:e,owner:t})=>{if(!t||!e||!e.teams.length)return null;const n=e.teams.find(e=>e.id===t.id);if(!n||!n.delinquent)return null;const r="owner"===n.role,i=G.createElement("div",{className:"dib ph2 pv1 mt1 lh-copy bg-washed-yellow br2"},G.createElement(Pu,{className:`w1 h1 v-mid mr1 dark-red ${r?"hover-blue":""}`,alt:"Warning"}),"Update billing information to avoid deactivation.");return r?G.createElement(Vc,{className:"no-underline black hover-blue",to:`/team/@${t.login}/settings/billing`},i):i};const fp=G.memo(function({api:e,currentUser:t,team:n,creator:r,socialLinks:i,status:o,time:a,updateTime:s}){const l=a&&G.createElement("span",{className:"black-50"},G.createElement("span",{className:"ml1 nowrap",title:`${a.toLocaleString()}${s?`\n${s.toLocaleString()} (updated)`:""}`}," ",(e=>`${ch(e)}, ${e.getFullYear()}`)(a)),o?G.createElement("span",{className:"ml2 f7 nowrap ttu black-30"},o):null);return n?G.createElement("div",{className:"flex measure-wide-ns items-center-ns items-top pl2-ns mw-100"},G.createElement(sp,{user:n}),G.createElement("div",{className:"w-100 pl2 pl3-ns f6"},G.createElement("div",{className:"flex items-center"},G.createElement(cp,{user:n}),l),G.createElement(pp,{currentUser:t,owner:n}),G.createElement("div",{className:"mt1 lh-copy black-50"},G.createElement(dp,{api:e,user:n})),G.createElement("div",{className:"flex items-center mt1 f6 black-50"},"By"," ",G.createElement("div",{className:"inline-flex items-center mh1"},G.createElement(sp,{user:r,size:14})," "),G.createElement(lp,{user:r})))):G.createElement("div",{className:"flex measure-wide-ns items-center-ns items-top pl2-ns mw-100"},G.createElement(sp,{user:r}),G.createElement("div",{className:"w-100 pl2 pl3-ns f6"},G.createElement("div",{className:"flex items-center"},G.createElement(lp,{user:r}),G.createElement(up,{user:r,socialLinks:i}),G.createElement(hp,{user:r,socialLinks:i}),l),G.createElement(pp,{currentUser:t,owner:r}),G.createElement("div",{className:"mt1 lh-copy black-50"},G.createElement(dp,{api:e,user:r}))))});class mp extends G.Component{constructor(...e){super(...e),qc(this,"state",{isNew:void 0,collection:{}}),qc(this,"create",async e=>{e.preventDefault();const{api:t,history:n,owner:{login:r,id:i}}=this.props,{collection:{title:o,description:a,pinned:s}}=this.state,{slug:l}=await t.collectionNew({title:o,description:a,pinned:s,owner:i});n.push(`/collection/@${r}/${l}`)}),qc(this,"edit",async e=>{e.preventDefault();const{api:t,onDismiss:n,collection:{id:r}}=this.props,{collection:{title:i,description:o,pinned:a}}=this.state;await t.collectionEdit({id:r,title:i,description:o,pinned:a}),n()}),qc(this,"discardChanges",()=>{const{onDismiss:e}=this.props;e()}),qc(this,"deleteCollection",async()=>{const{api:e,history:t,collection:{id:n},owner:{login:r}}=this.props;confirm("Are you sure you want to delete this collection?\nThis operation cannot be undone.")?(await e.collectionDelete(n),t.push(`/@${r}?tab=collections`)):document.activeElement.blur()}),qc(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({collection:e})=>({collection:Gc({},e,{[t]:"checkbox"===r?i:n})}))})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.reload(e)}reload(e=this.props){if(e.collection){const{collection:{title:t,description:n,pinned:r}}=e;this.setState({collection:{title:t,description:n,pinned:r},isNew:!1})}else this.setState({collection:{title:"",description:"",pinned:!1},isNew:!0})}render(){const{onDismiss:e}=this.props,{collection:t,isNew:n}=this.state;return G.createElement("div",{className:"relative w5 pa2"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("h3",{className:"ma0 mb2 f4 fw4 black-70"},n?"Create collection":"Edit collection"),G.createElement("form",{onSubmit:n?this.create:this.edit,className:"flex flex-column flex-auto items-stretch"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Title"),G.createElement("input",{minLength:"1",maxLength:"255",name:"title",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",placeholder:"",required:!0,value:t.title,onChange:this.onChange,autoFocus:!0}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Description"),G.createElement("textarea",{className:"h4 pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",name:"description",maxLength:"255",style:{resize:"none"},value:t.description,onChange:this.onChange}),G.createElement("div",{className:"pt3"},G.createElement(ip,{highlight:!0},n?"Create collection":"Save changes"),n?null:G.createElement("button",{type:"button",className:"ph3 pa2 ml2 f6 no-underline dark-red hover-dark-red bg-transparent hover-bg-washed-red br2 pointer bn",onClick:this.deleteCollection},G.createElement(Mu,{className:"w1 h1 v-mid mr2"}),"Delete"))))}}function gp({user:e}){return G.createElement("div",{className:"flex items-center f6 black-50"},G.createElement("span",{className:"mr1"},"By"),G.createElement(ah,{user:e,s:16,className:"mr1 br-100"}),G.createElement(lp,{user:e}))}class vp extends G.Component{constructor(e){super(e),qc(this,"state",{collectionModal:!1,pinnedFlash:!1,collection:void 0,notebooks:new Array(27).fill(void 0)}),qc(this,"changePin",async e=>{const t=!!e.target.checked,{api:n}=this.props,{collection:{id:r,title:i,description:o}}=this.state;await n.collectionEdit({id:r,title:i,description:o,pinned:t}),this.setState(({collection:e})=>({collection:Gc({},e,{pinned:t}),pinnedFlash:setTimeout(()=>this.setState({pinnedFlash:void 0}),1e3)}))}),qc(this,"reload",()=>{const{api:e,match:{params:{userLogin:t,collectionSlug:n}},location:{search:r}}=this.props;let{before:i}=lu(r);e.init({cache:"no-cache"}).collectionLoad(t,n,{before:i}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>Gc({published:!0},e))}))}),qc(this,"onRemoveFromCollection",async e=>{const{api:t}=this.props,{collection:n}=this.state;await t.collectionRemoveDocument({id:n.id,document_id:e.id}),this.reload()}),qc(this,"isEditable",()=>{const{user:e}=this.props,{collection:t}=this.state;if(t&&e){const{owner:{id:n}}=t;return e.id===n||e.teams.some(e=>e.id===n)}}),qc(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),qc(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1}),this.reload()}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r}}){let{before:i}=lu(r);this.setState({collection:void 0,notebooks:new Array(27).fill(void 0)}),e.collectionLoad(n,t,{before:i}).then(e=>this.setState({collection:e,notebooks:e.documents.map(e=>Gc({published:!0},e))}))}render(){const{user:e,api:t}=this.props,{collection:n,notebooks:r,collectionModal:i,pinnedFlash:o}=this.state,a=n&&`${n.description} / An Observable collection by ${n.owner.name||n.owner.login}`;return G.createElement(qd,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,n&&G.createElement("title",null,n.title),n&&G.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),n&&G.createElement("meta",{property:"og:title",content:n.title||"Untitled"}),n&&G.createElement("meta",{property:"og:description",content:a}),n&&G.createElement("meta",{name:"description",content:a}),n&&n.thumbnail&&G.createElement("meta",{property:"og:image",content:`https://static.observableusercontent.com/thumbnail/${n.thumbnail}.jpg`})),G.createElement("div",null,G.createElement("div",{className:"mv4 lh-copy"},G.createElement("div",{className:"flex justify-between items-start"},G.createElement("div",null,G.createElement("div",{className:"f3 fw7 lh-title black-70"},n?n.title:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~")),G.createElement("div",{className:"measure-wide mb3 black-70"},n?n.description:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~")),G.createElement(gp,{api:t,user:n&&n.owner})),this.isEditable()&&G.createElement("div",{className:"flex items-center"},G.createElement("div",{className:"flex items-center"},G.createElement("span",{className:`ml2 f7 ttu ${o?"o-100":"o-0"} black-30 mr2`},"Saved"),G.createElement("input",{type:"checkbox",id:"pinned-checkbox",title:"Pinned collections appear on your profile page",checked:n.pinned,onChange:this.changePin}),G.createElement("label",{className:"pl1 pr3",htmlFor:"pinned-checkbox"},"Pin")),G.createElement(ip,{type:"button",onClick:this.showCollectionModal,highlight:!0},"Edit collection")))),r.length?G.createElement(G.Fragment,null,G.createElement("div",{className:"listing-grid"},r.slice(0,27).map((t,n)=>G.createElement(xh,Object.assign({},this.props,{key:t?t.id:n,notebook:t,reload:this.reload,user:e,onRemoveFromCollection:this.isEditable()&&this.onRemoveFromCollection})))),r.length>27&&r[0]&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?${cu({before:r[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more"))):this.isEditable()?G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy black-50"}," Add notebooks to this collection by clicking"," ",G.createElement(Yu,{className:"w1 h1 v-mid mh1"})," and"," ",G.createElement("span",{className:"fw5"},"Add to collection")," on a notebook page.")):G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy black-50"}," This collection is empty, so far!"))),i&&G.createElement(eh,{onDismiss:this.hideCollectionModal},G.createElement(mp,Object.assign({onDismiss:this.hideCollectionModal,collection:n,owner:n&&n.owner},this.props))))}}qc(vp,"preload",({api:e,match:{params:{collectionSlug:t,userLogin:n}},location:{search:r}})=>{const{before:i}=lu(r);return e.collectionLoad(n,t,{before:i}).then(e=>({collection:e,collectionModal:!1,pinnedFlash:!1,notebooks:e.documents.map(e=>Gc({published:!0},e))}))});class bp extends G.Component{constructor(...e){super(...e),qc(this,"state",{title:"",notebooks:new Array(27).fill(void 0)}),qc(this,"reload",()=>{this.load(this.props)})}componentDidMount(){this.load(this.props)}componentWillReceiveProps(e){this.setState({title:"",notebooks:new Array(27).fill(void 0)}),this.load(e)}load({match:{params:{userLogin:e,documentSlug:t,id:n}},location:{search:r},api:i,user:o}){const{before:a}=lu(r);(t?i.documentLoadHead(`@${e}/${t}`,a):i.documentLoad(n)).then(({title:e})=>{this.setState({title:e})});const s=o?"all":"public";(t?i.documentLoadPublicForks(`@${e}/${t}`,a,s):i.documentLoadForks(n,a,s)).then(e=>this.setState({notebooks:e}))}render(){const{match:{params:{userLogin:e,documentSlug:t,id:n}},api:r,user:i}=this.props,{notebooks:o,title:a}=this.state;return G.createElement(qd,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,`Forks of ${a||"Untitled"}`)),G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-50"},"Forks of ",G.createElement(Vc,{to:t?`/@${e}/${t}`:`/d/${n}`,className:"no-underline black-70 hover-blue"},a||"Untitled"),""),o.length>0?G.createElement("div",null,G.createElement("div",{className:"listing-grid"},o.slice(0,27).map((e,t)=>G.createElement(xh,{key:e?e.id:t,notebook:e,user:i,api:r,reload:this.reload}))),o.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?before=${o[26].update_time}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more"))):G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy black-50"},"This notebook has no forks.")))}}const yp={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},wp=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],xp=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],Ep=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],kp="undefined"!=typeof window&&void 0!==window.document?window.document:{},Sp="fullscreenEnabled"in kp&&Object.keys(yp)||wp[0]in kp&&wp||xp[0]in kp&&xp||Ep[0]in kp&&Ep||[];var Cp={requestFullscreen:e=>e[Sp[yp.requestFullscreen]](),requestFullscreenFunction:e=>e[Sp[yp.requestFullscreen]],get exitFullscreen(){return kp[Sp[yp.exitFullscreen]].bind(kp)},addEventListener:(e,t,n)=>kp.addEventListener(Sp[yp[e]],t,n),removeEventListener:(e,t,n)=>kp.removeEventListener(Sp[yp[e]],t,n),get fullscreenEnabled(){return Boolean(kp[Sp[yp.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return kp[Sp[yp.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return kp[`on${Sp[yp.fullscreenchange]}`.toLowerCase()]},set onfullscreenchange(e){return kp[`on${Sp[yp.fullscreenchange]}`.toLowerCase()]=e},get onfullscreenerror(){return kp[`on${Sp[yp.fullscreenerror]}`.toLowerCase()]},set onfullscreenerror(e){return kp[`on${Sp[yp.fullscreenerror]}`.toLowerCase()]=e}};function Tp({id:e,value:t="",pinned:n=!1}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid node id");return new _p(e,t+"",!!n)}function _p(e,t,n){Object.defineProperties(this,{id:{value:e,enumerable:!0},value:{value:t,enumerable:!0},pinned:{value:n,enumerable:!0}})}Object.defineProperties(_p,{of:{value:Tp,writable:!0,configurable:!0}});const Np="create",Pp="insert_node",Ap="modify_node",Lp="modify_title",Op="move_node",Mp="remove_node",Ip="pin_node",Rp="unpin_node",Dp="revert",Fp="noop";const jp=e=>[e[1],e[0]];function Hp(e){Object.defineProperties(this,{_node:{value:e,writable:!0}})}function Up({version:e=0,title:t="",nodes:n=[]}={}){if((e=+e)!==(0|e)||e<0)throw new Error("invalid version");n=Array.from(n,Tp);const r=new Array(e+1);for(let i=0;i<n.length;++i){const{id:t}=n[i];if(t>e)throw new Error("invalid node_id");if(t in r)throw new Error("duplicate node_id");r[t]=i}return new Wp(e,t+"",n,new Array(e+1))}function $p({version:e,type:t,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:o}){switch(t){case Lp:return{version:e,type:t,new_node_value:r};case Pp:return{version:e,type:t,node_id:n,new_node_value:r,new_next_node_id:o,new_node_pinned:i};case Mp:return{version:e,type:t,node_id:n};case Op:return{version:e,type:t,node_id:n,new_next_node_id:o};case Ap:return{version:e,type:t,node_id:n,new_node_value:r};case Ip:case Rp:return{version:e,type:t,node_id:n};case Fp:return{version:e,type:t};case Np:throw new Error("cannot redo create");case Dp:throw new Error("cannot redo revert");default:throw new Error("unknown type")}}function Vp({old_version:e,type:t,node_id:n,old_node_value:r,old_node_pinned:i,old_next_node_id:o}){switch(t){case Lp:return{version:e,type:t,new_node_value:r};case Pp:return{version:e,type:Mp,node_id:n};case Mp:return{version:e,type:Pp,node_id:n,new_node_value:r,new_node_pinned:i,new_next_node_id:o};case Op:return{version:e,type:t,node_id:n,new_next_node_id:o};case Ap:return{version:e,type:t,node_id:n,new_node_value:r};case Ip:return{version:e,type:Rp,node_id:n};case Rp:return{version:e,type:Ip,node_id:n};case Fp:return{version:e,type:t};case Np:throw new Error("cannot undo create");case Dp:throw new Error("cannot undo revert");default:throw new Error("unknown type")}}function Wp(e,t,n,r){Object.defineProperties(this,{version:{value:e,enumerable:!0},title:{value:t,enumerable:!0},nodes:{value:n,enumerable:!0},events:{value:r,enumerable:!0}})}function Bp(e){return{version:e.version,type:e.type,node_id:e.node_id,new_next_node_id:e.new_next_node_id,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,target_document_id:e.target_document_id,target_node_id:e.target_node_id}}function zp(e){try{const n=window[e];return n.getItem("test"),n}catch(t){return null}}Object.defineProperties(Hp.prototype,{[Symbol.iterator]:{value:function(){return this},writable:!0,configurable:!0},next:{value:function(){if(null==this._node)return{done:!0};const e=this._node;return this._node=this._node.next,{done:!1,value:e}},writable:!0,configurable:!0}}),Object.defineProperties(Wp,{create:{value:function({version:e,title:t="",nodes:n=[]}={}){n=Array.from(n,Tp);const r=new Set,i=[];if(void 0!==e&&((e=+e)!=(0|e)||e<0))throw new Error("invalid version");let o=-1,a=-1;(t+="")&&(i[++o]={version:o,type:Lp,old_node_value:"",new_node_value:t});for(const{id:s,value:l,pinned:c}of n){if(r.has(s))throw new Error("duplicate node_id");r.add(s),i[++o]={version:o,type:Pp,node_id:s,new_next_node_id:null,new_node_value:l,new_node_pinned:c},s>a&&(a=s)}if(void 0===e)e=Math.max(o,a)+1;else if(o>=e||e<a)throw new Error("invalid version");return i[e]={version:e,type:Np},new Wp(e,t,n,i)},writable:!0,configurable:!0},from:{value:function(e){let t="",n=-1,r=-1,i=!1;const o=new Map;let a=null,s=null;function l(e,t){const n=t?t.previous:a;t?(e.next=t,t.previous=e):a=e,n?(e.previous=n,n.next=e):s=e}function c(e){const t=e.next,n=e.previous;t?(t.previous=n,e.next=null):a=n,n?(n.next=t,e.previous=null):s=t}for(const u of e){let e=+u.version;if(e!==(0|e)||!(e>=n))throw new Error("invalid version");switch(n=e,u.type){case Np:if(i)throw new Error("duplicate create");if(r>n)throw new Error("invalid node_id");i=!0;break;case Lp:t=u.new_node_value;break;case Pp:{let e=n;if(void 0!==u.node_id){if((e=+u.node_id)!=(0|e)||e<0||i&&e>n)throw new Error("invalid node_id");if(o.has(e))throw new Error("duplicate node_id")}let t=null;if(null!=u.new_next_node_id&&void 0===(t=o.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");r=Math.max(e,r);const a={id:e,value:u.new_node_value,pinned:u.new_node_pinned,next:null,previous:null};l(a,t),o.set(e,a);break}case Ap:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.value=u.new_node_value;break}case Op:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");let t=null;if(null!=u.new_next_node_id&&void 0===(t=o.get(+u.new_next_node_id)))throw new Error("invalid new_next_node_id");e.next!==t&&e!==t&&(c(e),l(e,t));break}case Mp:{const e=+u.node_id,t=o.get(e);if(void 0===t)throw new Error("invalid node_id");c(t),o.delete(e);break}case Ip:case Rp:{const e=o.get(+u.node_id);if(void 0===e)throw new Error("invalid node_id");e.pinned=u.type===Ip;break}case Fp:break;default:throw new Error("unknown type")}}if(!i)throw new Error("expected create");return Up({version:n,title:t,nodes:new Hp(s)})},writable:!0,configurable:!0},of:{value:Up,writable:!0,configurable:!0},Node:{value:_p,writable:!0,configurable:!0}}),Object.defineProperties(Wp.prototype,{apply:{value:function(e,t=function(){}){let n=this.version,r=this.title,i=this.nodes,o=this.events;for(const a of e){const e=n;switch(n=o.length,o===this.events&&(o=o.slice()),a.type){case Lp:{const i=void 0===a.new_node_value?"":a.new_node_value+"";if(r===i)break;t(o[o.length]={version:n,old_version:e,type:Lp,old_node_value:r,new_node_value:i}),r=i;continue}case Pp:{let r=n;if(void 0!==a.node_id){if((r=+a.node_id)!=(0|r)||r<0||r>n)throw new Error("invalid node_id");if(i.findIndex(e=>e.id===r)>=0)throw new Error("duplicate node_id")}let s=i.length,l=null;if(null!=a.new_next_node_id&&(l=+a.new_next_node_id,(s=i.findIndex(e=>e.id===l))<0))throw new Error("invalid new_next_node_id");const c=void 0===a.new_node_value?"":a.new_node_value+"",u=!!a.new_node_pinned;i===this.nodes&&(i=i.slice()),i.splice(s,0,new _p(r,c,u)),t(o[o.length]={version:n,old_version:e,type:Pp,node_id:r,new_next_node_id:l,new_node_value:c,new_node_pinned:u});continue}case Ap:{const r=+a.node_id,s=i.findIndex(e=>e.id===r);if(s<0)throw new Error("invalid node_id");const l=void 0===a.new_node_value?"":a.new_node_value+"",c=i[s].value;if(c===l)break;i===this.nodes&&(i=i.slice()),i[s]=new _p(r,l,i[s].pinned),t(o[o.length]={version:n,old_version:e,type:Ap,node_id:r,old_node_value:c,new_node_value:l});continue}case Op:{const r=+a.node_id,s=i.findIndex(e=>e.id===r);if(s<0)throw new Error("invalid node_id");const l=i[s];let c=i.length,u=null;if(null!=a.new_next_node_id&&(u=+a.new_next_node_id,(c=i.findIndex(e=>e.id===u))<0))throw new Error("invalid new_next_node_id");const h=s<i.length-1?i[s+1].id:null;if(s===c&&(u=h),h===u)break;i===this.nodes&&(i=i.slice()),i.splice(s,1),i.splice(c-(s<c),0,l),t(o[o.length]={version:n,old_version:e,type:Op,node_id:r,old_next_node_id:h,new_next_node_id:u});continue}case Mp:{const r=+a.node_id,s=i.findIndex(e=>e.id===r);if(s<0)throw new Error("invalid node_id");const l=s<i.length-1?i[s+1].id:null,c=i[s];i===this.nodes&&(i=i.slice()),i.splice(s,1),t(o[o.length]={version:n,old_version:e,type:Mp,node_id:r,old_next_node_id:l,old_node_value:c.value,old_node_pinned:c.pinned});continue}case Ip:case Rp:{const r=+a.node_id,s=i.findIndex(e=>e.id===r);if(s<0)throw new Error("invalid node_id");const l=a.type===Ip;if(i[s].pinned===l)break;i===this.nodes&&(i=i.slice()),i[s]=new _p(r,i[s].value,l),t(o[o.length]={version:n,old_version:e,type:a.type,node_id:r});continue}case Dp:{if((n=+a.node_id)>e)throw new Error("cannot undo revert");const s=new Wp(e,r,i,o);({version:n,title:r,nodes:i}=s.reset(n,t)),o[o.length]={version:o.length,old_version:e,type:Dp,node_id:n};continue}case Fp:break;case Np:throw new Error("cannot apply create");default:throw new Error("unknown type")}t(o[o.length]={version:n,old_version:e,type:Fp})}return o===this.events?this:new Wp(n,r,i,o)},writable:!0,configurable:!0},diff:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(e.nodes.map(e=>[e.id,e])),i=new Map(t),o=new Map(t.map(jp)),a=new Set,s=[];for(const[c,u]of e.nodes.entries()){const{id:e}=u,t=o.get(e),r=n.get(t);r?r.value===u.value?s.push({type:Fp,base:r,target:u}):s.push({type:Ap,base:r,target:u}):null!=t?s.push({type:Mp,target:u}):(s.push({type:Pp,target:u}),a.add(c))}let l=0;for(const[c,u]of this.nodes.entries()){const{id:e}=u,t=i.get(e),n=r.get(t);for(;a.has(c+l);)l++;n||(null!=t?s.splice(c+l,0,{type:Mp,base:u}):s.splice(c+l,0,{type:Pp,base:u}))}return s},writable:!0,configurable:!0},merge:{value:function(e,t){let n,r;if(Array.isArray(e)||(e=Array.from(e)),t&&(t=function(e){return function(t){e($p(t))}}(t)),0===e.length)return this;const i=+e[0].version,o=e.length,a=this.version-i+1,s=Math.min(o,a),l=this.reset(i-1,t).apply(e,t);for(e=l.events.slice(i),n=0;n<s;++n){const t=e[n],r=this.events[t.version];if(t.type===Pp&&t.node_id===t.version||t.type!==r.type||t.node_id!==r.node_id||t.new_node_value!==r.new_node_value||t.new_node_pinned!==r.new_node_pinned||t.new_next_node_id!==r.new_next_node_id)break}if(n===o)return this;if(n===a)return l;const c=new Set,u=new Map;for(r=0;r<o-n;++r){const t=e[r];switch(t.type){case Pp:t.node_id<i&&c.add(t.node_id),u.delete(t.node_id);break;case Mp:c.delete(t.node_id),u.set(t.node_id,t.old_next_node_id)}}const h=new Map,d=[];for(r=i+n;r<=this.version;++r){const e=this.events[r];switch(e.type){case Lp:d.push({type:Lp,new_node_value:e.new_node_value});break;case Pp:{let t=e.node_id;h.has(t)?t=h.get(t):(t>=i||c.has(t))&&h.set(t,t=l.version+d.length+1);let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);u.delete(t),d.push({type:Pp,node_id:t,new_node_value:e.new_node_value,new_node_pinned:e.new_node_pinned,new_next_node_id:n});break}case Ap:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;d.push({type:Ap,node_id:t,new_node_value:e.new_node_value});break}case Op:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;let n=e.new_next_node_id;if(h.has(n))n=h.get(n);else for(;u.has(n);)n=u.get(n);d.push({type:Op,node_id:t,new_next_node_id:n});break}case Mp:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;c.delete(t),d.push({type:Mp,node_id:t});break}case Ip:case Rp:{let t=e.node_id;if(h.has(t))t=h.get(t);else if(u.has(t))break;d.push({type:e.type,node_id:t});break}case Fp:break;default:throw new Error("unknown type")}}return l.apply(d,t)},writable:!0,configurable:!0},patch:{value:function(e,t=[]){const n=new Map(this.nodes.map(e=>[e.id,e])),r=new Map(this.nodes.slice(0,-1).map((e,t)=>[e.id,this.nodes[t+1].id])),i=new Map(this.nodes.slice(1).map((e,t)=>[e.id,this.nodes[t].id])),o=new Map(t),a=new Map(t.map(jp));let s=this.nodes[this.nodes.length-1].id;const l=new Set(e.nodes.map(e=>e.id)),c=[],u=[];let h=this.events.length-1;this.title!==e.title&&c.push({type:Lp,new_node_value:e.title,version:++h});for(let d=e.nodes.length-1;d>=0;--d){const t=e.nodes[d],l=e.nodes[d+1]&&a.get(e.nodes[d+1].id),{id:p}=t;let f=a.get(p);const m=n.get(f);if(m){m.value!==t.value&&c.push({type:Ap,node_id:f,new_node_value:t.value,version:++h}),m.pinned!==t.pinned&&c.push({type:t.pinned?Ip:Rp,node_id:f,version:++h});const e=r.get(f);if(e!=l){c.push({type:Op,node_id:f,new_next_node_id:null==l?null:l,version:++h});const t=i.get(f),n=null!=l?i.get(l):s;null!=t&&r.set(t,e),null!=e&&i.set(e,t),r.set(f,l),i.set(f,n),null!=n&&r.set(n,f),null!=l?i.set(l,f):s=f}}else{const e=++h;null==f&&(f=e,a.set(p,f),o.set(f,p),u.push([f,p])),c.push({type:Pp,node_id:f,new_node_value:t.value,new_node_pinned:t.pinned,new_next_node_id:null!=l?l:null,version:e});const n=null!=l?i.get(l):s;null!=n&&r.set(n,f),null!=l?i.set(l,f):s=f,r.set(f,l),i.set(f,n)}}for(const{id:d}of this.nodes)l.has(o.get(d))||c.push({type:Mp,node_id:d,version:++h});return{events:c,mapping:u}},writable:!0,configurable:!0},reset:{value:function(e,t){if((e=+e)<0||e>=this.events.length||e!==(0|e))throw new Error("invalid version");if(e===this.events.length-1)return this;const n=Array.from(function*(e,t,n){for(;n<t;){const r=Vp(e[t--]);if(yield r,r.version===n)return}for(;t<n;){const r=$p(e[++t]);if(yield r,r.version===n)return}}(this.events,this.version,e));if(!n.length)return this;t&&n.forEach(t);const{title:r,nodes:i}=this.apply(n);return new Wp(e=n[n.length-1].version,r,i,this.events.slice(0,e+1))},writable:!0,configurable:!0}});const qp=zp("localStorage"),Gp=zp("sessionStorage"),Kp=Symbol("closed"),Yp=Symbol("opening"),Xp=Symbol("greeting"),Qp=Symbol("idle"),Jp=Symbol("flushing"),Zp=Symbol("saving"),ef=Symbol("reopening"),tf=3e4,nf=250,rf=50,of=1e3;class af extends G.Component{constructor(...e){super(...e),qc(this,"flushDelay",rf),qc(this,"flushTimer",null),qc(this,"stashTimer",null),qc(this,"pingInterval",null),qc(this,"reopenDelay",nf),qc(this,"saveVersion",null),qc(this,"stashVersion",null),qc(this,"socket",null),qc(this,"clientState",Kp),qc(this,"close",()=>{this.clientState!==Kp&&(this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.stashTimer&&(clearTimeout(this.stashTimer),this.stashTimer=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.close(),this.socket=null,this.clientState=Kp)}),qc(this,"abort",e=>{const{onError:t}=this.props;this.close(),t(e)}),qc(this,"reopen",()=>{if(this.clientState!==ef)throw new Error("unexpected state");const{id:e,editable:t}=this.props;this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.socket=new WebSocket(`wss://ws.observablehq.com/document/${e}${t?"/edit":"/comments"}`),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.clientState=Yp}),qc(this,"onOpen",()=>{if(this.clientState!==Yp)throw new Error("unexpected state");const{token:e}=this.props;this.clientState=Xp,this.send({type:"hello",token:e,version:this.saveVersion}),this.pingInterval=setInterval(this.ping,tf)}),qc(this,"onClose",()=>{isFinite(this.reopenDelay)&&(this.reopenDelay=Math.min(6e4,this.reopenDelay*(1+Math.random()))),this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.reopenTimer&&(clearTimeout(this.reopenTimer),this.reopenTimer=null),this.reopenTimer=setTimeout(this.reopen,this.reopenDelay),this.clientState=ef}),qc(this,"onMessage",e=>{const{id:t,onSave:n,onSaveConfirm:r,onPresence:i,onComments:o,onCommentConfirm:a}=this.props;switch((e=JSON.parse(e.data)).type){case"hello":if(this.clientState!==Xp)return this.abort(new Error("unexpected hello"));this.reopenDelay=Math.max(nf,this.reopenDelay/10),this.clientState=Qp,this.maybeFlush();break;case"goodbye":this.reopenDelay=1/0;break;case"error":if(this.clientState!==Zp)return this.abort(new Error("unexpected error"));this.clientState=Qp,this.maybeFlush();break;case"saveconfirm":if(this.clientState!==Zp)return this.abort(new Error("unexpected saveconfirm"));this.clientState=Qp,this.saveVersion=this.stashVersion=e.version,qp&&qp.removeItem(`notebook-${t}`),this.maybeFlush(),r(e.version);break;case"save":const s=e.events,l=s[s.length-1].version;if(!(l>this.saveVersion))return this.abort(new Error("version skew"));this.saveVersion=this.stashVersion=l,this.maybeFlush(),n(s,l);break;case"presence":i(e.participants);break;case"comments":o(e.comments);break;case"commentconfirm":a(e.id,e.nonce)}}),qc(this,"flush",()=>{const{editable:e,model:{events:t}}=this.props;if(this.clientState!==Jp)throw new Error("unexpected state");!e||this.saveVersion>=t.length-1?this.clientState=Qp:(this.flushTimer=null,this.clientState=Zp,this.send({type:"save",events:t.slice(this.saveVersion+1).map(Bp)}))}),qc(this,"stash",()=>{const{id:e,model:{events:t}}=this.props;null!=this.stashVersion&&this.stashVersion<t.length-1&&(qp&&qp.setItem(`notebook-${e}`,JSON.stringify(t.slice(this.saveVersion+1).map(Bp))),this.stashVersion=t.length-1),this.stashTimer=null}),qc(this,"ping",()=>{this.send({type:"ping"})})}componentDidMount(){if(this.clientState!==Kp)throw new Error("unexpected state");const{saveVersion:e}=this.props;this.saveVersion=this.stashVersion=e,this.clientState=ef,this.reopen()}componentDidUpdate(){this.maybeFlush()}componentWillUnmount(){this.saveVersion=null,this.stashVersion=null,this.close()}maybeFlush(){const{editable:e,model:{events:t}}=this.props;e&&(this.stashTimer||(this.stashTimer=setTimeout(this.stash,of)),this.clientState===Qp&&(this.saveVersion<t.length-1?(this.flushDelay*=Math.random()+1,this.flushTimer=setTimeout(this.flush,this.flushDelay),this.clientState=Jp):this.flushDelay=Math.max(rf,this.flushDelay/2)))}send(e){this.socket.send(JSON.stringify(e))}render(){return null}}qc(af,"defaultProps",{editable:void 0,id:void 0,model:void 0,onSave:void 0,onSaveConfirm:void 0,onPresence:void 0,onComments:void 0,onCommentConfirm:void 0,onError:void 0,token:void 0});const sf=/Mac|iPhone/.test(navigator.platform),lf={Alt:"",Tab:"",Up:"",Down:"",Cmd:"",Ctrl:"",Shift:"",Enter:"",Backspace:"",Escape:""},cf={Alt:"Option",Backspace:"Delete",Cmd:"Command",Ctrl:"Control",Enter:"Return",Escape:"Esc","/":"Slash","?":"Question mark"},uf={Ctrl:-4,Alt:-3,Shift:-2,Cmd:-1};function hf(e,t,n){const r=e.split("-");return r.slice().sort((e,t)=>(uf[e]||r.indexOf(e))-(uf[t]||r.indexOf(t))).map(e=>t[e]||e).join(n)}function df(e){return hf(e,sf?cf:{},"-")}function pf(e){return sf?hf(e,lf,""):null}function ff(e){return sf?pf(e):`(${df(e)})`}var mf=n(function(e,t){e.exports=function(){var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),y=/\bCrOS\b/.test(e),w=/win/i.test(t),x=h&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(h=!1,l=!0);var E=b&&(c||h&&(null==x||x<12.11)),k=n||a&&s>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var C,T=function(e,t){var n=e.className,r=S(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function _(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function N(e,t){return _(e).appendChild(t)}function P(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function A(e,t,n,r){var i=P(e,t,n,r);return i.setAttribute("role","presentation"),i}function L(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function O(){var e;try{e=document.activeElement}catch(wt){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function M(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!S(n[r]).test(t)&&(t+=" "+n[r]);return t}C=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(wt){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var R=function(e){e.select()};function D(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function j(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}m?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(R=function(e){try{e.select()}catch(t){}});var H=function(){this.id=null};function U(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var $=30,V={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},B={origin:"*mouse"},z={origin:"+move"};function q(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var G=[""];function K(e){for(;G.length<=e;)G.push(Y(G)+" ");return G[e]}function Y(e){return e[e.length-1]}function X(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Q(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Q.prototype=e,n=new Q),t&&F(t,n),n}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function se(e,t,r){var i=this;this.input=r,i.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=A("div",null,"CodeMirror-code"),i.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=P("div",null,"CodeMirror-cursors"),i.measure=P("div",null,"CodeMirror-measure"),i.lineMeasure=P("div",null,"CodeMirror-measure"),i.lineSpace=A("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=A("div",[i.lineSpace],"CodeMirror-lines");i.mover=P("div",[o],null,"position: relative"),i.sizer=P("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=P("div",null,null,"position: absolute; height: "+$+"px; width: 1px;"),i.gutters=P("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=P("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=P("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&s<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function ce(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ue(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function he(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function de(e){if(null==e.parent)return null;for(var t=e.parent,n=U(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function pe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a],l=s.height;if(t<l)break;t-=l}return n+a}function fe(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ge(e,t,n){if(void 0===n&&(n=null),!(this instanceof ge))return new ge(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ve(e,t){return e.line-t.line||e.ch-t.ch}function be(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function ye(e){return ge(e.line,e.ch)}function we(e,t){return ve(e,t)<0?t:e}function xe(e,t){return ve(e,t)<0?e:t}function Ee(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return ge(e.first,0);var n=e.first+e.size-1;return t.line>n?ge(n,le(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?ge(e.line,t):n<0?ge(e.line,0):e}(t,le(e,t.line).text.length)}function Se(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ke(e,t[r]);return n}var Ce=!1,Te=!1;function _e(e,t,n){this.marker=e,this.from=t,this.to=n}function Ne(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Pe(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ae(e,t){if(t.full)return null;var n=fe(e,t.from.line)&&le(e,t.from.line).markedSpans,r=fe(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ve(t.from,t.to),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new _e(a,o.from,l?null:o.to))}}return r}(n,i,a),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new _e(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,u=Y(t.text).length+(c?i:0);if(s)for(var h=0;h<s.length;++h){var d=s[h];if(null==d.to){var p=Ne(l,d.marker);p?c&&(d.to=null==p.to?null:p.to+u):d.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];if(null!=m.to&&(m.to+=u),null==m.from){var g=Ne(s,m.marker);g||(m.from=u,c&&(s||(s=[])).push(m))}else m.from+=u,c&&(s||(s=[])).push(m)}s&&(s=Le(s)),l&&l!=s&&(l=Le(l));var v=[s];if(!c){var b,y=t.text.length-2;if(y>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(b||(b=[])).push(new _e(s[w].marker,null,null));for(var x=0;x<y;++x)v.push(b);v.push(l)}return v}function Le(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Oe(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Me(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ie(e){return e.inclusiveLeft?-1:0}function Re(e){return e.inclusiveRight?1:0}function De(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ve(r.from,i.from)||Ie(e)-Ie(t);if(o)return-o;var a=ve(r.to,i.to)||Re(e)-Re(t);return a||t.id-e.id}function Fe(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||De(n,i.marker)<0)&&(n=i.marker);return n}function je(e){return Fe(e,!0)}function He(e){return Fe(e,!1)}function Ue(e,t){var n,r=Te&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||De(n,o.marker)<0)&&(n=o.marker)}return n}function $e(e,t,n,r,i){var o=le(e,t),a=Te&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=ve(c.from,n)||Ie(l.marker)-Ie(i),h=ve(c.to,r)||Re(l.marker)-Re(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.to,n)>=0:ve(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function Ve(e){for(var t;t=je(e);)e=t.find(-1,!0).line;return e}function We(e,t){var n=le(e,t),r=Ve(n);return n==r?t:de(r)}function Be(e,t){if(t>e.lastLine())return t;var n,r=le(e,t);if(!ze(e,r))return t;for(;n=He(r);)r=n.find(1,!0).line;return de(r)+1}function ze(e,t){var n=Te&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&qe(e,t,r))return!0}}function qe(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return qe(e,r.line,Ne(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&qe(e,t,i))return!0}function Ge(e){e=Ve(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function Ke(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=je(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=He(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,r=o.to.line,n+=r.text.length-o.to.ch}return n}function Ye(e){var t=e.display,n=e.doc;t.maxLine=le(n,n.first),t.maxLineLength=Ke(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ke(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Xe=null;function Qe(e,t,n){var r;Xe=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Xe=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Xe=i)}return null!=r?r:Xe}var Je=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(l,c){var u,h="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!n.test(l))return!1;for(var d=l.length,p=[],f=0;f<d;++f)p.push((u=l.charCodeAt(f))<=247?e.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?t.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var m=0,g=h;m<d;++m){var v=p[m];"m"==v?p[m]=g:g=v}for(var b=0,y=h;b<d;++b){var w=p[b];"1"==w&&"r"==y?p[b]="n":i.test(w)&&(y=w,"r"==w&&(p[b]="R"))}for(var x=1,E=p[0];x<d-1;++x){var k=p[x];"+"==k&&"1"==E&&"1"==p[x+1]?p[x]="1":","!=k||E!=p[x+1]||"1"!=E&&"n"!=E||(p[x]=E),E=k}for(var S=0;S<d;++S){var C=p[S];if(","==C)p[S]="N";else if("%"==C){var T=void 0;for(T=S+1;T<d&&"%"==p[T];++T);for(var _=S&&"!"==p[S-1]||T<d&&"1"==p[T]?"1":"N",N=S;N<T;++N)p[N]=_;S=T-1}}for(var P=0,A=h;P<d;++P){var L=p[P];"L"==A&&"1"==L?p[P]="L":i.test(L)&&(A=L)}for(var O=0;O<d;++O)if(r.test(p[O])){var M=void 0;for(M=O+1;M<d&&r.test(p[M]);++M);for(var I="L"==(O?p[O-1]:h),R="L"==(M<d?p[M]:h),D=I==R?I?"L":"R":h,F=O;F<M;++F)p[F]=D;O=M-1}for(var j,H=[],U=0;U<d;)if(o.test(p[U])){var $=U;for(++U;U<d&&o.test(p[U]);++U);H.push(new s(0,$,U))}else{var V=U,W=H.length;for(++U;U<d&&"L"!=p[U];++U);for(var B=V;B<U;)if(a.test(p[B])){V<B&&H.splice(W,0,new s(1,V,B));var z=B;for(++B;B<U&&a.test(p[B]);++B);H.splice(W,0,new s(2,z,B)),V=B}else++B;V<U&&H.splice(W,0,new s(1,V,U))}return"ltr"==c&&(1==H[0].level&&(j=l.match(/^\s+/))&&(H[0].from=j[0].length,H.unshift(new s(0,0,j[0].length))),1==Y(H).level&&(j=l.match(/\s+$/))&&(Y(H).to-=j[0].length,H.push(new s(0,d-j[0].length,d)))),"rtl"==c?H.reverse():H}}();function Ze(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=U(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ot(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),ht(t)||t.codemirrorIgnore}function at(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==U(n,t[r])&&n.push(t[r])}function st(e,t){return nt(e,t).length>0}function lt(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function dt(e){ct(e),ut(e)}function pt(e){return e.target||e.srcElement}function ft(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var mt,gt,vt=function(){if(a&&s<9)return!1;var e=P("div");return"draggable"in e||"dragDrop"in e}();function bt(e){if(null==mt){var t=P("span","");N(e,P("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=mt?P("span",""):P("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yt(e){if(null!=gt)return gt;var t=N(e,document.createTextNode("AA")),n=C(t,0,1).getBoundingClientRect(),r=C(t,1,2).getBoundingClientRect();return _(e),!(!n||n.left==n.right)&&(gt=r.right-n.right<3)}var wt,xt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Et=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(wt){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(wt){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},kt="oncopy"in(wt=P("div"))||(wt.setAttribute("oncopy","return;"),"function"==typeof wt.oncopy),St=null,Ct={},Tt={};function _t(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return _t("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return _t("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Nt(e,t){t=_t(t);var n=Ct[t.name];if(!n)return Nt(e,"text/plain");var r=n(e,t);if(Pt.hasOwnProperty(t.name)){var i=Pt[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var Pt={};function At(e,t){var n=Pt.hasOwnProperty(e)?Pt[e]:Pt[e]={};F(t,n)}function Lt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ot(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Mt(e,t,n){return!e.startState||e.startState(t,n)}var It=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};It.prototype.eol=function(){return this.pos>=this.string.length},It.prototype.sol=function(){return this.pos==this.lineStart},It.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},It.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},It.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},It.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},It.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},It.prototype.skipToEnd=function(){this.pos=this.string.length},It.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},It.prototype.backUp=function(e){this.pos-=e},It.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},It.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},It.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return!1!==t&&(this.pos+=e.length),!0},It.prototype.current=function(){return this.string.slice(this.start,this.pos)},It.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},It.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},It.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Rt=function(e,t){this.state=e,this.lookAhead=t},Dt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Ft(e,t,n,r){var i=[e.state.modeGen],o={};qt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],l=1,c=0;n.state=!0,qt(e,t.text,s.mode,n,function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function jt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ht(e,de(t)),i=t.text.length>e.options.maxHighlightLength&&Lt(e.doc.mode,r.state),o=Ft(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ht(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Dt(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=le(o,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof Rt?c.lookAhead:0)<=o.modeFrontier))return s;var u=j(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}(e,t,n),a=o>r.first&&le(r,o-1).stateAfter,s=a?Dt.fromSaved(r,a,o):new Dt(r,Mt(r.mode),o);return r.iter(o,t,function(n){Ut(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function Ut(e,t,n,r){var i=e.doc.mode,o=new It(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&$t(i,n.state);!o.eol();)Vt(i,o,n.state),o.start=o.pos}function $t(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ot(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Vt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ot(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Dt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Dt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Dt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Dt.fromSaved=function(e,t,n){return t instanceof Rt?new Dt(e,Lt(e.mode,t.state),n,t.lookAhead):new Dt(e,Lt(e.mode,t),n)},Dt.prototype.save=function(e){var t=!1!==e?Lt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Rt(t,this.maxLookAhead):t};var Wt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Bt(e,t,n,r){var i,o=e.doc,a=o.mode;t=ke(o,t);var s,l=le(o,t.line),c=Ht(e,t.line,n),u=new It(l.text,e.options.tabSize,c);for(r&&(s=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=Vt(a,u,c.state),r&&s.push(new Wt(u,i,Lt(o.mode,c.state)));return r?s:new Wt(u,i,c.state)}function zt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function qt(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,h=new It(t,e.options.tabSize,r),d=e.options.addModeClass&&[null];for(""==t&&zt($t(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(s=!1,a&&Ut(e,t,r,h.pos),h.pos=t.length,l=null):l=zt(Vt(n,h,r.state,d),o),d){var p=d[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!s||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),i(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var f=Math.min(h.pos,c+5e3);i(f,u),c=f}}var Gt=function(e,t,n){this.text=e,Me(this,t),this.height=n?n(this):1};function Kt(e){e.parent=null,Oe(e)}Gt.prototype.lineNo=function(){return de(this)},lt(Gt);var Yt={},Xt={};function Qt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Xt:Yt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Jt(e,t){var n=A("span",null,null,l?"padding-right: .1px":null),r={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=en,yt(e.display.measure)&&(a=Ze(o,e.doc.direction))&&(r.addToken=tn(r.addToken,a)),r.map=[];var s=t!=e.display.externalMeasured&&de(o);rn(o,r,jt(e,o,s)),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=I(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=I(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(bt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function Zt(e){var t=P("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function en(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=""),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,d=!1;if(h.test(t)){c=document.createDocumentFragment();for(var p=0;;){h.lastIndex=p;var f=h.exec(t),m=f?f.index-p:t.length-p;if(m){var g=document.createTextNode(u.slice(p,p+m));a&&s<9?c.appendChild(P("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;p+=m+1;var v=void 0;if("\t"==f[0]){var b=e.cm.options.tabSize,y=b-e.col%b;(v=c.appendChild(P("span",K(y),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==f[0]||"\n"==f[0]?((v=c.appendChild(P("span","\r"==f[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),a&&s<9?c.appendChild(P("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),a&&s<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||d||l){var w=n||"";r&&(w+=r),i&&(w+=i);var x=P("span",[c],w,l);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(c)}}function tn(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,d=0;d<t.length&&!((h=t[d]).to>c&&h.from<=c);d++);if(h.to>=u)return e(n,r,i,o,a,s,l);e(n,r.slice(0,h.to-c),i,o,null,s,l),o=null,r=r.slice(h.to-c),c=h.to}}}function nn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,c,u,h,d,p=i.length,f=0,m=1,g="",v=0;;){if(v==f){l=c=u=h=s="",d=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var x=r[w],E=x.marker;"bookmark"==E.type&&x.from==f&&E.widgetNode?b.push(E):x.from<=f&&(null==x.to||x.to>f||E.collapsed&&x.to==f&&x.from==f)?(null!=x.to&&x.to!=f&&v>x.to&&(v=x.to,c=""),E.className&&(l+=" "+E.className),E.css&&(s=(s?s+";":"")+E.css),E.startStyle&&x.from==f&&(u+=" "+E.startStyle),E.endStyle&&x.to==v&&(y||(y=[])).push(E.endStyle,x.to),E.title&&!h&&(h=E.title),E.collapsed&&(!d||De(d.marker,E)<0)&&(d=x)):x.from>f&&v>x.from&&(v=x.from)}if(y)for(var k=0;k<y.length;k+=2)y[k+1]==v&&(c+=" "+y[k]);if(!d||d.from==f)for(var S=0;S<b.length;++S)nn(t,0,b[S]);if(d&&(d.from||0)==f){if(nn(t,(null==d.to?p+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=p)break;for(var C=Math.min(p,v);;){if(g){var T=f+g.length;if(!d){var _=T>C?g.slice(0,C-f):g;t.addToken(t,_,a?a+l:l,u,f+_.length==v?c:"",h,s)}if(T>=C){g=g.slice(C-f),f=C;break}f=T,u=""}g=i.slice(o,o=n[m++]),a=Qt(n[m++],t.cm.options)}}else for(var N=1;N<n.length;N+=2)t.addToken(t,i.slice(o,o=n[N]),Qt(n[N+1],t.cm.options))}function on(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=He(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?de(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ze(e,t)}function an(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new on(e.doc,le(e.doc,o),o);r=o+a.size,i.push(a)}return i}var sn=null,ln=null;function cn(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:ln?r=ln:(r=ln=[],setTimeout(un,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function un(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function hn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?fn(e,t):"gutter"==o?gn(e,t,n,r):"class"==o?mn(e,t):"widget"==o&&vn(e,t,r)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=P("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Jt(e,t)}function fn(e,t){var n=t.text.className,r=pn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,mn(e,t)):n&&(t.text.className=n)}function mn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=dn(t);t.background=r.insertBefore(P("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function gn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=dn(t);t.gutterBackground=P("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=dn(t),s=t.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(P("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=o.hasOwnProperty(c)&&o[c];u&&s.appendChild(P("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function vn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);yn(e,t,n)}function bn(e,t,n,r){var i=pn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),mn(e,t),gn(e,t,n,r),yn(e,t,r),t.node}function yn(e,t,n){if(wn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)wn(e,t.rest[r],t,n,!1)}function wn(e,t,n,r,i){if(t.widgets)for(var o=dn(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],c=P("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),xn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),cn(l,"redraw")}}function xn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function En(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!L(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),N(t.display.measure,P("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function kn(e,t){for(var n=pt(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Sn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Tn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=N(e.measure,P("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function _n(e){return $-e.display.nativeBarWidth}function Nn(e){return e.display.scroller.clientWidth-_n(e)-e.display.barWidth}function Pn(e){return e.display.scroller.clientHeight-_n(e)-e.display.barHeight}function An(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(de(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ln(e,t,n,r){return In(e,Mn(e,t),n,r)}function On(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Mn(e,t){var n=de(t),r=On(e,n);r&&!r.text?r=null:r&&r.changes&&(hn(e,r,n,ir(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=de(t=Ve(t)),r=e.display.externalMeasured=new on(e.doc,t,n);r.lineN=n;var i=r.built=Jt(e,r);return r.text=i.pre,N(e.display.lineMeasure,i.pre),r}(e,t));var i=An(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function In(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Nn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Fn(t.map,n,r),l=o.node,c=o.start,u=o.end,h=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;c&&ie(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((i=a&&s<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():jn(C(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}a&&s<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=St)return St;var t=N(e,P("span","x")),n=t.getBoundingClientRect(),r=C(t,0,1).getBoundingClientRect();return St=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var p;c>0&&(h=r="right"),i=e.options.lineWrapping&&(p=l.getClientRects()).length>1?p["right"==r?p.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+rr(e.display),top:f.top,bottom:f.bottom}:Dn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,y=0;y<b.length-1&&!(v<b[y]);y++);var w=y?b[y-1]:0,x=b[y],E={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:w,bottom:x};return i.left||i.right||(E.bogus=!0),e.options.singleCursorHeightPerLine||(E.rtop=m,E.rbottom=g),E}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Rn,Dn={left:0,right:0,top:0,bottom:0};function Fn(e,t,n){for(var r,i,o,a,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(i=0,o=1,a="left"):t<l?o=1+(i=t-s):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-s)-1,t>=l&&(a="right")),null!=i){if(r=e[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function jn(e,t){var n=Dn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Hn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Un(e){e.display.externalMeasure=null,_(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Hn(e.display.view[t])}function $n(e){Un(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Vn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Bn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=En(e.widgets[n]));return t}function zn(e,t,n,r,i){if(!i){var o=Bn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ge(t);if("local"==r?a+=Sn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Wn());var l=s.left+("window"==r?0:Vn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function qn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Vn(),i-=Wn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Gn(e,t,n,r,i){return r||(r=le(e.doc,t.line)),zn(e,r,Ln(e,r,t.ch,i),n)}function Kn(e,t,n,r,i,o){function a(t,a){var s=In(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,zn(e,r,s,n)}r=r||le(e.doc,t.line),i||(i=Mn(e,r));var s=Ze(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return a("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=s[t],i=1==r.level;return a(n?e-1:e,i!=n)}var h=Qe(s,l,c),d=Xe,p=u(l,h,"before"==c);return null!=d&&(p.other=u(l,d,"before"!=c)),p}function Yn(e,t){var n=0;t=ke(e.doc,t),e.options.lineWrapping||(n=rr(e.display)*t.ch);var r=le(e.doc,t.line),i=Ge(r)+Sn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){var o=ge(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Qn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=pe(r,n),o=r.first+r.size-1;if(i>o)return Xn(r.first+r.size-1,le(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=le(r,i);;){var s=tr(e,a,i,t,n),l=Ue(a,s.ch+(s.xRel>0?1:0));if(!l)return s;var c=l.find(1);if(c.line==i)return c;a=le(r,i=c.line)}}function Jn(e,t,n,r){r-=Bn(t);var i=t.text.length,o=ae(function(t){return In(e,n,t-1).bottom<=r},i,0);return i=ae(function(t){return In(e,n,t).top>r},o,i),{begin:o,end:i}}function Zn(e,t,n,r){n||(n=Mn(e,t));var i=zn(e,t,In(e,n,r),"line").top;return Jn(e,t,n,i)}function er(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function tr(e,t,n,r,i){i-=Ge(t);var o=Mn(e,t),a=Bn(t),s=0,l=t.text.length,c=!0,u=Ze(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?function(e,t,n,r,i,o,a){var s=Jn(e,t,r,a),l=s.begin,c=s.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,d=0;d<i.length;d++){var p=i[d];if(!(p.from>=c||p.to<=l)){var f=1!=p.level,m=In(e,r,f?Math.min(c,p.to)-1:Math.max(l,p.from)).right,g=m<o?o-m+1e9:m-o;(!u||h>g)&&(u=p,h=g)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(e,t,n,r,i,o,a){var s=ae(function(s){var l=i[s],c=1!=l.level;return er(Kn(e,ge(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,a,!0)},0,i.length-1),l=i[s];if(s>0){var c=1!=l.level,u=Kn(e,ge(n,c?l.from:l.to,c?"after":"before"),"line",t,r);er(u,o,a,!0)&&u.top>a&&(l=i[s-1])}return l})(e,t,n,o,u,r,i);c=1!=h.level,s=c?h.from:h.to-1,l=c?h.to:h.from-1}var d,p,f=null,m=null,g=ae(function(t){var n=In(e,o,t);return n.top+=a,n.bottom+=a,!!er(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(f=t,m=n),!0)},s,l),v=!1;if(m){var b=r-m.left<m.right-r,y=b==c;g=f+(y?0:1),p=y?"after":"before",d=b?m.left:m.right}else{c||g!=l&&g!=s||g++,p=0==g?"after":g==t.text.length?"before":In(e,o,g-(c?1:0)).bottom+a<=i==c?"after":"before";var w=Kn(e,ge(n,g,p),"line",t,o);d=w.left,v=i<w.top||i>=w.bottom}return g=oe(t.text,g,1),Xn(n,g,p,v,r-d)}function nr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Rn){Rn=P("pre");for(var t=0;t<49;++t)Rn.appendChild(document.createTextNode("x")),Rn.appendChild(P("br"));Rn.appendChild(document.createTextNode("x"))}N(e.measure,Rn);var n=Rn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),_(e.measure),n||1}function rr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=P("span","xxxxxxxxxx"),n=P("pre",[t]);N(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function ir(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:or(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function or(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ar(e){var t=nr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/rr(e.display)-3);return function(i){if(ze(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function sr(e){var t=e.doc,n=ar(e);t.iter(function(e){var t=n(e);t!=e.height&&he(e,t)})}function lr(e,t,n,r){var i=e.display;if(!n&&"true"==pt(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,c=Qn(e,o,a);if(r&&1==c.xRel&&(l=le(e.doc,c.line).text).length==c.ch){var u=j(l,l.length,e.options.tabSize)-l.length;c=ge(c.line,Math.max(0,Math.round((o-Tn(e.display).left)/rr(e.display))-u))}return c}function cr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function ur(e){e.display.input.showSelection(e.display.input.prepareSelection())}function hr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&dr(e,s.head,i),l||fr(e,s,o)}}return r}function dr(e,t,n){var r=Kn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(P("div","","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(P("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function pr(e,t){return e.top-t.top||e.left-t.left}function fr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),a=Tn(e.display),s=a.left,l=Math.max(r.sizerWidth,Nn(e)-r.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var o,a,h=le(i,t),d=h.text.length;function p(n,r){return Gn(e,ge(t,n),"div",h,r)}function f(t,n,r){var i=Zn(e,h,null,t),o="ltr"==n==("after"==r)?"left":"right",a="after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1);return p(a,o)[o]}var m=Ze(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?d:r,function(e,t,i,h){var g="ltr"==i,v=p(e,g?"left":"right"),b=p(t-1,g?"right":"left"),y=null==n&&0==e,w=null==r&&t==d,x=0==h,E=!m||h==m.length-1;if(b.top-v.top<=3){var k=(c?y:w)&&x,S=(c?w:y)&&E,C=k?s:(g?v:b).left,T=S?l:(g?b:v).right;u(C,v.top,T-C,v.bottom)}else{var _,N,P,A;g?(_=c&&y&&x?s:v.left,N=c?l:f(e,i,"before"),P=c?s:f(t,i,"after"),A=c&&w&&E?l:b.right):(_=c?f(e,i,"before"):s,N=!c&&y&&x?l:v.right,P=!c&&w&&E?s:b.left,A=c?f(t,i,"after"):l),u(_,v.top,N-_,v.bottom),v.bottom<b.top&&u(s,v.bottom,null,b.top),u(P,b.top,A-P,b.bottom)}(!o||pr(v,o)<0)&&(o=v),pr(b,o)<0&&(o=b),(!a||pr(v,a)<0)&&(a=v),pr(b,a)<0&&(a=b)}),{start:o,end:a}}var d=t.from(),p=t.to();if(d.line==p.line)h(d.line,d.ch,p.ch);else{var f=le(i,d.line),m=le(i,p.line),g=Ve(f)==Ve(m),v=h(d.line,d.ch,g?f.text.length+1:null).end,b=h(p.line,g?0:null,p.ch).start;g&&(v.top<b.top-2?(u(v.right,v.top,null,v.bottom),u(s,b.top,b.left,b.bottom)):u(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&u(s,v.bottom,null,b.top)}n.appendChild(o)}function mr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function gr(e){e.state.focused||(e.display.input.focus(),br(e))}function vr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))},100)}function br(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,M(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),mr(e))}function yr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function wr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(a&&s<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-n,n=l}else{var c=i.node.getBoundingClientRect();o=c.bottom-c.top}var u=i.line.height-o;if(o<2&&(o=nr(t)),(u>.005||u<-.005)&&(he(i.line,o),xr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)xr(i.rest[h])}}}function xr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Er(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Sn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=pe(t,r),a=pe(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=pe(t,Ge(le(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=pe(t,Ge(le(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function kr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=or(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Sr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e),!0}return!1}function Cr(e,t){var n=e.display,r=nr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Pn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Cn(n),l=t.top<r,c=t.bottom>s-r;if(t.top<i)a.scrollTop=l?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?s:t.bottom)-o);u!=i&&(a.scrollTop=u)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=Nn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),p=t.right-t.left>d;return p&&(t.right=t.left+d),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>d+h-3&&(a.scrollLeft=t.right+(p?0:10)-d),a}function Tr(e,t){null!=t&&(Pr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function _r(e){Pr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nr(e,t,n){null==t&&null==n||Pr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Pr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Yn(e,t.from),r=Yn(e,t.to);Ar(e,n,r,t.margin)}}function Ar(e,t,n,r){var i=Cr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Nr(e,i.scrollLeft,i.scrollTop)}function Lr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Or(e,t,!0),n&&li(e),ri(e,100))}function Or(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Mr(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,kr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ir(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+_n(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Rr=function(e,t,n){this.cm=n;var r=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),tt(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Rr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rr.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Rr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect(),o="vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Rr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Dr=function(){};function Fr(e,t){t||(t=Ir(e));var n=e.display.barWidth,r=e.display.barHeight;jr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&wr(e),jr(e,Ir(e)),n=e.display.barWidth,r=e.display.barHeight}function jr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Dr.prototype.update=function(){return{bottom:0,right:0}},Dr.prototype.setScrollLeft=function(){},Dr.prototype.setScrollTop=function(){},Dr.prototype.clear=function(){};var Hr={native:Rr,null:Dr};function Ur(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),tt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Mr(e,t):Lr(e,t)},e),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)}var $r=0;function Vr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$r},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Wr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{sn=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Br(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ai(i.cm,i.update);for(var i,o=0;o<t.length;o++)zr(t[o]);for(var a=0;a<t.length;a++)qr(t[a]);for(var s=0;s<t.length;s++)Gr(t[s])}(e)})}function Br(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=_n(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=_n(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ye(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function zr(e){var t=e.cm,n=t.display;e.updatedDisplay&&wr(t),e.barMeasure=Ir(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ln(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+_n(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Nn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Mr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==O();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Fr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&mr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&gr(e.cm)}function Gr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&si(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Or(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Mr(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(t=t.ch?ge(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?ge(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Kn(e,t),l=n&&n!=t?Kn(e,n):s;i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r};var c=Cr(e,i),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Lr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(Mr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(a=!0)),!a)break}return i}(t,ke(r,e.scrollToPos.from),ke(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!ot(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!f){var o=P("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Sn(e.display))+"px;\n                         height: "+(t.bottom-t.top+_n(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||it(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&it(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Kr(e,t){if(e.curOp)return t();Vr(e);try{return t()}finally{Wr(e)}}function Yr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Vr(e);try{return t.apply(e,arguments)}finally{Wr(e)}}}function Xr(e){return function(){if(this.curOp)return e.apply(this,arguments);Vr(this);try{return e.apply(this,arguments)}finally{Wr(this)}}}function Qr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Vr(t);try{return e.apply(this,arguments)}finally{Wr(t)}}}function Jr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Te&&We(e.doc,t)<i.viewTo&&ei(e);else if(n<=i.viewFrom)Te&&Be(e.doc,n+r)>i.viewFrom?ei(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ei(e);else if(t<=i.viewFrom){var o=ti(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):ei(e)}else if(n>=i.viewTo){var a=ti(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):ei(e)}else{var s=ti(e,t,t,-1),l=ti(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(an(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):ei(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Zr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[cr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==U(a,n)&&a.push(n)}}}function ei(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ti(e,t,n,r){var i,o=cr(e,t),a=e.display.view;if(!Te||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;We(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ni(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,D(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Ht(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Lt(t.mode,r.state):null,l=Ft(e,o,r,!0);s&&(r.state=s),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var h=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<a.length;++d)h=a[d]!=o.styles[d];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Ut(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Kr(e,function(){for(var t=0;t<i.length;t++)Zr(e,i[t],"text")})}}var oi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Er(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Nn(e),this.force=n,this.dims=ir(e),this.events=[]};function ai(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return ei(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ni(e))return!1;Sr(e)&&(ei(e),t.dims=ir(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Te&&(o=We(e.doc,o),a=Be(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=an(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=an(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(cr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(an(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,cr(e,n)))),r.viewTo=n}(e,o,a),n.viewOffset=Ge(le(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ni(e);if(!s&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=O();if(!t||!L(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&L(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var d=c[h];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;a!=d.node;)a=s(a);var p=i&&null!=t&&t<=u&&d.lineNumber;d.changes&&(U(d.changes,"gutter")>-1&&(p=!1),hn(e,d,u,n)),p&&(_(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(me(e.options,u)))),a=d.node.nextSibling}else{var f=bn(e,d,u,n);o.insertBefore(f,a)}u+=d.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=O()&&(e.activeElt.focus(),e.anchorNode&&L(document.body,e.anchorNode)&&L(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),_(n.cursorDiv),_(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function si(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Nn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-Pn(e),n.top)}),t.visible=Er(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ai(e,t);r=!1){wr(e);var i=Ir(e);ur(e),Fr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new oi(e,t);if(ai(e,n)){wr(e),si(e,n);var r=Ir(e);ur(e),Fr(e,r),ui(e,r),n.finish()}}function ci(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+_n(e)+"px"}function hi(e){var t=e.display.gutters,n=e.options.gutters;_(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(P("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ci(e)}function di(e){var t=U(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}oi.prototype.signal=function(e,t){st(e,t)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var pi=0,fi=null;function mi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function gi(e){var t=mi(e);return t.x*=fi,t.y*=fi,t}function vi(e,t){var r=mi(t),i=r.x,o=r.y,a=e.display,s=a.scroller,c=s.scrollWidth>s.clientWidth,u=s.scrollHeight>s.clientHeight;if(i&&c||o&&u){if(o&&b&&l)e:for(var d=t.target,p=a.view;d!=s;d=d.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==d){e.display.currentWheelTarget=d;break e}if(i&&!n&&!h&&null!=fi)return o&&u&&Lr(e,Math.max(0,s.scrollTop+o*fi)),Mr(e,Math.max(0,s.scrollLeft+i*fi)),(!o||o&&u)&&ct(t),void(a.wheelStartX=null);if(o&&null!=fi){var m=o*fi,g=e.doc.scrollTop,v=g+a.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),li(e,{top:g,bottom:v})}pi<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(fi=(fi*pi+n)/(pi+1),++pi)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?fi=-.53:n?fi=15:u?fi=-.7:d&&(fi=-1/3);var bi=function(e,t){this.ranges=e,this.primIndex=t};bi.prototype.primary=function(){return this.ranges[this.primIndex]},bi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!be(n.anchor,r.anchor)||!be(n.head,r.head))return!1}return!0},bi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new yi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new bi(e,this.primIndex)},bi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ve(t,r.from())>=0&&ve(e,r.to())<=0)return n}return-1};var yi=function(e,t){this.anchor=e,this.head=t};function wi(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return ve(e.from(),t.from())}),n=U(t,i);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],l=ve(s.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var c=xe(s.from(),a.from()),u=we(s.to(),a.to()),h=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new yi(h?u:c,h?c:u))}}return new bi(t,n)}function xi(e,t){return new bi([new yi(e,t||e)],0)}function Ei(e){return e.text?ge(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function ki(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return Ei(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Ei(t).ch-t.to.ch),ge(n,r)}function Si(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new yi(ki(i.anchor,t),ki(i.head,t)))}return wi(e.cm,n,e.sel.primIndex)}function Ci(e,t,n){return e.line==t.line?ge(n.line,e.ch-t.ch+n.ch):ge(n.line+(e.line-t.line),e.ch)}function Ti(e){e.doc.mode=Nt(e.options,e.doc.modeOption),_i(e)}function _i(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Ni(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Pi(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Oe(e),Me(e,n);var i=r?r(e):1;i!=e.height&&he(e,i)}(e,n,i,r),cn(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(c[o],i(o),r));return n}var s=t.from,l=t.to,c=t.text,u=le(e,s.line),h=le(e,l.line),d=Y(c),p=i(c.length-1),f=l.line-s.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ni(e,t)){var m=a(0,c.length-1);o(h,h.text,p),f&&e.remove(s.line,f),m.length&&e.insert(s.line,m)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,s.ch)+d+u.text.slice(l.ch),p);else{var g=a(1,c.length-1);g.push(new Gt(d+u.text.slice(l.ch),p,r)),o(u,u.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,s.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(s.line+1,f);else{o(u,u.text.slice(0,s.ch)+c[0],i(0)),o(h,d+h.text.slice(l.ch),p);var v=a(1,c.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,v)}cn(e,"change",e,t)}function Ai(e,t,n){!function e(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,r,l))}}}(e,null,!0)}function Li(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,sr(e),Ti(e),Oi(e),e.options.lineWrapping||Ye(e),e.options.mode=t.modeOption,Jr(e)}function Oi(e){("rtl"==e.doc.direction?M:T)(e.display.lineDiv,"CodeMirror-rtl")}function Mi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ii(e,t){var n={from:ye(t.from),to:Ei(t),text:ce(e,t.from,t.to)};return Hi(e,n,t.from.line,t.to.line+1),Ai(e,function(e){return Hi(e,n,t.from.line,t.to.line+1)},!0),n}function Ri(e){for(;e.length;){var t=Y(e);if(!t.ranges)break;e.pop()}}function Di(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Ri(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}(i,i.lastOp==r)))a=Y(o.changes),0==ve(t.from,t.to)&&0==ve(t.from,a.to)?a.to=Ei(t):o.changes.push(Ii(e,t));else{var l=Y(i.done);for(l&&l.ranges||ji(e.sel,i.done),o={changes:[Ii(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||it(e,"historyAdded")}function Fi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Y(i.done),t))?i.done[i.done.length-1]=t:ji(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}function ji(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Ui(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function $i(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ui(n[i]));return r}(e,t),r=Ae(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function Vi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?bi.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&U(t,Number(u[1]))>-1&&(Y(s)[h]=c[h],delete c[h])}}}return r}function Wi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ve(t,i)<0;o!=ve(n,i)<0?(i=t,t=n):o!=ve(t,n)<0&&(t=n)}return new yi(i,t)}return new yi(n||t,t)}function Bi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Yi(e,new bi([Wi(e.sel.primary(),t,n,i)],0),r)}function zi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=Wi(e.sel.ranges[o],t[o],null,i);var a=wi(e.cm,r,e.sel.primIndex);Yi(e,a,n)}function qi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Yi(e,wi(e.cm,i,e.sel.primIndex),r)}function Gi(e,t,n,r){Yi(e,xi(t,n),r)}function Ki(e,t,n){var r=e.history.done,i=Y(r);i&&i.ranges?(r[r.length-1]=t,Xi(e,t,n)):Yi(e,t,n)}function Yi(e,t,n){Xi(e,t,n),Fi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){(st(e,"beforeSelectionChange")||e.cm&&st(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new yi(ke(e,t[n].anchor),ke(e,t[n].head))},origin:n&&n.origin};return it(e,"beforeSelectionChange",e,r),e.cm&&it(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?wi(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1);Qi(e,Zi(e,t,r,!0)),n&&!1===n.scroll||!e.cm||_r(e.cm)}function Qi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,at(e.cm)),cn(e,"cursorActivity",e))}function Ji(e){Qi(e,Zi(e,e.sel,null,!1))}function Zi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=to(e,a.anchor,s&&s.anchor,n,r),c=to(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new yi(l,c))}return i?wi(e.cm,i,t.primIndex):t}function eo(e,t,n,r,i){var o=le(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(it(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=no(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=ve(c,n))&&(r<0?u<0:u>0))return eo(e,c,t,r,i)}var h=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(h=no(e,h,r,h.line==t.line?o:null)),h?eo(e,h,t,r,i):null}}return t}function to(e,t,n,r,i){var o=r||1,a=eo(e,t,n,o,i)||!i&&eo(e,t,n,o,!0)||eo(e,t,n,-o,i)||!i&&eo(e,t,n,-o,!0);return a||(e.cantEdit=!0,ge(e.first,0))}function no(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ke(e,ge(t.line-1)):null:n>0&&t.ch==(r||le(e,t.line)).text.length?t.line<e.first+e.size-1?ge(t.line+1,0):null:new ge(t.line,t.ch+n)}function ro(e){e.setSelection(ge(e.firstLine(),0),ge(e.lastLine()),W)}function io(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=ke(e,t)),n&&(r.to=ke(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),it(e,"beforeChange",e,r),e.cm&&it(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function oo(e,t,n){if(e.cm){if(!e.cm.curOp)return Yr(e.cm,oo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"))||(t=io(e,t,!0))){var r=Ce&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=U(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ve(c.to,s.from)<0||ve(c.from,s.to)>0)){var u=[l,1],h=ve(c.from,s.from),d=ve(c.to,s.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)ao(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else ao(e,t)}}function ao(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ve(t.from,t.to)){var n=Si(e,t);Di(e,t,n,e.cm?e.cm.curOp.id:NaN),co(e,t,n,Ae(e,t));var r=[];Ai(e,function(e,n){n||-1!=U(r,e.history)||(fo(e.history,t),r.push(e.history)),co(e,t,null,Ae(e,t))})}}function so(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<s.length&&(i=s[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(ji(i,l),n&&!i.equals(e.sel))return void Yi(e,i,{clearRedo:!1});a=i}var u=[];ji(a,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"),d=function(n){var r=i.changes[n];if(r.origin=t,h&&!io(e,r,!1))return s.length=0,{};u.push(Ii(e,r));var o=n?Si(e,r):Y(s);co(e,r,o,$i(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Ei(r)});var a=[];Ai(e,function(e,t){t||-1!=U(a,e.history)||(fo(e.history,r),a.push(e.history)),co(e,r,null,$i(e,r))})},p=i.changes.length-1;p>=0;--p){var f=d(p);if(f)return f.v}}}}function lo(e,t){if(0!=t&&(e.first+=t,e.sel=new bi(X(e.sel.ranges,function(e){return new yi(ge(e.anchor.line+t,e.anchor.ch),ge(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Zr(e.cm,r,"gutter")}}function co(e,t,n,r){if(e.cm&&!e.cm.curOp)return Yr(e.cm,co)(e,t,n,r);if(t.to.line<e.first)lo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);lo(e,i),t={from:ge(e.first,0),to:ge(t.to.line+i,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ge(o,le(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=Si(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=de(Ve(le(r,o.line))),r.iter(l,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&at(e),Pi(r,t,n,ar(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=Ke(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=le(e,r).stateAfter;if(i&&(!(i instanceof Rt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ri(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Jr(e):o.line!=a.line||1!=t.text.length||Ni(e.doc,t)?Jr(e,o.line,a.line+1,c):Zr(e,o.line,"text");var u=st(e,"changes"),h=st(e,"change");if(h||u){var d={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&cn(e,"change",e,d),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,r):Pi(e,t,r),Xi(e,n,W)}}function uo(e,t,n,r,i){var o;r||(r=n),ve(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),oo(e,{from:n,to:r,text:t,origin:i})}function ho(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function po(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)ho(o.ranges[s].anchor,t,n,r),ho(o.ranges[s].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=ge(c.from.line+r,c.from.ch),c.to=ge(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function fo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;po(e.done,n,r,i),po(e.undone,n,r,i)}function mo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=le(e,Ee(e,t)):i=de(t),null==i?null:(r(o,i)&&e.cm&&Zr(e.cm,i,n),o)}function go(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function vo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}yi.prototype.from=function(){return xe(this.anchor,this.head)},yi.prototype.to=function(){return we(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},go.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Kt(i),cn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof go))){var s=[];this.collapse(s),this.children=[new go(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new go(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new vo(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=U(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new vo(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var bo=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function yo(e,t,n){Ge(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Tr(e,n)}bo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=de(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=En(this);he(n,Math.max(0,n.height-o)),e&&(Kr(e,function(){yo(e,n,-o),Zr(e,r,"widget")}),cn(e,"lineWidgetCleared",e,this,r))}},bo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=En(this)-t;i&&(ze(this.doc,r)||he(r,r.height+i),n&&Kr(n,function(){n.curOp.forceUpdate=!0,yo(n,r,i),cn(n,"lineWidgetChanged",n,e,de(r))}))},lt(bo);var wo=0,xo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++wo};function Eo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=F(r)).shared=!1;var o=[Eo(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Ai(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Eo(e,ke(e,t),ke(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Y(o)}),new ko(o,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Yr(e.cm,Eo)(e,t,n,r,i);var o=new xo(e,i),a=ve(t,n);if(r&&F(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if($e(e,t.line,t,n,o)||t.line!=n.line&&$e(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&Di(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Ve(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&he(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new _e(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){ze(e,t)&&he(t,0)}),o.clearOnEnter&&tt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Ce=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++wo,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)Jr(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Zr(c,u,"text");o.atomic&&Ji(c.doc),cn(c,"markerAdded",c,o)}return o}xo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Vr(e),st(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Ne(a.markedSpans,this);e&&!this.collapsed?Zr(e,de(a),"text"):e&&(null!=s.to&&(i=de(a)),null!=s.from&&(r=de(a))),a.markedSpans=Pe(a.markedSpans,s),null==s.from&&this.collapsed&&!ze(this.doc,a)&&e&&he(a,nr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Ve(this.lines[l]),u=Ke(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&cn(e,"markerCleared",e,this,r,i),t&&Wr(e),this.parent&&this.parent.clear()}},xo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Ne(o.markedSpans,this);if(null!=a.from&&(n=ge(t?o:de(o),a.from),-1==e))return n;if(null!=a.to&&(r=ge(t?o:de(o),a.to),1==e))return r}return n&&{from:n,to:r}},xo.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Kr(r,function(){var i=t.line,o=de(t.line),a=On(r,o);if(a&&(Hn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ze(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=En(n)-s;l&&he(i,i.height+l)}cn(r,"markerChanged",r,e)})},xo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=U(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},xo.prototype.detachLine=function(e){if(this.lines.splice(U(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},lt(xo);var ko=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function So(e){return e.findMarks(ge(e.first,0),e.clipPos(ge(e.lastLine())),function(e){return e.parent})}function Co(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ai(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==U(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}ko.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},ko.prototype.find=function(e,t){return this.primary.find(e,t)},lt(ko);var To=0,_o=function(e,t,n,r,i){if(!(this instanceof _o))return new _o(e,t,n,r,i);null==n&&(n=0),vo.call(this,[new go([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ge(n,0);this.sel=xi(o),this.history=new Mi(null),this.id=++To,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Pi(this,{from:o,to:o,text:e}),Yi(this,xi(o),W)};_o.prototype=J(vo.prototype,{constructor:_o,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Qr(function(e){var t=ge(this.first,0),n=this.first+this.size-1;oo(this,{from:t,to:ge(n,le(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nr(this.cm,0,0),Yi(this,xi(t),W)}),replaceRange:function(e,t,n,r){t=ke(this,t),n=n?ke(this,n):t,uo(this,e,t,n,r)},getRange:function(e,t,n){var r=ce(this,ke(this,e),ke(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(fe(this,e))return le(this,e)},getLineNumber:function(e){return de(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),Ve(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qr(function(e,t,n){Gi(this,ke(this,"number"==typeof e?ge(e,t||0):e),null,n)}),setSelection:Qr(function(e,t,n){Gi(this,ke(this,e),ke(this,t||e),n)}),extendSelection:Qr(function(e,t,n){Bi(this,ke(this,e),t&&ke(this,t),n)}),extendSelections:Qr(function(e,t){zi(this,Se(this,e),t)}),extendSelectionsBy:Qr(function(e,t){var n=X(this.sel.ranges,e);zi(this,Se(this,n),t)}),setSelections:Qr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new yi(ke(this,e[i].anchor),ke(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yi(this,wi(this.cm,r,t),n)}}),addSelection:Qr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new yi(ke(this,e),ke(this,t||e))),Yi(this,wi(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Qr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var r=[],i=ge(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=Ci(s.from,i,o),c=Ci(Ei(s),i,o);if(i=s.to,o=c,"around"==n){var u=e.sel.ranges[a],h=ve(u.head,u.anchor)<0;r[a]=new yi(h?c:l,h?l:c)}else r[a]=new yi(l,l)}return new bi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)oo(this,r[l]);s?Ki(this,s):this.cm&&_r(this.cm)}),undo:Qr(function(){so(this,"undo")}),redo:Qr(function(){so(this,"redo")}),undoSelection:Qr(function(){so(this,"undo",!0)}),redoSelection:Qr(function(){so(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Mi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(e){var t=this.history=new Mi(this.history.maxGeneration);t.done=Vi(e.done.slice(0),null,!0),t.undone=Vi(e.undone.slice(0),null,!0)},setGutterMarker:Qr(function(e,t,n){return mo(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Qr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&mo(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!fe(this,e))return null;if(t=e,!(e=le(this,e)))return null}else if(null==(t=de(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Qr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(S(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Qr(function(e,t,n){return mo(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(S(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Qr(function(e,t,n){return function(e,t,n,r){var i=new bo(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),mo(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!ze(e,t)){var r=Ge(t)<e.scrollTop;he(t,t.height+En(i)),r&&Tr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&cn(o,"lineWidgetAdded",o,i,"number"==typeof t?t:de(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Eo(this,ke(this,e),ke(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Eo(this,e=ke(this,e),e,n,"bookmark")},findMarksAt:function(e){e=ke(this,e);var t=[],n=le(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ke(this,e),t=ke(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),ke(this,ge(n,t))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new _o(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new _o(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ve(o,a)){var s=Eo(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,So(this)),r},unlinkDoc:function(e){if(e instanceof Sa&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Co(So(this));break}}if(e.history==this.history){var r=[e.id];Ai(e,function(e){return r.push(e.id)},!0),e.history=new Mi(null),e.history.done=Vi(this.history.done,r),e.history.undone=Vi(this.history.undone,r)}},iterLinkedDocs:function(e){Ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Qr(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Kr(t=this.cm,function(){Oi(t),Jr(t)}))})}),_o.prototype.eachLine=_o.prototype.iter;var No=0;function Po(e){var t=this;if(Ao(t),!ot(t,e)&&!kn(t.display,e)){ct(e),a&&(No=+new Date);var n=lr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=U(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Yr(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++s==i){var l={from:n=ke(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};oo(t.doc,l),Ki(t.doc,xi(n,Ei(l)))}}),a.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Xi(t.doc,xi(n,n)),h)for(var d=0;d<h.length;++d)uo(t.doc,"",h[d].anchor,h[d].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ao(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Lo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Oo=!1;function Mo(){var e;Oo||(tt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Lo(Io)},100))}),tt(window,"blur",function(){return Lo(yr)}),Oo=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ro={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Do=0;Do<10;Do++)Ro[Do+48]=Ro[Do+96]=String(Do);for(var Fo=65;Fo<=90;Fo++)Ro[Fo]=String.fromCharCode(Fo);for(var jo=1;jo<=12;jo++)Ro[jo+111]=Ro[jo+63235]="F"+jo;var Ho={};function Uo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function $o(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=X(n.split(" "),Uo),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Vo(e,t,n,r){var i=(t=qo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vo(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Vo(e,t.fallthrough[o],n,r);if(a)return a}}}function Wo(e){var t="string"==typeof e?e:Ro[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Bo(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function zo(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ro[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Bo(n,e,t))}function qo(e){return"string"==typeof e?Ho[e]:e}function Go(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&ve(o.from,Y(r).to)<=0;){var a=r.pop();if(ve(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Kr(e,function(){for(var t=r.length-1;t>=0;t--)uo(e.doc,"",r[t].from,r[t].to,"+delete");_r(e)})}function Ko(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Yo(e,t,n){var r=Ko(e,t.ch,n);return null==r?null:new ge(t.line,r,n<0?"after":"before")}function Xo(e,t,n,r,i){if(e){var o=Ze(n,t.doc.direction);if(o){var a,s=i<0?Y(o):o[0],l=i<0==(1==s.level),c=l?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=Mn(t,n);a=i<0?n.text.length-1:0;var h=In(t,u,a).top;a=ae(function(e){return In(t,u,e).top==h},i<0==(1==s.level)?s.from:s.to-1,a),"before"==c&&(a=Ko(n,a,1))}else a=i<0?s.to:s.from;return new ge(r,a,c)}}return new ge(r,i<0?n.text.length:0,i<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=b?Ho.macDefault:Ho.pcDefault;var Qo={selectAll:ro,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Go(e,function(t){if(t.empty()){var n=le(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ge(t.head.line+1,0)}:{from:t.head,to:ge(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Go(e,function(t){return{from:ge(t.from().line,0),to:ke(e.doc,ge(t.to().line+1,0))}})},delLineLeft:function(e){return Go(e,function(e){return{from:ge(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Go(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ge(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ge(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Zo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=le(e.doc,t),r=function(e){for(var t;t=He(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=de(r)),Xo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},z)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},z)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Zo(e,t.head):r},z)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=j(e.getLine(o.line),o.ch,r);t.push(K(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=le(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ge(i.line,i.ch-1)),i.ch>0)i=new ge(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ge(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=le(e.doc,i.line-1).text;a&&(i=new ge(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),ge(i.line-1,a.length-1),i,"+transpose"))}n.push(new yi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Kr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);_r(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Jo(e,t){var n=le(e.doc,t),r=Ve(n);return r!=n&&(t=de(r)),Xo(!0,e,r,t,1)}function Zo(e,t){var n=Jo(e,t.line),r=le(e.doc,n.line),i=Ze(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return ge(n.line,a?0:o,n.sticky)}return n}function ea(e,t,n){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=V}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var ta=new H;function na(e,t,n,r){var i=e.state.keySeq;if(i){if(Wo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ta.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),ra(e,i+" "+t,n,r))return!0}return ra(e,t,n,r)}function ra(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Vo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Vo(t,e.options.extraKeys,n,e)||Vo(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&cn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),mr(e)),!!i}function ia(e,t){var n=zo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?na(e,"Shift-"+n,t,function(t){return ea(e,t,!0)})||na(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ea(e,t)}):na(e,n,t,function(t){return ea(e,t)}))}var oa=null;function aa(e){var t=this;if(t.curOp.focus=O(),!ot(t,e)){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ia(t,e);h&&(oa=r?n:null,!r&&88==n&&!kt&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}M(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(t)}}function sa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function la(e){var t=this;if(!(kn(t.display,e)||ot(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==oa)return oa=null,void ct(e);if(!h||e.which&&!(e.which<10)||!ia(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return na(e,"'"+n+"'",t,function(t){return ea(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var ca,ua,ha=function(e,t,n){this.time=e,this.pos=t,this.button=n};function da(e){var t=this,n=t.display;if(!(ot(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,kn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ma(t,e)){var r=lr(t,e),i=ft(e),o=r?function(e,t){var n=+new Date;return ua&&ua.compare(n,e,t)?(ca=ua=null,"triple"):ca&&ca.compare(n,e,t)?(ua=new ha(n,e,t),ca=null,"double"):(ca=new ha(n,e,t),ua=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),na(e,Bo(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=V}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){a?setTimeout(D(gr,e),0):e.curOp.focus=O();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=y?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(ve((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(ve(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=Yr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,rt(i.wrapper.ownerDocument,"mouseup",c),rt(i.wrapper.ownerDocument,"mousemove",u),rt(i.scroller,"dragstart",h),rt(i.scroller,"drop",c),o||(ct(t),r.addNew||Bi(e.doc,n,null,null,r.extend),l||a&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),tt(i.wrapper.ownerDocument,"mouseup",c),tt(i.wrapper.ownerDocument,"mousemove",u),tt(i.scroller,"dragstart",h),tt(i.scroller,"drop",c),vr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;ct(t);var a,s,l=o.sel,c=l.ranges;if(r.addNew&&!r.extend?(s=o.sel.contains(n),a=s>-1?c[s]:new yi(n,n)):(a=o.sel.primary(),s=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new yi(n,n)),n=lr(e,t,!0,!0),s=-1;else{var u=pa(e,n,r.unit);a=r.extend?Wi(a,u.anchor,u.head,r.extend):u}r.addNew?-1==s?(s=c.length,Yi(o,wi(e,c.concat([a]),s),{scroll:!1,origin:"*mouse"})):c.length>1&&c[s].empty()&&"char"==r.unit&&!r.extend?(Yi(o,wi(e,c.slice(0,s).concat(c.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):qi(o,s,a,B):(s=0,Yi(o,new bi([a],0),B),l=o.sel);var h=n;function d(t){if(0!=ve(h,t))if(h=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=j(le(o,n.line).text,n.ch,c),d=j(le(o,t.line).text,t.ch,c),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=le(o,m).text,b=q(v,p,c);p==f?i.push(new yi(ge(m,b),ge(m,b))):v.length>b&&i.push(new yi(ge(m,b),ge(m,q(v,f,c))))}i.length||i.push(new yi(n,n)),Yi(o,wi(e,l.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,w=a,x=pa(e,t,r.unit),E=w.anchor;ve(x.anchor,E)>0?(y=x.head,E=xe(w.from(),x.anchor)):(y=x.anchor,E=we(w.to(),x.head));var k=l.ranges.slice(0);k[s]=function(e,t){var n=t.anchor,r=t.head,i=le(e.doc,n.line);if(0==ve(n,r)&&n.sticky==r.sticky)return t;var o=Ze(i);if(!o)return t;var a=Qe(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,c=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Qe(o,r.ch,r.sticky),h=u-a||(r.ch-n.ch)*(1==s.level?-1:1);l=u==c-1||u==c?h<0:h>0}var d=o[c+(l?-1:0)],p=l==(1==d.level),f=p?d.from:d.to,m=p?"after":"before";return n.ch==f&&n.sticky==m?t:new yi(new ge(n.line,f,m),r)}(e,new yi(ke(o,E),y)),Yi(o,wi(e,k,s),B)}}var p=i.wrapper.getBoundingClientRect(),f=0;function m(t){e.state.selectingText=!1,f=1/0,ct(t),i.input.focus(),rt(i.wrapper.ownerDocument,"mousemove",g),rt(i.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var g=Yr(e,function(t){0!==t.buttons&&ft(t)?function t(n){var a=++f,s=lr(e,n,!0,"rectangle"==r.unit);if(s)if(0!=ve(s,h)){e.curOp.focus=O(),d(s);var l=Er(i,o);(s.line>=l.to||s.line<l.from)&&setTimeout(Yr(e,function(){f==a&&t(n)}),150)}else{var c=n.clientY<p.top?-20:n.clientY>p.bottom?20:0;c&&setTimeout(Yr(e,function(){f==a&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),v=Yr(e,m);e.state.selectingText=v,tt(i.wrapper.ownerDocument,"mousemove",g),tt(i.wrapper.ownerDocument,"mouseup",v)}(e,r,t,o)}(t,r,o,e):pt(e)==n.scroller&&ct(e):2==i?(r&&Bi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(k?t.display.input.onContextMenu(e):vr(t)))}}function pa(e,t,n){if("char"==n)return new yi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new yi(ge(t.line,0),ke(e.doc,ge(t.line+1,0)));var r=n(e,t);return new yi(r.from,r.to)}function fa(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!st(e,n))return ht(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=pe(e.doc,o),h=e.options.gutters[l];return it(e,n,e,u,h,t),ht(t)}}}function ma(e,t){return fa(e,t,"gutterClick",!0)}function ga(e,t){kn(e.display,t)||function(e,t){return!!st(e,"gutterContextMenu")&&fa(e,t,"gutterContextMenu",!1)}(e,t)||ot(e,t,"contextmenu")||k||e.display.input.onContextMenu(t)}function va(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),$n(e)}ha.prototype.compare=function(e,t,n){return this.time+400>e&&0==ve(t,this.pos)&&n==this.button};var ba={toString:function(){return"CodeMirror.Init"}},ya={},wa={};function xa(e){hi(e),Jr(e),kr(e)}function Ea(e,t,n){var r=n&&n!=ba;if(!t!=!r){var i=e.display.dragFunctions,o=t?tt:rt;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function ka(e){e.options.lineWrapping?(M(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),Ye(e)),sr(e),Jr(e),$n(e),setTimeout(function(){return Fr(e)},100)}function Sa(e,t){var n=this;if(!(this instanceof Sa))return new Sa(e,t);this.options=t=t?F(t):{},F(ya,t,!1),di(t);var r=t.value;"string"==typeof r?r=new _o(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Sa.inputStyles[t.inputStyle](this),o=this.display=new se(e,r,i);for(var c in o.wrapper.CodeMirror=this,hi(this),va(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ur(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),a&&s<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;tt(t.scroller,"mousedown",Yr(e,da)),tt(t.scroller,"dblclick",a&&s<11?Yr(e,function(t){if(!ot(e,t)){var n=lr(e,t);if(n&&!ma(e,t)&&!kn(e.display,t)){ct(t);var r=e.findWordAt(n);Bi(e.doc,r.anchor,r.head)}}}):function(t){return ot(e,t)||ct(t)}),tt(t.scroller,"contextmenu",function(t){return ga(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}tt(t.scroller,"touchstart",function(i){if(!ot(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!ma(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),tt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),tt(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!kn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=e.coordsChar(t.activeTouch,"page");a=!r.prev||o(r,r.prev)?new yi(s,s):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(s):new yi(ge(s.line,0),ke(e.doc,ge(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),ct(n)}i()}),tt(t.scroller,"touchcancel",i),tt(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Lr(e,t.scroller.scrollTop),Mr(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),tt(t.scroller,"mousewheel",function(t){return vi(e,t)}),tt(t.scroller,"DOMMouseScroll",function(t){return vi(e,t)}),tt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ot(e,t)||dt(t)},over:function(t){ot(e,t)||(function(e,t){var n=lr(e,t);if(n){var r=document.createDocumentFragment();dr(e,n,r),e.display.dragCursor||(e.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),N(e.display.dragCursor,r)}}(e,t),dt(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-No<100))dt(t);else if(!ot(e,t)&&!kn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:Yr(e,Po),leave:function(t){ot(e,t)||Ao(e)}};var l=t.input.getField();tt(l,"keyup",function(t){return sa.call(e,t)}),tt(l,"keydown",Yr(e,aa)),tt(l,"keypress",Yr(e,la)),tt(l,"focus",function(t){return br(e,t)}),tt(l,"blur",function(t){return yr(e,t)})}(this),Mo(),Vr(this),this.curOp.forceUpdate=!0,Li(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout(D(br,this),20):yr(this),wa)wa.hasOwnProperty(c)&&wa[c](n,t[c],ba);Sr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Ca.length;++u)Ca[u](n);Wr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Sa.defaults=ya,Sa.optionHandlers=wa;var Ca=[];function Ta(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Ht(e,t).state:n="prev");var a=e.options.tabSize,s=le(o,t),l=j(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((c=o.mode.indent(i,s.text.slice(u.length),s.text))==V||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?j(le(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",d=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)d+=a,h+="\t";if(d<c&&(h+=K(c-d)),h!=u)return uo(o,h,ge(t,0),ge(t,u.length),"+input"),s.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var m=o.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=ge(t,u.length);qi(o,f,new yi(g,g));break}}}Sa.defineInitHook=function(e){return Ca.push(e)};var _a=null;function Na(e){_a=e}function Pa(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a,s=e.state.pasteIncoming||"paste"==i,l=xt(t),c=null;if(s&&r.ranges.length>1)if(_a&&_a.text.join("\n")==t){if(r.ranges.length%_a.text.length==0){c=[];for(var u=0;u<_a.text.length;u++)c.push(o.splitLines(_a.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,function(e){return[e]}));for(var h=r.ranges.length-1;h>=0;h--){var d=r.ranges[h],p=d.from(),f=d.to();d.empty()&&(n&&n>0?p=ge(p.line,p.ch-n):e.state.overwrite&&!s?f=ge(f.line,Math.min(le(o,f.line).text.length,f.ch+Y(l).length)):s&&_a&&_a.lineWise&&_a.text.join("\n")==t&&(p=f=ge(p.line,0))),a=e.curOp.updateInput;var m={from:p,to:f,text:c?c[h%c.length]:l,origin:i||(s?"paste":e.state.cutIncoming?"cut":"+input")};oo(e.doc,m),cn(e,"inputRead",e,m)}t&&!s&&La(e,t),_r(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Aa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Kr(t,function(){return Pa(t,n,0,null,"paste")}),!0}function La(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Ta(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(le(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ta(e,i.head.line,"smart"));a&&cn(e,"electricInput",e,i.head.line)}}}function Oa(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ge(i,0),head:ge(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ma(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ia(){var e=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=P("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ma(e),t}function Ra(e,t,n,r,i){var o=t,a=n,s=le(e,t.line);function l(r){var o,a;if(null==(o=i?function(e,t,n,r){var i=Ze(t,e.doc.direction);if(!i)return Yo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Qe(i,n.ch,n.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Yo(t,n,r);var s,l=function(e,n){return Ko(t,e instanceof ge?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||Mn(e,t),Zn(e,t,s,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var h=1==a.level==r<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=a.to&&d<=u.end:d>=a.from&&d>=u.begin)){var p=h?"before":"after";return new ge(n.line,d,p)}}var f=function(e,t,r){for(var o=function(e,t){return t?new ge(n.line,l(e,1),"before"):new ge(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],s=t>0==(1!=a.level),c=s?r.begin:l(r.end,-1);if(a.from<=c&&c<a.to)return o(c,s);if(c=s?a.from:l(a.to,-1),r.begin<=c&&c<r.end)return o(c,s)}},m=f(o+r,r,u);if(m)return m;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(m=f(r>0?0:i.length-1,r,c(g)))?null:m}(e.cm,s,t,n):Yo(s,t,n))){if(r||((a=t.line+n)<e.first||a>=e.first+e.size||(t=new ge(a,t.ch,t.sticky),!(s=le(e,a)))))return!1;t=Xo(i,e.cm,s,t.line,n)}else t=o;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||l(!d);d=!1){var p=s.text.charAt(t.ch)||"\n",f=te(p,h)?"w":u&&"\n"==p?"n":!u||/\s/.test(p)?null:"p";if(!u||d||f||(f="s"),c&&c!=f){n<0&&(n=1,l(),t.sticky="after");break}if(f&&(c=f),n>0&&!l(!d))break}var m=to(e,t,o,a,!0);return be(o,m)&&(m.hitSide=!0),m}function Da(e,t,n,r){var i,o,a=e.doc,s=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*nr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Qn(e,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Fa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ja(e,t){var n=On(e,t.line);if(!n||n.hidden)return null;var r=le(e.doc,t.line),i=An(n,r,t.line),o=Ze(r,e.doc.direction),a="left";if(o){var s=Qe(o,t.ch);a=s%2?"right":"left"}var l=Fn(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Ha(e,t){return t&&(e.bad=!0),e}function Ua(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Ha(e.clipPos(ge(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return $a(o,t,n)}}function $a(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!L(r,t))return Ha(ge(de(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return Ha(ge(de(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var u=de(i<0?e.line:e.rest[i]),h=o[a]+r;return(r<0||s!=t)&&(h=o[a+(r?1:0)]),ge(u,h)}}}var h=u(a,s,n);if(h)return Ha(h,i);for(var d=s.nextSibling,p=a?a.nodeValue.length-n:0;d;d=d.nextSibling){if(h=u(d,d.firstChild,0))return Ha(ge(h.line,h.ch-p),i);p+=d.textContent.length}for(var f=s.previousSibling,m=n;f;f=f.previousSibling){if(h=u(f,f.firstChild,-1))return Ha(ge(h.line,h.ch+m),i);m+=f.textContent.length}}Fa.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){if(!ot(r,e)){if(r.somethingSelected())Na({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Oa(r);Na({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,W),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=_a.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Ia(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=_a.text.join("\n");var l=document.activeElement;R(s),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()},50)}}Ma(i,r.options.spellcheck),tt(i,"paste",function(e){ot(r,e)||Aa(e,r)||s<=11&&setTimeout(Yr(r,function(){return t.updateFromDOM()}),20)}),tt(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),tt(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(i,"touchstart",function(){return n.forceCompositionEnd()}),tt(i,"input",function(){t.composing||t.readFromDOMSoon()}),tt(i,"copy",o),tt(i,"cut",o)},Fa.prototype.prepareSelection=function(){var e=hr(this.cm,!1);return e.focus=this.cm.state.focused,e},Fa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Fa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fa.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=Ua(t,e.anchorNode,e.anchorOffset),s=Ua(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=ve(xe(a,s),i)||0!=ve(we(a,s),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&ja(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&ja(t,o);if(!u){var h=l[l.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;u={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(c&&u){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=C(c.node,c.offset,u.offset,u.node)}catch(wt){}p&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Fa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Fa.prototype.showMultipleSelections=function(e){N(this.cm.display.cursorDiv,e.cursors),N(this.cm.display.selectionDiv,e.selection)},Fa.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Fa.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return L(this.div,t)},Fa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fa.prototype.blur=function(){this.div.blur()},Fa.prototype.getField=function(){return this.div},Fa.prototype.supportsTouch=function(){return!0},Fa.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Kr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Fa.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Fa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ua(t,e.anchorNode,e.anchorOffset),r=Ua(t,e.focusNode,e.focusOffset);n&&r&&Kr(t,function(){Yi(t.doc,xi(n,r),W),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Fa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=ge(a.line-1,le(r.doc,a.line-1).length)),s.ch==le(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=ge(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=cr(r,a.line))?(t=de(i.view[0].line),n=i.view[0].node):(t=de(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=cr(r,s.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=de(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var o="",a=!1,s=e.doc.lineSeparator(),l=!1;function c(){a&&(o+=s,l&&(o+=s),a=l=!1)}function u(e){e&&(c(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,d=t.getAttribute("cm-marker");if(d){var p=e.findMarks(ge(r,0),ge(i+1,0),(g=+d,function(e){return e.id==g}));return void(p.length&&(o=p[0].find(0))&&u(ce(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(a=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,c,t,l)),d=ce(r.doc,ge(t,0),ge(l,le(r.doc,l).text.length));h.length>1&&d.length>1;)if(Y(h)==Y(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),t++}for(var p=0,f=0,m=h[0],g=d[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var b=Y(h),y=Y(d),w=Math.min(b.length-(1==h.length?p:0),y.length-(1==d.length?p:0));f<w&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)++f;if(1==h.length&&1==d.length&&t==a.line)for(;p&&p>a.ch&&b.charCodeAt(b.length-f-1)==y.charCodeAt(y.length-f-1);)p--,f++;h[h.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(p).replace(/\u200b+$/,"");var x=ge(t,p),E=ge(l,d.length?Y(d).length-f:0);return h.length>1||h[0]||ve(x,E)?(uo(r.doc,h,x,E,"+input"),!0):void 0},Fa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fa.prototype.reset=function(){this.forceCompositionEnd()},Fa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Fa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Kr(this.cm,function(){return Jr(e.cm)})},Fa.prototype.setUneditable=function(e){e.contentEditable="false"},Fa.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yr(this.cm,Pa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Fa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Fa.prototype.onContextMenu=function(){},Fa.prototype.resetPosition=function(){},Fa.prototype.needsContentAttribute=!0;var Va=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};Va.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ot(r,e)){if(r.somethingSelected())Na({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Oa(r);Na({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,W):(n.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),tt(i,"input",function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),tt(i,"paste",function(e){ot(r,e)||Aa(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),tt(i,"cut",o),tt(i,"copy",o),tt(e.scroller,"paste",function(t){kn(e,t)||ot(r,t)||(r.state.pasteIncoming=!0,n.focus())}),tt(e.lineSpace,"selectstart",function(t){kn(e,t)||ct(t)}),tt(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),tt(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Va.prototype.createField=function(e){this.wrapper=Ia(),this.textarea=this.wrapper.firstChild},Va.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=hr(e);if(e.options.moveInputWithCursor){var i=Kn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Va.prototype.showSelection=function(e){var t=this.cm,n=t.display;N(n.cursorDiv,e.cursors),N(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Va.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&R(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Va.prototype.getField=function(){return this.textarea},Va.prototype.supportsTouch=function(){return!1},Va.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||O()!=this.textarea))try{this.textarea.focus()}catch(wt){}},Va.prototype.blur=function(){this.textarea.blur()},Va.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Va.prototype.receivedFocus=function(){this.slowPoll()},Va.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Va.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Va.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Et(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Kr(t,function(){Pa(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Va.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Va.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Va.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea,o=lr(n,e),c=r.scroller.scrollTop;if(o&&!h){var u=n.options.resetSelectionOnContextMenu;u&&-1==n.doc.sel.contains(o)&&Yr(n,Yi)(n.doc,xi(o),W);var d=i.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var f,m=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(f=window.scrollY),r.input.focus(),l&&window.scrollTo(null,f),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&v(),k){dt(e);var g=function(){rt(window,"mouseup",g),setTimeout(b,20)};tt(window,"mouseup",g)}else setTimeout(b,50)}function v(){if(null!=i.selectionStart){var e=n.somethingSelected(),o=""+(e?i.value:"");i.value="",i.value=o,t.prevInput=e?"":"",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function b(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=p,i.style.cssText=d,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart){(!a||a&&s<9)&&v();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&""==t.prevInput?Yr(n,ro)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Va.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Va.prototype.setUneditable=function(){},Va.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=ba&&i(e,t,n)}:i)}e.defineOption=n,e.Init=ba,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Ti(e)},!0),n("indentUnit",2,Ti,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){_i(e),$n(e),Jr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(ge(r,o))}r++});for(var i=n.length-1;i>=0;i--)uo(e.doc,t,n[i],ge(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ba&&e.refresh()}),n("specialCharPlaceholder",Zt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){va(e),xa(e)},!0),n("keyMap","default",function(e,t,n){var r=qo(t),i=n!=ba&&qo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ka,!0),n("gutters",[],function(e){di(e.options),xa(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?or(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Fr(e)},!0),n("scrollbarStyle","native",function(e){Ur(e),Fr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){di(e.options),xa(e)},!0),n("firstLineNumber",1,xa,!0),n("lineNumberFormatter",function(e){return e},xa,!0),n("showCursorWhenSelecting",!1,ur,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(yr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,Ea),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,ur,!0),n("singleCursorHeightPerLine",!0,ur,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,_i,!0),n("addModeClass",!1,_i,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,_i,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(Sa),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Yr(this,t[e])(this,n,i),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Xr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Jr(this)}),removeOverlay:Xr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Jr(this)}}),indentLine:Xr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),fe(this.doc,e)&&Ta(this,e,t,n)}),indentSelection:Xr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ta(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&_r(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Ta(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&qi(this.doc,r,new yi(o,c[r].to()),W)}}}),getTokenAt:function(e,t){return Bt(this,e,t)},getLineTokens:function(e,t){return Bt(this,ge(e),t,!0)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t,n=jt(this,le(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=i[o[t][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==U(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return Ht(this,(e=Ee(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Kn(this,null==e?n.head:"object"==typeof e?ke(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){return Qn(this,(e=qn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=qn(this,{top:e,left:0},t||"page").top,pe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=le(this.doc,e)}else r=e;return zn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ge(r):0)},defaultTextHeight:function(){return nr(this.display)},defaultCharWidth:function(){return rr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,a,s,l=this.display,c=(e=Kn(this,ke(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>d&&(u=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(o=this,a={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(s=Cr(o,a)).scrollTop&&Lr(o,s.scrollTop),null!=s.scrollLeft&&Mr(o,s.scrollLeft))},triggerOnKeyDown:Xr(aa),triggerOnKeyPress:Xr(la),triggerOnKeyUp:sa,triggerOnMouseDown:Xr(da),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:Xr(function(e){La(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=ke(this.doc,e),a=0;a<t&&!(o=Ra(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Xr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Ra(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},z)}),deleteH:Xr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Go(this,function(n){var i=Ra(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=ke(this.doc,e),s=0;s<t;++s){var l=Kn(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Da(this,l,i,n)).hitSide)break}return a},moveV:Xr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=Kn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Da(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Tr(n,Gn(n,l,"div").top-s.top),l},z),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,n=le(t,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=n.length||!r?++i:--r;for(var a=n.charAt(r),s=te(a,o)?function(e){return te(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new yi(ge(e.line,r),ge(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?M(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr(function(e,t){Nr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-_n(this)-this.display.barHeight,width:e.scrollWidth-_n(this)-this.display.barWidth,clientHeight:Pn(this),clientWidth:Nn(this)}},scrollIntoView:Xr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ge(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Pr(e),e.curOp.scrollToPos=t}(this,e):Ar(this,e.from,e.to,e.margin)}),setSize:Xr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Un(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Zr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return Kr(this,e)},startOperation:function(){return Vr(this)},endOperation:function(){return Wr(this)},refresh:Xr(function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,$n(this),Nr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this),(null==e||Math.abs(e-nr(this.display))>.5)&&sr(this),it(this,"refresh",this)}),swapDoc:Xr(function(e){var t=this.doc;return t.cm=null,Li(this,e),$n(this),this.display.input.reset(),Nr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lt(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Sa);var Wa="iter insert remove copy getEditor constructor".split(" ");for(var Ba in _o.prototype)_o.prototype.hasOwnProperty(Ba)&&U(Wa,Ba)<0&&(Sa.prototype[Ba]=function(e){return function(){return e.apply(this.doc,arguments)}}(_o.prototype[Ba]));return lt(_o),Sa.inputStyles={textarea:Va,contenteditable:Fa},Sa.defineMode=function(e){Sa.defaults.mode||"null"==e||(Sa.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ct[e]=t}.apply(this,arguments)},Sa.defineMIME=function(e,t){Tt[e]=t},Sa.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Sa.defineMIME("text/plain","null"),Sa.defineExtension=function(e,t){Sa.prototype[e]=t},Sa.defineDocExtension=function(e,t){_o.prototype[e]=t},Sa.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=O();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(wt){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(rt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var s=Sa(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=rt,e.on=tt,e.wheelEventPixels=gi,e.Doc=_o,e.splitLines=xt,e.countColumn=j,e.findColumn=q,e.isWordChar=ee,e.Pass=V,e.signal=it,e.Line=Gt,e.changeEnd=Ei,e.scrollbarModel=Hr,e.Pos=ge,e.cmpPos=ve,e.modes=Ct,e.mimeModes=Tt,e.resolveMode=_t,e.getMode=Nt,e.modeExtensions=Pt,e.extendMode=At,e.copyState=Lt,e.startState=Mt,e.innerMode=Ot,e.commands=Qo,e.keyMap=Ho,e.keyName=zo,e.isModifierKey=Wo,e.lookupKey=Vo,e.normalizeKeyMap=$o,e.StringStream=It,e.SharedTextMarker=ko,e.TextMarker=xo,e.LineWidget=bo,e.e_preventDefault=ct,e.e_stopPropagation=ut,e.e_stop=dt,e.addClass=M,e.contains=L,e.rmClass=T,e.keyNames=Ro}(Sa),Sa.version="5.41.0",Sa}()});const gf={indentLess:"Indent less.",indentMore:"Indent more."},vf=mf.keyMap.default==mf.keyMap.macDefault,bf=[["Shift-Enter","Run the current cell."],[vf?"Alt-Tab":"Alt-Shift-Down","Focus the next cell."],[vf?"Alt-Shift-Tab":"Alt-Shift-Up","Focus the previous cell."],[vf?"Cmd-/":"Ctrl-/","Comment or uncomment."],["Alt-Enter","Split the current cell, focusing the cell after."],["Alt-Shift-Enter","Split the current cell, focusing the cell before."],[vf?"Cmd-Alt-Up":"Ctrl-Shift-Up","Move the current cell up."],[vf?"Cmd-Alt-Down":"Ctrl-Shift-Down","Move the current cell down."],["Alt-Backspace","Merge the current cell into the previous cell."],["Ctrl-Alt-D","Merge the current cell into the next cell."],["Ctrl-Shift-P","Pin or unpin the current cell."],["Tab","Indent more, or auto-complete."],["Shift-Tab","Indent automatically."],["Ctrl-Alt-Tab","Insert a Tab character."],["Escape","Blur the current cell."]].concat(Object.entries(mf.keyMap.default).map(([e,t])=>gf[t]&&[e,gf[t]])).filter(Boolean);function yf({onDismiss:e}){return G.createElement("div",{className:"relative"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("h4",{className:"mt0 mb3 f3 fw7 black"},"Keyboard Shortcuts"),G.createElement("table",{className:"w-100 f7 fw4 black-70 collapse"},G.createElement("tbody",null,bf.map(([e,t],n)=>G.createElement("tr",{key:n,className:0==n?"":"bt b--black-10"},G.createElement("td",{className:"v-top pv2 pr3 nowrap"},df(e)),G.createElement("td",{className:"v-top pv2 nowrap"},pf(e)),G.createElement("td",{className:"v-top pv2 pl3"},t))))),G.createElement("div",{className:"mt3 f6 lh-copy"},"See the full"," ",G.createElement("a",{className:"no-underline blue hover-dark-blue link",href:"/@observablehq/keyboard-shortcuts",target:"_blank"},"list of keyboard shortcuts"),"."))}function wf(e){if(2===e.length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e.map((e,t)=>G.isValidElement(e)?G.cloneElement(e,{key:t}):e)}const xf={asyncGenerator:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-async-iteration"},"Async Iterators"),bigInt:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-bigint"},"BigInt"),dynamicImport:G.createElement("a",{className:"no-underline black-70 hover-blue",href:"https://github.com/tc39/proposal-dynamic-import"},"Dynamic import")},Ef=G.memo(function({cells:e,platformSupport:t}){if(!e)return null;const n=new Set;for(let i of e)for(let e in i.features)n.add(e);let r=t.filter(({name:e,support:t})=>n.has(e)&&!t).map(({name:e})=>xf[e]);return r.length?G.createElement("div",{className:"flex items-start pa3 mt3 f6 fw4 black-70 bg-washed-yellow br2"},G.createElement(Pu,{className:"w1 h1 ma1",style:{strokeWidth:1,flexShrink:"0"}}),G.createElement("div",{className:"mr2 lh-copy"},G.createElement("div",{className:"mb1 b"},"This notebook uses features that arent supported by your browser. It may not display correctly."),G.createElement("div",{className:"black-50"},"Feature",1===r.length?"":"s",": ",wf(r)))):null});function kf(e){return 1===e.lineCount()&&""===e.getLine(0)}function Sf(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function Cf(e){Sf(e);const t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.style.direction=e.getOption("direction"),t.className="CodeMirror-placeholder",t.textContent=e.getOption("placeholder"),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function Tf(e){kf(e)&&Cf(e)}function _f(e){kf(e)?Cf(e):Sf(e)}mf.defineOption("placeholder","",function(e,t,n){const r=n&&n!=mf.Init;t?(r||(e.on("blur",Tf),e.on("change",_f),e.on("swapDoc",_f)),_f(e),e.hasFocus()||Tf(e)):r&&(e.off("blur",Tf),e.off("change",_f),e.off("swapDoc",_f),Sf(e))});const Nf=mf.Pos,Pf={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function Af(e,t,n){let r=e.getLineHandle(t.line),i=t.ch-1,o=n&&n.afterCursor;null==o&&(o=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));let a=!o&&i>=0&&Pf[r.text.charAt(i)]||Pf[r.text.charAt(++i)];if(!a)return null;let s=">"==a.charAt(1)?1:-1;if(n&&n.strict&&s>0!=(i==t.ch))return null;let l=e.getTokenTypeAt(Nf(t.line,i+1)),c=Lf(e,Nf(t.line,i+(s>0?1:0)),s,l||null,n);return null==c?null:{from:Nf(t.line,i),to:c&&c.pos,match:c&&c.ch==a.charAt(0),forward:s>0}}function Lf(e,t,n,r,i){let o=i&&i.maxScanLineLength||1e4,a=i&&i.maxScanLines||1e3;const s=[],l=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,c=n>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a);let u;for(u=t.line;u!=c;u+=n){let i=e.getLine(u);if(!i)continue;let a=n>0?0:i.length-1,c=n>0?i.length:-1;if(!(i.length>o))for(u==t.line&&(a=t.ch-(n<0?1:0));a!=c;a+=n){const t=i.charAt(a);if(l.test(t)&&(void 0===r||e.getTokenTypeAt(Nf(u,a+1))==r)){if(">"==Pf[t].charAt(1)==n>0)s.push(t);else{if(!s.length)return{pos:Nf(u,a),ch:t};s.pop()}}}}return u-n!=(n>0?e.lastLine():e.firstLine())&&null}function Of(e,t,n){const r=e.state.matchBrackets.maxHighlightLineLength||1e3;let i=[],o=e.listSelections();for(let a=0;a<o.length;a++){let t=o[a].empty()&&Af(e,o[a].head,n);if(t&&e.getLine(t.from.line).length<=r){const n=t.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";i.push(e.markText(t.from,Nf(t.from.line,t.from.ch+1),{className:n})),t.to&&e.getLine(t.to.line).length<=r&&i.push(e.markText(t.to,Nf(t.to.line,t.to.ch+1),{className:n}))}}if(i.length){const n=function(){e.operation(function(){for(let e=0;e<i.length;e++)i[e].clear()})};if(!t)return n;setTimeout(n,800)}}let Mf=null;function If(e){e.operation(function(){Mf&&(Mf(),Mf=null),Mf=Of(e,!1,e.state.matchBrackets)})}mf.defineOption("matchBrackets",!1,function(e,t,n){n&&n!=mf.Init&&(e.off("cursorActivity",If),Mf&&(Mf(),Mf=null)),t&&(e.state.matchBrackets="object"==typeof t?t:{},e.on("cursorActivity",If))}),mf.defineExtension("matchBrackets",function(){Of(this,!0)}),mf.defineExtension("findMatchingBracket",function(e,t){return Af(this,e,t)}),mf.defineExtension("scanForBracket",function(e,t,n,r){return Lf(this,e,t,n,r)});let Rf={pairs:"()[]{}''\"\"``",triples:"",explode:"[]{}"};const Df=mf.Pos;function Ff(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:Rf[t]}mf.defineOption("autoClosePairs",!1,function(e,t,n){n&&n!=mf.Init&&(e.removeKeyMap(jf),e.state.closePairs=null),t&&(Hf(Ff(t,"pairs")),e.state.closePairs=t,e.addKeyMap(jf))});const jf={Backspace:function(e){let t=$f(e);if(!t||e.getOption("disableInput"))return mf.Pass;let n=Ff(t,"pairs"),r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return mf.Pass;let t=Wf(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return mf.Pass}for(let i=r.length-1;i>=0;i--){let t=r[i].head;e.replaceRange("",Df(t.line,t.ch-1),Df(t.line,t.ch+1),"+delete")}},Enter:function(e){let t=$f(e),n=t&&Ff(t,"explode");if(!n||e.getOption("disableInput"))return mf.Pass;let r=e.listSelections();for(let i=0;i<r.length;i++){if(!r[i].empty())return mf.Pass;let t=Wf(e,r[i].head);if(!t||n.indexOf(t)%2!=0)return mf.Pass}e.operation(function(){let t=e.lineSeparator()||"\n";e.replaceSelection(t+t,null),e.execCommand("goCharLeft"),r=e.listSelections();for(let n=0;n<r.length;n++){let t=r[n].head.line;e.indentLine(t,null,!0),e.indentLine(t+1,null,!0)}})}};function Hf(e){for(let t=0;t<e.length;t++){let n=e.charAt(t),r="'"+n+"'";jf[r]||(jf[r]=Uf(n))}}function Uf(e){return function(t){return function(e,t){let n=$f(e);if(!n||e.getOption("disableInput"))return mf.Pass;let r=Ff(n,"pairs"),i=r.indexOf(t);if(-1==i)return mf.Pass;let o,a=Ff(n,"triples"),s=r.charAt(i+1)==t,l=e.listSelections(),c=i%2==0;for(let d=0;d<l.length;d++){let n,r=l[d],i=r.head,u=e.getRange(i,Df(i.line,i.ch+1));if(c&&!r.empty())n="surround";else if(!s&&c||u!=t)if(s&&i.ch>1&&a.indexOf(t)>=0&&e.getRange(Df(i.line,i.ch-2),i)==t+t){if(i.ch>2&&/\bstring/.test(e.getTokenTypeAt(Df(i.line,i.ch-2))))return mf.Pass;n="addFour"}else if(s){let r=0==i.ch?" ":e.getRange(Df(i.line,i.ch-1),i);if(mf.isWordChar(u)||r==t||mf.isWordChar(r))return mf.Pass;n="both"}else{if(!c)return mf.Pass;n="both"}else n=s&&Bf(e,i)?"both":a.indexOf(t)>=0&&e.getRange(i,Df(i.line,i.ch+3))==t+t+t?"skipThree":"skip";if(o){if(o!=n)return mf.Pass}else o=n}let u=i%2?r.charAt(i-1):t,h=i%2?t:r.charAt(i+1);e.operation(function(){if("skip"==o)e.execCommand("goCharRight");else if("skipThree"==o)for(let t=0;t<3;t++)e.execCommand("goCharRight");else if("surround"==o){let t=e.getSelections();for(let e=0;e<t.length;e++)t[e]=u+t[e]+h;e.replaceSelections(t,"around"),t=e.listSelections().slice();for(let e=0;e<t.length;e++)t[e]=Vf(t[e]);e.setSelections(t)}else"both"==o?(e.replaceSelection(u+h,null),e.triggerElectric(u+h),e.execCommand("goCharLeft")):"addFour"==o&&(e.replaceSelection(u+u+u+u,"before"),e.execCommand("goCharRight"))})}(t,e)}}function $f(e){let t=e.state.closePairs;return!t||t.override?t:e.getModeAt(e.getCursor()).closePairs||t}function Vf(e){let t=mf.cmpPos(e.anchor,e.head)>0;return{anchor:new Df(e.anchor.line,e.anchor.ch+(t?-1:1)),head:new Df(e.head.line,e.head.ch+(t?1:-1))}}function Wf(e,t){const n=e.getRange(Df(t.line,t.ch-1),Df(t.line,t.ch+1));return 2==n.length?n:null}function Bf(e,t){let n=e.getTokenAt(Df(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}Hf(Rf.pairs+"`");const zf=33,qf=17,Gf=17,Kf=new Set(["INPUT","SELECT","TEXTAREA"]),Yf=new Set(["DOM.canvas","DOM.context2d","DOM.download","DOM.element","DOM.input","DOM.range","DOM.select","DOM.svg","DOM.text","DOM.uid","DOM","Files.buffer","Files.text","Files.url","Files","Generators.disposable","Generators.filter","Generators.input","Generators.map","Generators.observe","Generators.queue","Generators.range","Generators.valueAt","Generators.worker","Generators","html","md","Mutable","now","Promises.delay","Promises.tick","Promises.when","Promises","require","svg","tex","width","Secret","invalidation","tex.block","require.alias","require.resolve","visibility"]),Xf=new Set(["ga","React","ReactDOM","CodeMirror"]),Qf=new Set(Object.getOwnPropertyNames(window).filter(e=>{try{return!/^webkit/i.test(e)&&!Xf.has(e)&&null!=window[e]}catch(t){return!1}})),Jf=mf.Pos,Zf="charAt charCodeAt indexOf lastIndexOf substring substr slice\n trim trimLeft trimRight toUpperCase toLowerCase split concat match replace\n search".split(/\s+/),em="length concat join splice push pop shift unshift slice reverse\n  sort indexOf lastIndexOf every some filter forEach map reduce\n  reduceRight ".split(/\s+/),tm="prototype apply call bind".split(/\s+/),nm="break case catch class const continue debugger default delete do\n  else extends false finally for function if import in instanceof let new null undefined return super switch\n  this throw true try typeof var void while with yield".split(/\s+/),rm="exec test flags global ignoreCase multiline\n  source sticky unicode".split(/\s+/);let im=0;const om=new Set(["number","string","property"]),am=new Set(["variable-2","regexp"]),sm=new Set([".","[","]"]);async function lm(e,t){const n=e.getCursor();let r=e.getTokenAt(n);if(!/\b(?:string|comment)\b/.test(r.type))return r.state=mf.innerMode(e.getMode(),r.state).state,/^[\w$_]*$/.test(r.string)?r.end>n.ch&&(r.end=n.ch,r.string=r.string.slice(0,n.ch-r.start)):r={start:n.ch,end:n.ch,string:"",state:r.state,type:"."==r.string?"property":null},{list:await async function(e,t,n,r){const{cellNames:i,localVars:o}=e.state,a=new Set,s=e.string;function l(e){e.startsWith(s)&&a.add(e)}if(t.length){let o=new Set([]);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)o.add(e.name);let c,u=t.pop();if(u.type&&u.type.startsWith("variable")){if(Qf.has(u.string)&&"window"!==u.string&&(c=window[u.string]),Yf.has(u.string)&&!t.length)for(let e of Yf)e.startsWith(`${u.string}.${s}`)&&a.add(e.split(".")[1]);if(o.has(u.string))!function(){for(let e=0;e<r.lineCount();e++)for(let t of r.getLineTokens(e))"property"===t.type&&l(t.string)}();else if(i.has(u.string)){const{list:e,nonce:r}=await n({nonce:im,name:u.string,path:t.map(e=>"string"===e.type?e.string.substring(1,e.string.length-1):"number"===e.type?+e.string:e.string).reverse(),prefix:s});if(im===r)for(let t of e)a.add(t);im++}}else"string"==u.type||"string-2"===u.type?c="":"atom"==u.type?c=1:"regexp"==u.type&&(c=/a/);for(;null!=c&&t.length;)c=c[t.pop().string];null!=c&&function(e){"string"==typeof e?Zf.forEach(l):e instanceof RegExp?rm.forEach(l):e instanceof Array?em.forEach(l):e instanceof Function&&tm.forEach(l);for(let t=e;t;t=Object.getPrototypeOf(t))Object.getOwnPropertyNames(t).forEach(l)}(c)}else if(s){for(let e=o;e;e=e.next)l(e.name);for(let t=e.state.context;t;t=t.prev)for(let e=t.vars;e;e=e.next)l(e.name);for(let e of[i,Yf,Qf,nm])for(let t of e)t.startsWith(s)&&a.add(t)}return a.delete(s),Array.from(a)}(r,function(e,t,n){let r=!1,i=t.getLineTokens(n);const o=[],a=i.findIndex(t=>t.end===e);if(-1===a||"."!==i[a].string)return o;for(let s=a;s>=0;s--){if(/^\s*$/.test(i[s].string));else if(sm.has(i[s].string)){if("]"===i[s].string&&(r=!0),"["===i[s].string){if(!r)return[];r=!1}}else{if(!om.has(i[s].type))return am.has(i[s].type)?r?[]:(o.push(i[s]),o):r?[]:o;o.push(i[s])}0==i[s].start&&n&&(s=(i=t.getLineTokens(--n)).length)}return o}(r.start,e,n.line),t,e),from:Jf(n.line,r.start),to:Jf(n.line,r.end)}}const cm="code f7 black-70 pointer nowrap pa1 ma0 hover-bg-light-gray hover-black",um="bg-blue hover-bg-blue white hover-white";class hm{constructor(e,t){qc(this,"options",{completeSingle:!0,closeCharacters:/[\s()\[\]{};:>,]/}),this.cm=e,this.workerAutocomplete=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=e.getCursor("start"),this.startLen=e.getLine(this.startPos.line).length-e.getSelection().length,e.on("cursorActivity",this.activityFunc=(()=>{this.cursorActivity()}))}close(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&mf.signal(this.data,"close"),this.widget&&this.widget.close(),mf.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive==this}pick(e,t){const n=e.list[t];n.hint?n.hint(this.cm,e,n):this.cm.replaceRange(dm(n),n.from||e.from,n.to||e.to,"complete"),mf.signal(e,"pick",n),this.close()}cursorActivity(){this.debounce&&(cancelAnimationFrame(this.debounce),this.debounce=0);let e=this.cm.getCursor(),t=this.cm.getLine(e.line);e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1))?this.close():(this.debounce=requestAnimationFrame(()=>{this.update()}),this.widget&&this.widget.disable())}async update(e){if(null==this.tick)return;const t=++this.tick,n=await lm(this.cm,this.workerAutocomplete);return this.tick==t&&this.finishUpdate(n,e),n}finishUpdate(e,t){this.data&&mf.signal(this.data,"update");const n=this.widget&&this.widget.picked||t&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new fm(this,e),mf.signal(e,"shown")))}}function dm(e){return"string"==typeof e?e:e.text}function pm(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}class fm{constructor(e,t){this.completion=e,this.data=t,this.picked=!1;const{cm:n}=e,r=this.hints=document.createElement("ul");r.style.maxHeight="20em",r.className="bg-white br2 pa0 ma0 absolute overflow-y-scroll overflow-x-hidden shadow-2 ba b--black-10 z-999",this.selectedHint=t.selectedHint||0;const{list:i}=t;for(let v=0;v<i.length;++v){let e=r.appendChild(document.createElement("li")),n=i[v],o=cm+(v!=this.selectedHint?"":" "+um);null!=n.className&&(o=`${n.className} ${o}`),e.className=o,n.render?n.render(e,t,n):e.appendChild(document.createTextNode(n.displayText||dm(n))),e.hintId=v}let o=n.cursorCoords(t.from),a=o.left,s=o.bottom,l=!0;r.style.left=a+"px",r.style.top=s+"px";let c=window.innerWidth,u=window.innerHeight;document.body.appendChild(r);let h=r.getBoundingClientRect(),d=h.bottom-u,p=r.scrollHeight>r.clientHeight+1,f=n.getScrollInfo();if(d>0){let e=h.bottom-h.top;if(o.top-(o.bottom-h.top)-e>0)r.style.top=(s=o.top-e)+"px",l=!1;else if(e>u){r.style.height=u-5+"px",r.style.top=(s=o.bottom-h.top)+"px";const e=n.getCursor();t.from.ch!=e.ch&&(o=n.cursorCoords(e),r.style.left=(a=o.left)+"px",h=r.getBoundingClientRect())}}let m,g=h.right-c;if(g>0&&(h.right-h.left>c&&(r.style.width=c-5+"px",g-=h.right-h.left-c),r.style.left=(a=o.left-g)+"px"),p)for(let v=r.firstChild;v;v=v.nextSibling)v.style.paddingRight=n.display.nativeBarWidth+"px";n.addKeyMap(this.keyMap=function(e,t){const n=()=>t.moveFocus(-1);return{Up:n,"Shift-Tab":n,Down:()=>t.moveFocus(1),Tab:t.pick,PageUp(){t.moveFocus(1-t.menuSize(),!0)},PageDown(){t.moveFocus(t.menuSize()-1,!0)},Home(){t.setFocus(0)},End(){t.setFocus(t.length-1)},Enter:t.pick,Esc:t.close}}(0,{moveFocus:(e,t)=>{this.changeActive(this.selectedHint+e,t)},setFocus:e=>{this.changeActive(e)},menuSize:()=>this.screenAmount(),length:i.length,close:function(){e.close()},pick:()=>{this.pick()},data:t})),n.on("blur",this.onBlur=function(){m=setTimeout(function(){e.close()},100)}),n.on("focus",this.onFocus=function(){clearTimeout(m)}),n.on("scroll",this.onScroll=function(){let t=n.getScrollInfo(),i=n.getWrapperElement().getBoundingClientRect(),o=s+f.top-t.top,c=o-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(l||(c+=r.offsetHeight),c<=i.top||c>=i.bottom)return e.close();r.style.top=o+"px",r.style.left=a+f.left-t.left+"px"}),mf.on(r,"dblclick",e=>{const t=pm(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),mf.on(r,"click",e=>{const t=pm(r,e.target||e.srcElement);t&&null!=t.hintId&&(this.changeActive(t.hintId),this.pick())}),mf.on(r,"mousedown",function(){setTimeout(function(){n.focus()},20)}),mf.signal(t,"select",i[this.selectedHint],r.childNodes[this.selectedHint])}close(){if(this.completion.widget!=this)return;this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);const{cm:e}=this.completion;e.off("blur",this.onBlur),e.off("focus",this.onFocus),e.off("scroll",this.onScroll)}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>{this.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(e,t){if(e>=this.data.list.length?e=t?this.data.list.length-1:0:e<0&&(e=t?0:this.data.list.length-1),this.selectedHint==e)return;let n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+um,""),(n=this.hints.childNodes[this.selectedHint=e]).className+=" "+um,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),mf.signal(this.data,"select",this.data.list[this.selectedHint],n)}screenAmount(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}const{Pos:mm}=mf;let gm={cm:null,selections:[]};function vm(e,t){return e.line-t.line||e.ch-t.ch}function bm(e){const t=gm.selections.map(e=>e.text);e.listSelections().length===t.length?e.replaceSelections(t):e.replaceSelection(t.join(e.doc.lineSeparator()))}function ym(e){const t=e.isClean(gm.generation),n={cm:e,generation:null,selections:e.listSelections().map(({anchor:t,head:n})=>{let r=t,i=n;const o=vm(t,n);if(0===o){const t=e.doc.getLine(r.line).length;i=r.ch===t?e.clipPos(mm(r.line+1,0)):mm(r.line,t)}else o>0&&(r=n,i=t);const a=e.getRange(r,i);return e.replaceRange("",r,i,"+delete"),{start:r,text:a}})};gm.cm===e&&t&&gm.selections.length===n.selections.length&&gm.selections.every((e,t)=>0===vm(e.start,n.selections[t].start))?gm.selections.forEach((e,t)=>e.text+=n.selections[t].text):gm=n,gm.generation=e.changeGeneration()}let wm={};const xm=/[^\s\u00a0]/;let Em=mf.Pos;function km(e){let t=e.search(xm);return-1==t?0:t}function Sm(e){e.toggleComment({indent:!0})}function Cm(e,t){const n=e.getMode();return!1!==n.useInnerComments&&n.innerMode?e.getModeAt(t):n}function Tm({anchor:e,head:t}){return{anchor:this.posFromIndex(e),head:this.posFromIndex(t)}}function _m({anchor:e,head:t}){return{anchor:this.indexFromPos(e),head:this.indexFromPos(t)}}function Nm(e){e.preventDefault()}mf.commands.toggleComment=function(e){e.toggleComment()},mf.defineExtension("toggleComment",function(e){e||(e=wm);let t=this,n=1/0,r=this.listSelections(),i=null;for(let o=r.length-1;o>=0;o--){let a=r[o].from(),s=r[o].to();a.line>=n||(s.line>=n&&(s=Em(n,0)),n=a.line,null==i?t.uncomment(a,s,e)?i="un":(t.lineComment(a,s,e),i="line"):"un"==i?t.uncomment(a,s,e):t.lineComment(a,s,e))}}),mf.defineExtension("lineComment",function(e,t,n){n||(n=wm);let r=this,i=Cm(r,e),o=r.getLine(e.line);if(null==o||(a=e,s=o,/\bstring\b/.test(r.getTokenTypeAt(Em(a.line,0)))&&!/^[\'\"\`]/.test(s)))return;var a,s;let l=n.lineComment||i.lineComment;if(!l)return void((n.blockCommentStart||i.blockCommentStart)&&(n.fullLines=!0,r.blockComment(e,t,n)));let c=Math.min(0!=t.ch||t.line==e.line?t.line+1:t.line,r.lastLine()+1),u=null==n.padding?" ":n.padding,h=n.commentBlankLines||e.line==t.line;r.operation(function(){let t;if(n.indent){let n=null;for(t=e.line;t<c;++t){let e=r.getLine(t),i=e.slice(0,km(e));(null==n||n.length>i.length)&&(n=i)}for(t=e.line;t<c;++t){let e=r.getLine(t),i=n.length;(h||xm.test(e))&&(e.slice(0,i)!=n&&(i=km(e)),r.replaceRange(n+l+u,Em(t,0),Em(t,i)))}}else for(t=e.line;t<c;++t)(h||xm.test(r.getLine(t)))&&r.replaceRange(l+u,Em(t,0))})}),mf.defineExtension("blockComment",function(e,t,n){n||(n=wm);let r=this,i=Cm(r,e),o=n.blockCommentStart||i.blockCommentStart,a=n.blockCommentEnd||i.blockCommentEnd;if(!o||!a)return void((n.lineComment||i.lineComment)&&0!=n.fullLines&&r.lineComment(e,t,n));if(/\bcomment\b/.test(r.getTokenTypeAt(Em(e.line,0))))return;let s=Math.min(t.line,r.lastLine());s!=e.line&&0==t.ch&&xm.test(r.getLine(s))&&--s;const l=null==n.padding?" ":n.padding;e.line>s||r.operation(function(){if(0!=n.fullLines){let t=xm.test(r.getLine(s));r.replaceRange(l+a,Em(s)),r.replaceRange(o+l,Em(e.line,0));let c=n.blockCommentLead||i.blockCommentLead;if(null!=c)for(let n=e.line+1;n<=s;++n)(n!=s||t)&&r.replaceRange(c+l,Em(n,0))}else r.replaceRange(a,t),r.replaceRange(o,e)})}),mf.defineExtension("uncomment",function(e,t,n){n||(n=wm);let r=this,i=Cm(r,e),o=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,r.lastLine()),a=Math.min(e.line,o);const s=n.lineComment||i.lineComment,l=[];let c,u=null==n.padding?" ":n.padding;e:if(s){for(let e=a;e<=o;++e){let t=r.getLine(e),n=t.indexOf(s);if(n>-1&&!/comment/.test(r.getTokenTypeAt(Em(e,n+1)))&&(n=-1),-1==n&&xm.test(t))break e;if(n>-1&&xm.test(t.slice(0,n)))break e;l.push(t)}if(r.operation(function(){for(let e=a;e<=o;++e){let t=l[e-a],n=t.indexOf(s),i=n+s.length;n<0||(t.slice(i,i+u.length)==u&&(i+=u.length),c=!0,r.replaceRange("",Em(e,n),Em(e,i)))}}),c)return!0}let h=n.blockCommentStart||i.blockCommentStart,d=n.blockCommentEnd||i.blockCommentEnd;if(!h||!d)return!1;let p=n.blockCommentLead||i.blockCommentLead,f=r.getLine(a),m=f.indexOf(h);if(-1==m)return!1;let g=o==a?f:r.getLine(o),v=g.indexOf(d,o==a?m+h.length:0);-1==v&&a!=o&&(g=r.getLine(--o),v=g.indexOf(d));let b=Em(a,m+1),y=Em(o,v+1);if(-1==v||!/comment/.test(r.getTokenTypeAt(b))||!/comment/.test(r.getTokenTypeAt(y))||r.getRange(b,y,"\n").indexOf(d)>-1)return!1;let w=f.lastIndexOf(h,e.ch),x=-1==w?-1:f.slice(0,e.ch).indexOf(d,w+h.length);if(-1!=w&&-1!=x&&x+d.length!=e.ch)return!1;x=g.indexOf(d,t.ch);let E=g.slice(t.ch).lastIndexOf(h,x-t.ch);return w=-1==x||-1==E?-1:t.ch+E,(-1==x||-1==w||w==t.ch)&&(r.operation(function(){r.replaceRange("",Em(o,v-(u&&g.slice(v-u.length,v)==u?u.length:0)),Em(o,v+d.length));let e=m+h.length;if(u&&f.slice(e,e+u.length)==u&&(e+=u.length),r.replaceRange("",Em(a,m),Em(a,e)),p)for(let t=a+1;t<=o;++t){let e=r.getLine(t),n=e.indexOf(p);if(-1==n||xm.test(e.slice(0,n)))continue;let i=n+p.length;u&&e.slice(i,i+u.length)==u&&(i+=u.length),r.replaceRange("",Em(t,n),Em(t,i))}}),!0)}),mf.defineDocExtension("getLength",function(){let e=this.lineSeparator().length,t=-e;return this.iter(n=>{t+=n.text.length+e}),t}),mf.defineExtension("getCursorIndex",function(){return this.indexFromPos(this.getCursor())}),mf.defineExtension("setCursorIndex",function(e){return this.setCursor(this.posFromIndex(e))}),mf.defineDocExtension("setSelectionIndexes",function(e,t,n){return this.setSelections(e.map(Tm,this),t,n)}),mf.defineDocExtension("listSelectionIndexes",function(){return this.listSelections().map(_m,this)}),mf.defineMode("r-javascript",function(e,t){const n=e.indentUnit,r=t.statementIndent,i=t.wordCharacters||/[\w$\xa1-\uffff]/,o=t.cellNames||new Set;let a;{function s(e){return{type:e,style:"keyword"}}const e=s("keyword a"),t=s("keyword b"),n=s("keyword c"),r=s("operator"),i={type:"atom",style:"atom"};a=new Map([["if",s("if")],["while",e],["with",s("with")],["else",t],["do",t],["try",t],["finally",t],["return",n],["break",n],["continue",n],["new",s("new")],["delete",n],["throw",n],["debugger",n],["var",s("var")],["const",s("var")],["let",s("var")],["function",s("function")],["catch",s("catch")],["for",s("for")],["switch",s("switch")],["case",s("case")],["default",s("default")],["in",r],["typeof",r],["instanceof",r],["true",i],["false",i],["null",i],["undefined",i],["NaN",i],["Infinity",i],["this",s("this")],["class",s("class")],["super",s("atom")],["yield",n],["// export",s("export")],["import",s("import")],["extends",n],["await",n],["viewof",s("viewof")],["mutable",s("mutable")]])}var l,c,u=/[+\-*&%=<>!?|~^@]/;function h(e,t,n){return l=e,c=n,t}function d(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){for(var r,i=!1;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=d),h("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return h("number","number");if("."==r&&e.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return h(r);if("="==r&&e.eat(">"))return h("=>","operator");if("0"==r&&e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return h("number","number");if(/\d/.test(r))return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),h("number","number");if("/"==r)return e.eat("*")?(t.tokenize=p,p(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):Ae(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","regexp")):(e.eat("="),h("operator","operator",e.current()));if("`"==r)return t.tokenize=f,f(e,t);if("#"==r)return e.skipToEnd(),h("error","error");if(u.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),h("operator","operator",e.current());if(i.test(r)){e.eatWhile(i);var o=e.current();if("."!=t.lastType){if(a.has(o)){var s=a.get(o);return h(s.type,s.style,o)}if("async"==o&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",o)}return"sof"!==t.lastType&&"viewof"!==t.lastType&&"mutable"!==t.lastType||!e.match(/\s*=[^=]/,!1)?h("variable","variable",o):h("namedcell","def",o)}}function p(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=d;break}r="*"==n}return h("comment","comment")}function f(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=d;break}r=!r&&"\\"==n}return h("quasi","string-2",e.current())}var m="([{}])";function g(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var r=0,o=!1,a=n-1;a>=0;--a){var s=e.string.charAt(a),l=m.indexOf(s);if(l>=0&&l<3){if(!r){++a;break}if(0==--r){"("==s&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(i.test(s))o=!0;else{if(/["'\/]/.test(s))return;if(o&&!r){++a;break}}}o&&!r&&(t.fatArrowAt=a)}}var v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0};function b(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function y(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var w={state:null,column:null,marked:null,cc:null};function x(){for(var e=arguments.length-1;e>=0;e--)w.cc.push(arguments[e])}function E(){return x.apply(null,arguments),!0}function k(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function S(e){var n=w.state;if(w.marked="def",n.context)if("var"==n.lexical.info&&n.context&&n.context.block){var r=function e(t,n){if(n){if(n.block){var r=e(t,n.prev);return r?r==n.prev?n:new C(r,n.vars,!0):null}return k(t,n.vars)?n:new C(n.prev,new T(t,n.vars),!1)}return null}(e,n.context);if(null!=r)return void(n.context=r)}else if(!k(e,n.localVars))return void(n.localVars=new T(e,n.localVars));t.globalVars&&!k(e,n.globalVars)&&(n.globalVars=new T(e,n.globalVars))}function C(e,t,n){this.prev=e,this.vars=t,this.block=n}function T(e,t){this.name=e,this.next=t}var _=new T("this",new T("arguments",null));function N(){w.state.context=new C(w.state.context,w.state.localVars,!1),w.state.localVars=_}function P(){w.state.context=new C(w.state.context,w.state.localVars,!0),w.state.localVars=null}function A(){w.state.localVars=w.state.context.vars,w.state.context=w.state.context.prev}function L(e,t){var n=function(){var n=w.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new b(r,w.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function O(){var e=w.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function M(e){return function t(n){return n==e?E():";"==e?x():E(t)}}function I(e,t){return"var"==e?E(L("vardef",t),re,M(";"),O):"keyword a"==e?E(L("form"),j,I,O):"keyword b"==e?E(L("form"),I,O):"keyword d"==e?w.stream.match(/^\s*$/,!1)?E():E(L("stat"),U,M(";"),O):"debugger"==e?E(M(";")):"{"==e?E(L("}"),P,ne,O,A):";"==e?E():"if"==e?("else"==w.state.lexical.info&&w.state.cc[w.state.cc.length-1]==O&&w.state.cc.pop()(),E(L("form"),j,I,O,ue)):"function"==e?E(ge):"for"==e?E(L("form"),he,I,O):"class"==e?E(L("form"),ye,O):"variable"==e?E(L("stat"),Y):"switch"==e?E(L("form"),j,M("{"),L("}","switch"),P,ne,O,O,A):"case"==e?E(D,M(":")):"default"==e?E(M(":")):"catch"==e?E(L("form"),N,R,I,O,A):"import"==e?E(L("stat"),Ee,O):"async"==e?E(I):"module"==e?E(L("form"),oe,M("{"),L("}"),ne,O,O):"namedcell"==e?E(L("blockdef",t.length),ie,O):"@"==t?E(D,I):x(L("stat"),D,M(";"),O)}function R(e){if("("==e)return E(ve,M(")"))}function D(e,t){return H(e,t,!1)}function F(e,t){return H(e,t,!0)}function j(e){return"("!=e?x():E(L(")"),D,M(")"),O)}function H(e,t,n){if(w.state.fatArrowAt==w.stream.start){var r=n?q:z;if("("==e)return E(N,L(")"),ee(ve,")"),O,M("=>"),r,A);if("variable"==e)return x(N,oe,M("=>"),r,A)}if("{"===e&&"blockdef"==w.state.lexical.type)return ne(e);var i=n?V:$;return v.hasOwnProperty(e)?E(i):"function"==e?E(ge,i):"class"==e?(w.marked="keyword",E(L("form"),be,O)):"keyword c"==e||"async"==e?E(n?F:D):"("==e?E(L(")"),U,M(")"),O,i):"operator"==e||"spread"==e?E(n?F:D):"["==e?E(L("]"),Pe,O,i):"{"==e?te(Q,"}",null,i):"quasi"==e?x(W,i):"new"==e?E(function(e){return function(t){return"."==t?E(e?K:G):x(e?F:D)}}(n)):"import"==e?E(D):("viewof"==e||"mutable"==e)&&w.cc.length>2?E(D):E()}function U(e){return e.match(/[;\}\)\],]/)?x():x(D)}function $(e,t){return","==e?E(D):V(e,t,!1)}function V(e,t,n){var r=0==n?$:V,i=0==n?D:F;return"=>"==e?E(N,n?q:z,A):"operator"==e?/\+\+|--/.test(t)?E(r):"?"==t?E(D,M(":"),i):E(i):"quasi"==e?x(W,r):";"!=e?"("==e?te(F,")","call",r):"."==e?E(X,r):"["==e?E(L("]"),U,M("]"),O,r):"regexp"==e?(w.state.lastType=w.marked="operator",w.stream.backUp(w.stream.pos-w.stream.start-1),E(i)):void 0:void 0}function W(e,t){return"quasi"!=e?x():"${"!=t.slice(t.length-2)?E(W):E(D,B)}function B(e){if("}"==e)return w.marked="string-2",w.state.tokenize=f,E(W)}function z(e){return g(w.stream,w.state),x("{"==e?I:D)}function q(e){return g(w.stream,w.state),x("{"==e?I:F)}function G(e,t){if("target"==t)return w.marked="keyword",E($)}function K(e,t){if("target"==t)return w.marked="keyword",E(V)}function Y(e){return":"==e?E(O,I):x($,M(";"),O)}function X(e){if("variable"==e)return w.marked="property",E()}function Q(e,t){return"async"==e?(w.marked="property",E(Q)):"variable"==e||"keyword"==w.style?(w.marked="property",E("get"==t||"set"==t?J:Z)):"number"==e||"string"==e?(w.marked=w.style+" property",E(Z)):"jsonld-keyword"==e?E(Z):"modifier"==e?E(Q):"["==e?E(D,M("]"),Z):"spread"==e?E(F,Z):":"==e?x(Z):void 0}function J(e){return"variable"!=e?x(Z):(w.marked="property",E(ge))}function Z(e){return":"==e?E(F):"("==e?x(ge):void 0}function ee(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var a=w.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),E(function(n,r){return n==t||r==t?x():x(e)},r)}return i==t||o==t?E():E(M(t))}return function(n,i){return n==t||i==t?E():x(e,r)}}function te(e,t,n){for(var r=3;r<arguments.length;r++)w.cc.push(arguments[r]);return E(L(t,n),ee(e,t),O)}function ne(e){return"}"==e?E():x(I,ne)}function re(){return x(oe,le,ce)}function ie(){return x(function(e,t){if("variable"==e)return S(t),E()},P,function(e,t){if("="==t)return E(D)},A)}function oe(e,t){return"modifier"==e?E(oe):"variable"==e?(S(t),E()):"spread"==e?E(oe):"["==e?te(ae,"]"):"{"==e?te(se,"}"):void 0}function ae(){return x(oe,le)}function se(e,t){return"variable"!=e||w.stream.match(/^\s*:/,!1)?("variable"==e&&(w.marked="property"),"spread"==e?E(oe):"}"==e?x():E(M(":"),oe,le)):(S(t),E(le))}function le(e,t){if("="==t)return E(F)}function ce(e){if(","==e)return E(re)}function ue(e,t){if("keyword b"==e&&"else"==t)return E(L("form","else"),I,O)}function he(e,t){return"await"==t?E(he):"("==e?E(L(")"),de,M(")"),O):void 0}function de(e){return"var"==e?E(re,M(";"),fe):";"==e?E(fe):"variable"==e?E(pe):x(D,M(";"),fe)}function pe(e,t){return"in"==t||"of"==t?(w.marked="keyword",E(D)):E($,fe)}function fe(e,t){return";"==e?E(me):"in"==t||"of"==t?(w.marked="keyword",E(D)):x(D,M(";"),me)}function me(e){")"!=e&&E(D)}function ge(e,t){return"*"==t?(w.marked="keyword",E(ge)):"variable"==e?(S(t),E(ge)):"("==e?E(N,L(")"),ee(ve,")"),O,I,A):void 0}function ve(e){return"spread"==e||"modifier"==e?E(ve):x(oe,le)}function be(e,t){return"variable"==e?ye(e,t):we(e,t)}function ye(e,t){if("variable"==e)return S(t),E(we)}function we(e,t){return"extends"==t||"implements"==t?E(D,we):"{"==e?E(L("}"),xe,O):void 0}function xe(e,t){return"modifier"==e||"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t)&&w.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(w.marked="keyword",E(xe)):"variable"==e?(w.marked="property",E(ge,xe)):"["==e?E(D,M("]"),ge,xe):"*"==t?(w.marked="keyword",E(xe)):";"==e?E(xe):"}"==e?E():"@"==t?E(D,xe):void 0}function Ee(e){return"string"==e?E():"("==e?x(D):x(ke,Te,Se,Ne)}function ke(e,t){return"{"==e?te(ke,"}"):("variable"==e&&S(t),"*"==t&&(w.marked="keyword"),E("mutable"==t||"viewof"==t?ke:_e))}function Se(e,t){if("with"==e)return w.marked="keyword",E(Ce)}function Ce(e,t){return"{"==e?te(Ce,"}"):("*"==t&&(w.marked="keyword"),E(_e))}function Te(e){if(","==e)return E(ke,Te)}function _e(e,t){if("as"==t)return w.marked="keyword",E(ke)}function Ne(e,t){if("from"==t)return w.marked="keyword",E(D)}function Pe(e){return"]"==e?E():x(ee(F,"]"))}function Ae(e,t,n){return t.tokenize==d&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return A.lex=!0,O.lex=!0,{startState:function(e){var r={tokenize:d,lastType:"sof",cc:[],lexical:new b((e||0)-n,0,"block",!1),context:new C(null,null,!1),indented:e||0};return r.cellNames=t.cellNames,r},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),g(e,t)),t.tokenize!=p&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==l?n:(t.lastType="operator"!=l||"++"!=c&&"--"!=c?l:"incdec",function(e,t,n,r,i){var a=e.cc;for(w.state=e,w.stream=i,w.marked=null,w.cc=a,w.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():I)(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return w.marked?w.marked:"variable"==n&&(y(e,r)||Qf.has(r)||Yf.has(r)||o.has(r))?"variable-2":t}}(t,n,l,c,e))},indent:function(e,i){if(e.tokenize==p)return mf.Pass;if(e.tokenize!=d)return 0;var o,a=i&&i.charAt(0),s=e.lexical;if(!/^\s*else\b/.test(i))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==O)s=s.prev;else if(c!=ue)break}for(;("stat"==s.type||"form"==s.type)&&("}"==a||(o=e.cc[e.cc.length-1])&&(o==$||o==V)&&!/^[,\.=+\-*:?[\(]/.test(i));)s=s.prev;r&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var h=s.type,f=a==h;return"vardef"==h||"blockdef"===h?s.indented+("operator"==e.lastType||","==e.lastType?s.info.length+1:0):"form"==h&&"{"==a?s.indented:"form"==h?s.indented+n:"stat"==h?s.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||u.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(e,i)?r||n:0):"switch"!=s.info||f||0==t.doubleIndentSwitch?s.align?s.column+(f?0:1):s.indented+(f?0:n):s.indented+(/^(?:case|default)\b/.test(i)?n:2*n)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:"javascript",expressionAllowed:Ae,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=D&&t!=F||e.cc.pop()}}}),mf.registerHelper("wordChars","javascript",/[\w$]/),mf.defineMIME("application/r-javascript","javascript");const Pm=new Map,Am=[],Lm=Am.map,Om=Am.some,Mm=Am.hasOwnProperty,Im="https://unpkg.com/",Rm=/^((?:@[^\/@]+\/)?[^\/@]+)(?:@([^\/]+))?(?:\/(.*))?$/,Dm=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/;function Fm(e){return"string"==typeof e?e:""}function jm(e){const t=Rm.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Hm(e){const t=`${Im}${e.name}${e.version?`@${e.version}`:""}/package.json`;let n=Pm.get(t);return n||Pm.set(t,n=fetch(t).then(e=>{if(!e.ok)throw new Error("unable to load package.json");return e.redirected&&!Pm.has(e.url)&&Pm.set(e.url,n),e.json()})),n}const Um=function e(t){const n=new Map;const r=o(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(Am.pop()(o(e)))}catch(i){n(new Error("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Error("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Bm,document.head.appendChild(r)})),t}function o(e){return n=>Promise.resolve(t(n,e)).then(i)}function a(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function s(e){return arguments.length>1?Promise.all(Lm.call(arguments,r)).then($m):r(e)}s.alias=function a(e){return function e(t){const n=new Map;const r=o(null);function i(e){if("string"!=typeof e)return e;let t=n.get(e);return t||n.set(e,t=new Promise((t,n)=>{const r=document.createElement("script");r.onload=(()=>{try{t(Am.pop()(o(e)))}catch(i){n(new Error("invalid module"))}r.remove()}),r.onerror=(()=>{n(new Error("unable to load module")),r.remove()}),r.async=!0,r.src=e,window.define=Bm,document.head.appendChild(r)})),t}function o(e){return n=>Promise.resolve(t(n,e)).then(i)}function a(n){return e((e,r)=>e in n&&(e=n[e],r=null,"string"!=typeof e)?e:t(e,r))}function s(e){return arguments.length>1?Promise.all(Lm.call(arguments,r)).then($m):r(e)}s.alias=a;s.resolve=t;return s}((n,r)=>n in e&&(n=e[n],r=null,"string"!=typeof n)?n:t(n,r))};s.resolve=t;return s}(async function(e,t){if(e.startsWith(Im)&&(e=e.substring(Im.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");const n=jm(e);if(!n)return`${Im}${e}`;if(!n.version&&null!=t&&t.startsWith(Im)){const e=await Hm(jm(t.substring(Im.length)));n.version=e.dependencies&&e.dependencies[n.name]||e.peerDependencies&&e.peerDependencies[n.name]}if(n.path&&n.version&&Dm.test(n.version))return`${Im}${n.name}@${n.version}/${n.path}`;const r=await Hm(n);return`${Im}${r.name}@${r.version}/${n.path||Fm(r.unpkg)||Fm(r.browser)||Fm(r.main)||"index.js"}`});function $m(e){const t={};for(const n of e)for(const e in n)Mm.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:Vm(n,e)}):t[e]=n[e]);return t}function Vm(e,t){return()=>e[t]}function Wm(e){return e+""=="exports"}function Bm(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"==typeof e?[]:e),Am.push(Om.call(t,Wm)?e=>{const r={};return Promise.all(Lm.call(t,t=>Wm(t+="")?r:e(t))).then(e=>(n.apply(null,e),r))}:e=>Promise.all(Lm.call(t,e)).then(e=>"function"==typeof n?n.apply(null,e):n))}Bm.amd={};const zm=function(e){return function(t,n){if(n.update){let r=n.text.join("\n"),i=r.length-(t.indexFromPos(n.to)-t.indexFromPos(n.from));if(i<=0)return!0;(i=t.doc.getLength()+i-e)>0&&(r=r.substr(0,r.length-i),n.update(n.from,n.to,r.split("\n")))}return!0}}(65536),qm={scroll:!1},Gm={insert_node:"bg-washed-green",remove_node:"bg-washed-red"},Km=`Type, then ${df("Shift-Enter")} to run.`,Ym=`${df("Alt-Backspace")} to delete.`;let Xm;class Qm extends G.Component{constructor(...e){super(...e),qc(this,"state",{dirty:!1}),qc(this,"ref",null),qc(this,"editor",null),qc(this,"editorGeneration",void 0),qc(this,"height",void 0),qc(this,"errorLine",null),qc(this,"errorIcons",this.renderErrorIcons()),qc(this,"onRef",e=>{this.ref=e}),qc(this,"onFocus",(e,t)=>{const{id:n,focused:r,onFocus:i}=this.props;r||i(n),t&&!t.relatedTarget||e.scrollIntoView(),e.setOption("placeholder",Km)}),qc(this,"onBlur",e=>{e.setOption("placeholder",""),window.innerWidth<=640&&this.save()}),qc(this,"onBeforeChange",e=>{kf(e)&&e.setOption("placeholder",Km)}),qc(this,"onChanges",e=>{const{dirty:t}=this.state,n=this.editorGeneration!==e.changeGeneration();t!==n&&this.setState({dirty:n})}),qc(this,"onUpdate",e=>{const{clientHeight:t}=e.getScrollInfo(),n=Math.max(zf,t);if(n!==this.height){const{id:e,onHeight:t}=this.props;this.height=n,t(e,n)}}),qc(this,"onRefresh",()=>{this.errorLine&&this.renderError()}),qc(this,"userSave",async()=>{const{disabled:e}=this.props;if(!e){if(qp&&qp.getItem("tryPrettier"))try{const e=this.editor.getValue(),n=this.editor.indexFromPos(this.editor.getCursor()),{cursorOffset:r,text:i}=await async function(e,t){try{return Xm||(Xm=await Um("https://static.observablehq.com/format.3e1cee5899782f9e71f1fabb7c80f1efd4eacc587564d40289301bf1e9b1d17e.js")),Xm(e,t)}catch(n){console.error(n)}}(e,n);i!==e&&(this.editor.setValue(i),this.editor.setCursor(this.editor.posFromIndex(r)))}catch(t){}this.save()}}),qc(this,"save",()=>{const{id:e,onInput:t}=this.props;this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1}),t(e,this.editor.getValue(),!0)}),qc(this,"togglePin",()=>{const{id:e,pinned:t,onPinNode:n}=this.props;n(e,!t)})}componentDidMount(){const{focused:e,value:t,selections:n,error:r,cellNames:i,autoClosePairs:o}=this.props,a=mf.keyMap.default==mf.keyMap.macDefault;this.editor=mf(this.ref,{value:t,mode:{name:"r-javascript",cellNames:i},theme:"observable",autofocus:e,placeholder:e?Km:"",lineNumbers:!1,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!1,autoClosePairs:o,viewportMargin:1/0,matchBrackets:!0,extraKeys:{[a?"Alt-Tab":"Shift-Alt-Down"]:()=>this.moveFocus(1),[a?"Shift-Alt-Tab":"Shift-Alt-Up"]:()=>this.moveFocus(-1),[a?"Cmd-/":"Ctrl-/"]:Sm,[a?"Cmd-Alt-Up":"Shift-Ctrl-Up"]:()=>this.move(-1),[a?"Cmd-Alt-Down":"Shift-Ctrl-Down"]:()=>this.move(1),"Shift-Enter":this.userSave,"Ctrl-K":ym,"Ctrl-Y":bm,Backspace:e=>{if(!kf(e))return mf.Pass;e.setOption("placeholder",Ym)},"Alt-Enter":()=>this.split(!1),"Shift-Alt-Enter":()=>this.split(!0),"Alt-Backspace":()=>this.merge(!0),"Ctrl-Alt-D":()=>this.merge(!1),"Shift-Ctrl-P":()=>this.togglePin(),"Ctrl-Alt-Tab":e=>e.execCommand("insertTab"),Esc:e=>{if(this.editor.doc.listSelectionIndexes().length>1)return mf.Pass;e.getInputField().blur(),this.props.onBlur()},Tab:e=>{if(function(e,t){const n=e.getTokenAt(e.getCursor());if(1!==e.listSelections().length||e.somethingSelected()||/\b(?:string|comment)\b/.test(n.type)||!/^[\w$_]+$/.test(n.string)&&"."!==n.string)return mf.Pass;{e.state.completionActive&&e.state.completionActive.close();const n=e.state.completionActive=new hm(e,t);mf.signal(e,"startCompletion",e),n.update(!0).then(t=>{t&&t.list.length||e.replaceSelection(" ")})}}(e,this.props.workerAutocomplete)===mf.Pass){if(e.somethingSelected()){if(this.editor.getSelections("\n").every(e=>e.indexOf("\n")>-1))return void e.execCommand("indentMore")}e.execCommand("insertSoftTab")}},"Alt-B":!1,"Alt-F":!1,"Alt-D":!1,"Cmd-D":!1,"Cmd-U":!1,"Cmd-Y":!1,"Shift-Cmd-U":!1}}),this.editor.setSize(null,"auto"),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("update",this.onUpdate),this.editor.on("beforeChange",zm),this.editor.on("beforeChange",this.onBeforeChange),this.editor.on("changes",this.onChanges),this.editor.on("refresh",this.onRefresh),n&&n.length&&this.editor.doc.setSelectionIndexes(n,null,qm),r&&this.renderError(),this.editorGeneration=this.editor.changeGeneration(),Promise.resolve().then(()=>this.onUpdate(this.editor))}componentWillReceiveProps({focused:e,selections:t,value:n,cellNames:r,disabled:i}){if(i!==this.editor.isReadOnly()&&(this.editor.setOption("theme",i?"disabled":"observable"),this.editor.setOption("readOnly",!!i&&"nocursor")),n===this.editor.getValue())this.setState({dirty:!1});else if(n===this.props.value)e||this.save();else{const e=this.editor.doc.listSelections();this.editor.setValue(n),this.editor.doc.setSelections(e,null,qm),this.editorGeneration=this.editor.changeGeneration(),this.setState({dirty:!1})}(function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0})(this.props.cellNames,r)||this.editor.setOption("mode",{name:"r-javascript",cellNames:r}),t!==this.props.selections&&this.editor.doc.setSelectionIndexes(t,null,qm),!e||this.props.focused&&t===this.props.selections||this.editor.focus()}componentDidUpdate(e,t){e.error===this.props.error&&t.dirty===this.state.dirty||this.renderError()}componentWillUnmount(){const{id:e,value:t,onHeight:n,onInput:r,onSelect:i}=this.props;this.editor.off("focus",this.onFocus),this.editor.off("blur",this.onBlur),this.editor.off("update",this.onUpdate),this.editor.off("beforeChange",zm),this.editor.off("beforeChange",this.onBeforeChange),this.editor.off("changes",this.onChanges),this.editor.off("refresh",this.onRefresh);const o=this.editor.getValue();t!==o&&r(e,o,!1),i(e,this.editor.doc.listSelectionIndexes()),n(e,0)}moveFocus(e){const{id:t,onMoveFocus:n}=this.props;n(t,e)}move(e){const{id:t,onMoveNode:n}=this.props;n(t,e)}merge(e){const{id:t,onMergeNode:n}=this.props;if(this.editor.getCursorIndex()!==(e?0:this.editor.doc.getLength()))return mf.Pass;n(t,this.editor.getValue(),e)}split(e){const{id:t,onInsertBefore:n,onInsertAfter:r}=this.props,i=this.editor.getCursorIndex(),o=this.editor.getValue(),a=o.substring(0,i),s=o.substring(i);a.length<s.length?(this.editor.setValue(s),this.save(),n(t,a,e)):(this.editor.setValue(a),this.save(),r(t,s,!e))}renderError(){const e=this.props.error;if(this.errorLine&&(this.errorIcons.caret.remove(),this.errorIcons.margin.remove(),this.errorLine=null),e&&!this.state.dirty){const t=e.line-1;if(this.errorLine=this.editor.getLineHandle(t),!this.errorLine)return;this.editor.addWidget({line:t,ch:e.column},this.errorIcons.caret),this.editor.addWidget({line:t,ch:0},this.errorIcons.margin)}}renderErrorIcons(){const e=document.createElement("div");Vs.render(G.createElement(Bu,{className:"db relative w1 h1 dark-red pen z-1",style:{marginTop:-8,marginLeft:-2}}),e);const t=document.createElement("div");return Vs.render(G.createElement(zu,{className:"db relative dark-red",style:{marginTop:-21,marginLeft:-4}}),t),{margin:t,caret:e}}render(){const{disabled:e,hovered:t,focused:n,type:r}=this.props,{dirty:i}=this.state,o=Gm[r]||"bg-near-white";return G.createElement("div",{ref:this.onRef,className:`relative pea ${o}`},!e&&(t||n)&&G.createElement("a",{onMouseDown:Nm,onClick:this.userSave,title:`Click to save. ${ff("Shift-Enter")}`,className:`absolute top-0 right-0 pa2 z-2 pointer ${i?"blue hover-dark-blue":"black-30 hover-black"}`,style:{userSelect:"none"}},G.createElement(Wu,{strong:i})))}}qc(Qm,"defaultProps",{id:void 0,value:void 0,pinned:void 0,focused:!1,disabled:!1,cellNames:new Set,selections:void 0,error:void 0,onFocus:void 0,onHeight:void 0,onInput:void 0,onInsertBefore:void 0,onInsertAfter:void 0,onMergeNode:void 0,onMoveFocus:void 0,onMoveNode:void 0,onPinNode:void 0,onRemoveNode:void 0,onSelect:void 0,autoClosePairs:!1,type:"normal"});class Jm extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{menu:!1,removing:!1}),qc(this,"scrollLoop",null),qc(this,"scrollTime",null),qc(this,"scrollDirection",-1),qc(this,"toggleMenu",e=>{e.stopPropagation(),this.setState(({menu:e})=>({menu:!e,removing:!1}))}),qc(this,"buttonRef",e=>{e&&e.addEventListener("touchstart",this.touchStart,{passive:!1})}),qc(this,"closeMenu",e=>{e.stopPropagation(),this.setState({menu:!1,removing:!1})}),qc(this,"onClick",()=>{const{id:e,onClick:t}=this.props;t(e,!1)}),qc(this,"removeConfirm",e=>{this.setState({removing:!0}),e.stopPropagation()}),qc(this,"remove",e=>{const{id:t,onRemove:n}=this.props;n(t),this.closeMenu(e)}),qc(this,"comment",e=>{const{onCommentOpen:t,id:n}=this.props;t(n),this.closeMenu(e)}),qc(this,"insertNode",e=>{const{nextId:t,onInsert:n}=this.props;e.stopPropagation(),n(t)}),qc(this,"mouseDown",e=>{e.view.addEventListener("mousemove",this.windowMouseMove),e.view.addEventListener("mouseup",this.windowMouseUp);const{onNodeDragStart:t,id:n}=this.props;t(n)}),qc(this,"autoscroll",()=>{this.scrollTime&&window.scrollBy(0,(Date.now()-this.scrollTime)*this.scrollDirection),this.scrollTime=Date.now(),this.scrollLoop=window.requestAnimationFrame(this.autoscroll)}),qc(this,"windowMouseMove",e=>{const{onNodeDrag:t}=this.props;t(e.pageY),this.maybeScroll(e.clientY)}),qc(this,"maybeScroll",e=>{if(e<50)this.scrollDirection=-1;else{if(!(e>window.innerHeight-50))return this.stopScrolling();this.scrollDirection=1}this.scrollLoop||(this.scrollTime=null,this.scrollLoop=window.requestAnimationFrame(this.autoscroll))}),qc(this,"windowMouseUp",e=>{e.view.removeEventListener("mousemove",this.windowMouseMove),e.view.removeEventListener("mouseup",this.windowMouseUp);const{onNodeDrop:t}=this.props;t(e.pageY),this.stopScrolling()}),qc(this,"stopScrolling",()=>{window.cancelAnimationFrame(this.scrollLoop),this.scrollTime=null,this.scrollLoop=null}),qc(this,"gutterClick",e=>{this.onClick(e),this.closeMenu(e)}),qc(this,"touchStart",e=>{const{onNodeDragStart:t,id:n}=this.props,{touches:[{pageY:r}]}=e;e.stopPropagation(),e.preventDefault(),t(n),this.tapCancelled=!1,this.initialTouchY=r}),qc(this,"touchMove",e=>{const{onNodeDrag:t}=this.props;e.stopPropagation();const{touches:[{pageY:n,clientY:r}]}=e;t(n),this.maybeScroll(r),Math.abs(n-this.initialTouchY)>10&&(this.tapCancelled=!0)}),qc(this,"touchEnd",e=>{const{onNodeDrop:t}=this.props,{changedTouches:[{pageY:n}]}=e;t(n),this.stopScrolling(),this.tapCancelled||this.setState(({menu:e})=>({menu:!e}))}),qc(this,"onPinClick",e=>{const{id:t,onClick:n}=this.props;n(t,!0),e.stopPropagation()}),qc(this,"onPermalinkClick",e=>{this.closeMenu(e)})}render(){const{menu:e,removing:t}=this.state,{height:n,focused:r,hovered:i,open:o,pinned:a,pinnable:s,commentFlag:l,name:c,type:u,mobile:h}=this.props;return G.createElement("div",{title:e?"":`Click to ${o&&!a&&s?`close. ${ff("Escape")}`:"edit."}`,className:`absolute pointer pea tr top-0 br hide-child\n          ${r?"bg-near-white black b--black":`bg-white ${e?"":"hover-bg-near-white hover-black"}  black-30 ${"safe"===u||o||a||i?"b--black-30":"b--white"}`}`,onMouseDown:"safe"===u&&!a&&s?null:Nm,onClick:h?this.toggleMenu:this.gutterClick,style:{height:"100%",padding:"6px 0.25rem",left:"-50vw",width:"50vw"}},G.createElement("div",{className:"dib absolute right-0"},(i||r||e||h)&&G.createElement("button",{onClick:this.toggleMenu,onMouseDown:this.mouseDown,onTouchMove:this.touchMove,onTouchCancel:this.touchEnd,onTouchEnd:this.touchEnd,ref:this.buttonRef,type:"button",title:"Click for options.\nDrag to move.",style:{padding:"9px 6px 10px",marginTop:-6,cursor:"grab"},className:`inline-flex hover-black ${e&&h?"black-50":e?"bg-light-gray black-30":"bg-transparent black-30"} hover-bg-light-gray bn `},G.createElement(Xu,null)),e&&G.createElement(dh,{onClickOutside:this.closeMenu},G.createElement("nav",{className:"db absolute lh-solid tl z-4",style:{width:"auto",left:"1.75rem",top:0},"aria-label":"submenu","aria-hidden":""+!o},G.createElement("div",{className:"absolute",style:{clip:"rect(0 18px 14px -4px)",left:-14,top:8,transform:"rotate(-90deg)"}},G.createElement("div",{className:"bg-white",style:{width:10,height:10,boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(8px, 6px)"}})),G.createElement("div",{className:"bg-white br2 overflow-hidden shadow-4"},G.createElement("div",{className:"pv1 sans-serif"},c?G.createElement("a",{href:`#${c}`,onClick:this.onPermalinkClick,className:"flex mw5 items-center pa2 pt1 code f7 truncate no-underline black-50 hover-blue bb b--black-10 pointer"},c):null,o||a?!a&&s?G.createElement("a",{onClick:this.gutterClick,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(wu,{className:"w1 h1 mr1"}),"Close"):null:G.createElement("a",{onClick:this.gutterClick,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(yu,{className:"w1 h1 mr1"}),"Edit"),l&&"scratchpad"!==u&&G.createElement("a",{onClick:this.comment,className:"flex items-center pa2 f6 black-70 hover-blue hover-bg-near-white pointer"},G.createElement(ku,{className:"w1 h1 mr1"}),"Comment"),t?G.createElement(G.Fragment,null,G.createElement("div",{className:"ph2 pt2 f7 black-50"},"Are you sure?"),G.createElement("div",{className:"pv2"},G.createElement("a",{onClick:this.remove,className:"flex items-center pa2 f6 black-70 hover-red bg-washed-red pointer"},G.createElement(Mu,{className:"w1 h1 mr1"}),"Delete"))):G.createElement("a",{onClick:this.removeConfirm,className:"flex items-center pa2 f6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Mu,{className:"w1 h1 mr1"}),"Delete")))))),"safe"!==u&&s&&r&&G.createElement("div",{className:"absolute right-0 mv1",style:{top:n}},G.createElement("a",{className:`dib br-pill v-top ${a?"blue":"hover-black black-30"}`,title:`Click to ${a?"unpin":"pin"}. ${ff("Ctrl-Shift-P")}`,style:{width:20,height:20,padding:2},onMouseDown:Nm,onClick:this.onPinClick},G.createElement(qu,{className:"v-top"}))))}}function Zm({onPutBack:e}){return G.createElement(eh,null,G.createElement("div",{className:"flex"},G.createElement("div",null,G.createElement(Mu,{className:"dib w1 h1 mt1 mr2"})),G.createElement("div",null,G.createElement("h3",{className:"mt1 fw7 black-70"},"This notebook is in the trash."),G.createElement("p",{className:"lh-copy"},"Notebooks cant be edited from the trash. To edit this notebook, first put it back from the trash."),G.createElement("div",{className:"mt3 tr"},G.createElement(ip,{highlight:!0,onClick:e},G.createElement(bu,{className:"w1 h1 mr1"}),"Put back from trash")))))}qc(Jm,"defaultProps",{id:void 0,pinned:void 0,focused:void 0,onClick:void 0,onCommentOpen:void 0,onRemove:void 0});var eg=n(function(e,t){function n(){}function r(e,t,n,r,i){for(var o=0,a=t.length,s=0,l=0;o<a;o++){var c=t[o];if(c.removed){if(c.value=e.join(r.slice(l,l+c.count)),l+=c.count,o&&t[o-1].added){var u=t[o-1];t[o-1]=t[o],t[o]=u}}else{if(!c.added&&i){var h=n.slice(s,s+c.count);h=h.map(function(e,t){var n=r[l+t];return n.length>e.length?n:e}),c.value=e.join(h)}else c.value=e.join(n.slice(s,s+c.count));s+=c.count,c.added||(l+=c.count)}}var d=t[a-1];return a>1&&"string"==typeof d.value&&(d.added||d.removed)&&e.equals("",d.value)&&(t[a-2].value+=d.value,t.pop()),t}t.__esModule=!0,t.default=n,n.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.callback;"function"==typeof n&&(i=n,n={}),this.options=n;var o=this;function a(e){return i?(setTimeout(function(){i(void 0,e)},0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var s=(t=this.removeEmpty(this.tokenize(t))).length,l=e.length,c=1,u=s+l,h=[{newPos:-1,components:[]}],d=this.extractCommon(h[0],t,e,0);if(h[0].newPos+1>=s&&d+1>=l)return a([{value:this.join(t),count:t.length}]);function p(){for(var n=-1*c;n<=c;n+=2){var i=void 0,u=h[n-1],d=h[n+1],p=(d?d.newPos:0)-n;u&&(h[n-1]=void 0);var f=u&&u.newPos+1<s,m=d&&0<=p&&p<l;if(f||m){if(!f||m&&u.newPos<d.newPos?(i={newPos:(g=d).newPos,components:g.components.slice(0)},o.pushComponent(i.components,void 0,!0)):((i=u).newPos++,o.pushComponent(i.components,!0,void 0)),p=o.extractCommon(i,t,e,n),i.newPos+1>=s&&p+1>=l)return a(r(o,i.components,t,e,o.useLongestToken));h[n]=i}else h[n]=void 0}var g;c++}if(i)!function e(){setTimeout(function(){if(c>u)return i();p()||e()},0)}();else for(;c<=u;){var f=p();if(f)return f}},pushComponent:function(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,r){for(var i=t.length,o=n.length,a=e.newPos,s=a-r,l=0;a+1<i&&s+1<o&&this.equals(t[a+1],n[s+1]);)a++,s++,l++;return l&&e.components.push({count:l}),e.newPos=a,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}}});t(eg);var tg=n(function(e,t){t.__esModule=!0,t.characterDiff=void 0,t.diffChars=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=t.characterDiff=new r.default});t(tg);tg.characterDiff,tg.diffChars;var ng=n(function(e,t){t.__esModule=!0,t.generateOptions=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}});t(ng);ng.generateOptions;var rg=n(function(e,t){t.__esModule=!0,t.wordDiff=void 0,t.diffWords=function(e,t,n){return n=(0,ng.generateOptions)(n,{ignoreWhitespace:!0}),a.diff(e,t,n)},t.diffWordsWithSpace=function(e,t,n){return a.diff(e,t,n)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,o=/\S/,a=t.wordDiff=new r.default;a.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!o.test(e)&&!o.test(t)},a.tokenize=function(e){for(var t=e.split(/(\s+|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&i.test(t[n])&&i.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t}});t(rg);rg.wordDiff,rg.diffWords,rg.diffWordsWithSpace;var ig=n(function(e,t){t.__esModule=!0,t.lineDiff=void 0,t.diffLines=function(e,t,n){return i.diff(e,t,n)},t.diffTrimmedLines=function(e,t,n){var r=(0,ng.generateOptions)(n,{ignoreWhitespace:!0});return i.diff(e,t,r)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=t.lineDiff=new r.default;i.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t}});t(ig);ig.lineDiff,ig.diffLines,ig.diffTrimmedLines;var og=n(function(e,t){t.__esModule=!0,t.sentenceDiff=void 0,t.diffSentences=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=t.sentenceDiff=new r.default;i.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)}});t(og);og.sentenceDiff,og.diffSentences;var ag=n(function(e,t){t.__esModule=!0,t.cssDiff=void 0,t.diffCss=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=t.cssDiff=new r.default;i.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)}});t(ag);ag.cssDiff,ag.diffCss;var sg=n(function(e,t){t.__esModule=!0,t.jsonDiff=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.diffJson=function(e,t,n){return a.diff(e,t,n)},t.canonicalize=s;var r,i=(r=eg)&&r.__esModule?r:{default:r};var o=Object.prototype.toString,a=t.jsonDiff=new i.default;function s(e,t,r,i,a){t=t||[],r=r||[],i&&(e=i(a,e));var l=void 0;for(l=0;l<t.length;l+=1)if(t[l]===e)return r[l];var c=void 0;if("[object Array]"===o.call(e)){for(t.push(e),c=new Array(e.length),r.push(c),l=0;l<e.length;l+=1)c[l]=s(e[l],t,r,i,a);return t.pop(),r.pop(),c}if(e&&e.toJSON&&(e=e.toJSON()),"object"===(void 0===e?"undefined":n(e))&&null!==e){t.push(e),c={},r.push(c);var u=[],h=void 0;for(h in e)e.hasOwnProperty(h)&&u.push(h);for(u.sort(),l=0;l<u.length;l+=1)c[h=u[l]]=s(e[h],t,r,i,h);t.pop(),r.pop()}else c=e;return c}a.useLongestToken=!0,a.tokenize=ig.lineDiff.tokenize,a.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(s(e,null,null,i),i,"  ")},a.equals=function(e,t){return i.default.prototype.equals.call(a,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))}});t(sg);sg.jsonDiff,sg.diffJson,sg.canonicalize;var lg=n(function(e,t){t.__esModule=!0,t.arrayDiff=void 0,t.diffArrays=function(e,t,n){return i.diff(e,t,n)};var n,r=(n=eg)&&n.__esModule?n:{default:n};var i=t.arrayDiff=new r.default;i.tokenize=function(e){return e.slice()},i.join=i.removeEmpty=function(e){return e}});t(lg);lg.arrayDiff,lg.diffArrays;var cg=n(function(e,t){t.__esModule=!0,t.parsePatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function a(){var e={};for(i.push(e);o<n.length;){var r=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var a=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);a&&(e.index=a[1]),o++}for(s(e),s(e),e.hunks=[];o<n.length;){var c=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(c))break;if(/^@@/.test(c))e.hunks.push(l());else{if(c&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(c));o++}}}function s(e){var t=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(t){var r="---"===t[1]?"old":"new",i=t[2].split("\t",2),a=i[0].replace(/\\\\/g,"\\");/^".*"$/.test(a)&&(a=a.substr(1,a.length-2)),e[r+"FileName"]=a,e[r+"Header"]=(i[1]||"").trim(),o++}}function l(){for(var e=o,i=n[o++],a=i.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),s={oldStart:+a[1],oldLines:+a[2]||1,newStart:+a[3],newLines:+a[4]||1,lines:[],linedelimiters:[]},l=0,c=0;o<n.length&&!(0===n[o].indexOf("--- ")&&o+2<n.length&&0===n[o+1].indexOf("+++ ")&&0===n[o+2].indexOf("@@"));o++){var u=0==n[o].length&&o!=n.length-1?" ":n[o][0];if("+"!==u&&"-"!==u&&" "!==u&&"\\"!==u)break;s.lines.push(n[o]),s.linedelimiters.push(r[o]||"\n"),"+"===u?l++:"-"===u?c++:" "===u&&(l++,c++)}if(l||1!==s.newLines||(s.newLines=0),c||1!==s.oldLines||(s.oldLines=0),t.strict){if(l!==s.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(c!==s.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return s}for(;o<n.length;)a();return i}});t(cg);cg.parsePatch;var ug=n(function(e,t){t.__esModule=!0,t.default=function(e,t,n){var r=!0,i=!1,o=!1,a=1;return function s(){if(r&&!o){if(i?a++:r=!1,e+a<=n)return a;o=!0}if(!i)return o||(r=!0),t<=e-a?-a++:(i=!0,s())}}});t(ug);var hg=n(function(e,t){t.__esModule=!0,t.applyPatch=i,t.applyPatches=function(e,t){"string"==typeof e&&(e=(0,cg.parsePatch)(e));var n=0;!function r(){var o=e[n++];if(!o)return t.complete();t.loadFile(o,function(e,n){if(e)return t.complete(e);var a=i(n,o,t);t.patched(o,a,function(e){if(e)return t.complete(e);r()})})}()};var n,r=(n=ug)&&n.__esModule?n:{default:n};function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t&&(t=(0,cg.parsePatch)(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var i=e.split(/\r\n|[\n\v\f\r\x85]/),o=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=t.hunks,s=n.compareLine||function(e,t,n,r){return t===r},l=0,c=n.fuzzFactor||0,u=0,h=0,d=void 0,p=void 0;function f(e,t){for(var n=0;n<e.lines.length;n++){var r=e.lines[n],o=r.length>0?r[0]:" ",a=r.length>0?r.substr(1):r;if(" "===o||"-"===o){if(!s(t+1,i[t],o,a)&&++l>c)return!1;t++}}return!0}for(var m=0;m<a.length;m++){for(var g=a[m],v=i.length-g.oldLines,b=0,y=h+g.oldStart-1,w=(0,r.default)(y,u,v);void 0!==b;b=w())if(f(g,y+b)){g.offset=h+=b;break}if(void 0===b)return!1;u=g.offset+g.oldStart+g.oldLines}for(var x=0,E=0;E<a.length;E++){var k=a[E],S=k.oldStart+k.offset+x-1;x+=k.newLines-k.oldLines,S<0&&(S=0);for(var C=0;C<k.lines.length;C++){var T=k.lines[C],_=T.length>0?T[0]:" ",N=T.length>0?T.substr(1):T,P=k.linedelimiters[C];if(" "===_)S++;else if("-"===_)i.splice(S,1),o.splice(S,1);else if("+"===_)i.splice(S,0,N),o.splice(S,0,P),S++;else if("\\"===_){var A=k.lines[C-1]?k.lines[C-1][0]:null;"+"===A?d=!0:"-"===A&&(p=!0)}}}if(d)for(;!i[i.length-1];)i.pop(),o.pop();else p&&(i.push(""),o.push("\n"));for(var L=0;L<i.length-1;L++)i[L]=i[L]+o[L];return i.join("")}});t(hg);hg.applyPatch,hg.applyPatches;var dg=n(function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,r,i,o,a,s){s||(s={}),void 0===s.context&&(s.context=4);var l=(0,ig.diffLines)(r,i,s);function c(e){return e.map(function(e){return" "+e})}l.push({value:"",lines:[]});for(var u=[],h=0,d=0,p=[],f=1,m=1,g=function(e){var t=l[e],o=t.lines||t.value.replace(/\n$/,"").split("\n");if(t.lines=o,t.added||t.removed){var a;if(!h){var g=l[e-1];h=f,d=m,g&&(p=s.context>0?c(g.lines.slice(-s.context)):[],h-=p.length,d-=p.length)}(a=p).push.apply(a,n(o.map(function(e){return(t.added?"+":"-")+e}))),t.added?m+=o.length:f+=o.length}else{if(h)if(o.length<=2*s.context&&e<l.length-2){var v;(v=p).push.apply(v,n(c(o)))}else{var b,y=Math.min(o.length,s.context);(b=p).push.apply(b,n(c(o.slice(0,y))));var w={oldStart:h,oldLines:f-h+y,newStart:d,newLines:m-d+y,lines:p};if(e>=l.length-2&&o.length<=s.context){var x=/\n$/.test(r),E=/\n$/.test(i);0!=o.length||x?x&&E||p.push("\\ No newline at end of file"):p.splice(w.oldLines,0,"\\ No newline at end of file")}u.push(w),h=0,d=0,p=[]}f+=o.length,m+=o.length}},v=0;v<l.length;v++)g(v);return{oldFileName:e,newFileName:t,oldHeader:o,newHeader:a,hunks:u}}function i(e,t,n,i,o,a,s){var l=r(e,t,n,i,o,a,s),c=[];e==t&&c.push("Index: "+e),c.push("==================================================================="),c.push("--- "+l.oldFileName+(void 0===l.oldHeader?"":"\t"+l.oldHeader)),c.push("+++ "+l.newFileName+(void 0===l.newHeader?"":"\t"+l.newHeader));for(var u=0;u<l.hunks.length;u++){var h=l.hunks[u];c.push("@@ -"+h.oldStart+","+h.oldLines+" +"+h.newStart+","+h.newLines+" @@"),c.push.apply(c,h.lines)}return c.join("\n")+"\n"}t.__esModule=!0,t.structuredPatch=r,t.createTwoFilesPatch=i,t.createPatch=function(e,t,n,r,o,a){return i(e,e,t,n,r,o,a)}});t(dg);dg.structuredPatch,dg.createTwoFilesPatch,dg.createPatch;var pg=n(function(e,t){function n(e,t){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}t.__esModule=!0,t.arrayEqual=function(e,t){if(e.length!==t.length)return!1;return n(e,t)},t.arrayStartsWith=n});t(pg);pg.arrayEqual,pg.arrayStartsWith;var fg=n(function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=function e(t){var n=0;var r=0;t.forEach(function(t){if("string"!=typeof t){var i=e(t.mine),o=e(t.theirs);void 0!==n&&(i.oldLines===o.oldLines?n+=i.oldLines:n=void 0),void 0!==r&&(i.newLines===o.newLines?r+=i.newLines:r=void 0)}else void 0===r||"+"!==t[0]&&" "!==t[0]||r++,void 0===n||"-"!==t[0]&&" "!==t[0]||n++});return{oldLines:n,newLines:r}}(e.lines),n=t.oldLines,r=t.newLines;void 0!==n?e.oldLines=n:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function i(e,t){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return(0,cg.parsePatch)(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return(0,dg.structuredPatch)(void 0,void 0,t,e)}return e}function o(e){return e.newFileName&&e.newFileName!==e.oldFileName}function a(e,t,n){return t===n?t:(e.conflict=!0,{mine:t,theirs:n})}function s(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function l(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function c(e,t,i,o,a){var s={offset:t,lines:i,index:0},l={offset:o,lines:a,index:0};for(p(e,s,l),p(e,l,s);s.index<s.lines.length&&l.index<l.lines.length;){var c=s.lines[s.index],g=l.lines[l.index];if("-"!==c[0]&&"+"!==c[0]||"-"!==g[0]&&"+"!==g[0])if("+"===c[0]&&" "===g[0]){var v;(v=e.lines).push.apply(v,n(m(s)))}else if("+"===g[0]&&" "===c[0]){var b;(b=e.lines).push.apply(b,n(m(l)))}else"-"===c[0]&&" "===g[0]?h(e,s,l):"-"===g[0]&&" "===c[0]?h(e,l,s,!0):c===g?(e.lines.push(c),s.index++,l.index++):d(e,m(s),m(l));else u(e,s,l)}f(e,s),f(e,l),r(e)}function u(e,t,r){var i=m(t),o=m(r);if(g(i)&&g(o)){var a,s;if((0,pg.arrayStartsWith)(i,o)&&v(r,i,i.length-o.length))return void(a=e.lines).push.apply(a,n(i));if((0,pg.arrayStartsWith)(o,i)&&v(t,o,o.length-i.length))return void(s=e.lines).push.apply(s,n(o))}else if((0,pg.arrayEqual)(i,o)){var l;return void(l=e.lines).push.apply(l,n(i))}d(e,i,o)}function h(e,t,r,i){var o,a=m(t),s=function(e,t){var n=[],r=[],i=0,o=!1,a=!1;for(;i<t.length&&e.index<e.lines.length;){var s=e.lines[e.index],l=t[i];if("+"===l[0])break;if(o=o||" "!==s[0],r.push(l),i++,"+"===s[0])for(a=!0;"+"===s[0];)n.push(s),s=e.lines[++e.index];l.substr(1)===s.substr(1)?(n.push(s),e.index++):a=!0}"+"===(t[i]||"")[0]&&o&&(a=!0);if(a)return n;for(;i<t.length;)r.push(t[i++]);return{merged:r,changes:n}}(r,a);s.merged?(o=e.lines).push.apply(o,n(s.merged)):d(e,i?s:a,i?a:s)}function d(e,t,n){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:n})}function p(e,t,n){for(;t.offset<n.offset&&t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r),t.offset++}}function f(e,t){for(;t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n)}}function m(e){for(var t=[],n=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===n&&"+"===r[0]&&(n="+"),n!==r[0])break;t.push(r),e.index++}return t}function g(e){return e.reduce(function(e,t){return e&&"-"===t[0]},!0)}function v(e,t,n){for(var r=0;r<n;r++){var i=t[t.length-n+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=n,!0}t.__esModule=!0,t.calcLineCount=r,t.merge=function(e,t,n){e=i(e,n),t=i(t,n);var r={};(e.index||t.index)&&(r.index=e.index||t.index);(e.newFileName||t.newFileName)&&(o(e)?o(t)?(r.oldFileName=a(r,e.oldFileName,t.oldFileName),r.newFileName=a(r,e.newFileName,t.newFileName),r.oldHeader=a(r,e.oldHeader,t.oldHeader),r.newHeader=a(r,e.newHeader,t.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=t.oldFileName||e.oldFileName,r.newFileName=t.newFileName||e.newFileName,r.oldHeader=t.oldHeader||e.oldHeader,r.newHeader=t.newHeader||e.newHeader));r.hunks=[];var u=0,h=0,d=0,p=0;for(;u<e.hunks.length||h<t.hunks.length;){var f=e.hunks[u]||{oldStart:1/0},m=t.hunks[h]||{oldStart:1/0};if(s(f,m))r.hunks.push(l(f,d)),u++,p+=f.newLines-f.oldLines;else if(s(m,f))r.hunks.push(l(m,p)),h++,d+=m.newLines-m.oldLines;else{var g={oldStart:Math.min(f.oldStart,m.oldStart),oldLines:0,newStart:Math.min(f.newStart+d,m.oldStart+p),newLines:0,lines:[]};c(g,f.oldStart,f.lines,m.oldStart,m.lines),h++,u++,r.hunks.push(g)}}return r}});t(fg);fg.calcLineCount,fg.merge;var mg=n(function(e,t){t.__esModule=!0,t.convertChangesToDMP=function(e){for(var t=[],n=void 0,r=void 0,i=0;i<e.length;i++)n=e[i],r=n.added?1:n.removed?-1:0,t.push([r,n.value]);return t}});t(mg);mg.convertChangesToDMP;var gg=n(function(e,t){function n(e){var t=e;return t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}t.__esModule=!0,t.convertChangesToXML=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")}});t(gg);gg.convertChangesToXML;var vg=n(function(e,t){t.__esModule=!0,t.canonicalize=t.convertChangesToXML=t.convertChangesToDMP=t.merge=t.parsePatch=t.applyPatches=t.applyPatch=t.createPatch=t.createTwoFilesPatch=t.structuredPatch=t.diffArrays=t.diffJson=t.diffCss=t.diffSentences=t.diffTrimmedLines=t.diffLines=t.diffWordsWithSpace=t.diffWords=t.diffChars=t.Diff=void 0;var n,r=(n=eg)&&n.__esModule?n:{default:n};t.Diff=r.default,t.diffChars=tg.diffChars,t.diffWords=rg.diffWords,t.diffWordsWithSpace=rg.diffWordsWithSpace,t.diffLines=ig.diffLines,t.diffTrimmedLines=ig.diffTrimmedLines,t.diffSentences=og.diffSentences,t.diffCss=ag.diffCss,t.diffJson=sg.diffJson,t.diffArrays=lg.diffArrays,t.structuredPatch=dg.structuredPatch,t.createTwoFilesPatch=dg.createTwoFilesPatch,t.createPatch=dg.createPatch,t.applyPatch=hg.applyPatch,t.applyPatches=hg.applyPatches,t.parsePatch=cg.parsePatch,t.merge=fg.merge,t.convertChangesToDMP=mg.convertChangesToDMP,t.convertChangesToXML=gg.convertChangesToXML,t.canonicalize=sg.canonicalize});t(vg);vg.canonicalize,vg.convertChangesToXML,vg.convertChangesToDMP,vg.merge,vg.parsePatch,vg.applyPatches,vg.applyPatch,vg.createPatch,vg.createTwoFilesPatch,vg.structuredPatch,vg.diffArrays,vg.diffJson,vg.diffCss,vg.diffSentences,vg.diffTrimmedLines;var bg=vg.diffLines,yg=vg.diffWordsWithSpace;vg.diffWords,vg.diffChars,vg.Diff;function wg(e){return[e[1],e[0]]}function xg(e){const{type:t,base:n,target:r}=e;return"insert_node"!==t||r?"remove_node"!==t||n?t:"insert_node":"remove_node"}function Eg({model:e,diff:t,cells:n}){const r=new Map(t.map(e=>[e.id,e])),i=[],o=[],a=e.nodes.filter(e=>!n.get(e.id).disabled),s=Wp.of(Gc({},e,{nodes:a}));return a.forEach(e=>{const t=r.get(e.id);t&&(null!=t.baseId&&i.push([t.baseId,e.id]),null!=t.targetId&&o.push([t.targetId,e.id]))}),{patchModel:s,baseToLocal:i,targetToLocal:o}}function kg(e,t,n){const r=new Map(n.map(wg)),i=new Map(e.mapping.filter(([,e])=>r.has(e)).map(([e,t])=>[e,r.get(t)]));for(let o of e.events)"insert_node"===o.type&&i.has(o.node_id)&&(o.target_document_id=t,o.target_node_id=i.get(o.node_id))}const Sg="bg-white black br2",Cg="hover-blue black-30",Tg={insert_node:"Added",remove_node:"Removed",modify_node:"Changed"};function _g({id:e,source:t,diff:n,edited:r,onChangeSource:i}){let o=n=>{(r||t!==n)&&i(e,n)};return G.createElement("div",{style:{height:zf,paddingTop:3,paddingBottom:3,paddingRight:3},className:"flex relative justify-between pl3 sans-serif bg-light-gray pea"},G.createElement("div",{className:"inline-flex items-center f7 fw7 black-50"},r?"You edited":`${Tg[xg(n)]}`),G.createElement("div",{className:"flex items-stretch f7 fw6 br1 overflow-hidden pointer",style:{padding:3}},G.createElement("div",{className:`ph2 inline-flex items-center ${"base"!==t||r?Cg:Sg}`,onClick:()=>o("base")},"Before"),"modify_node"===n.type&&G.createElement("div",{className:`ph2 inline-flex items-center ${"diff"===t?Sg:Cg}`,onClick:()=>o("diff")},"Diff"),G.createElement("div",{className:`ph2 inline-flex items-center ${"target"!==t||r?Cg:Sg}`,onClick:()=>o("target")},"After")))}class Ng extends G.PureComponent{constructor(...e){super(...e),qc(this,"diff",null),qc(this,"ref",null),qc(this,"onRef",e=>{this.ref=e})}componentDidMount(){const e=Math.max(zf,this.ref.clientHeight),{id:t,onHeight:n}=this.props;n(t,e)}componentWillUnmount(){const{id:e,onHeight:t}=this.props;t(e,0)}render(){const{diff:{lineDiff:e}}=this.props;return G.createElement("div",{ref:this.onRef,className:"relative cm-s-observable cm-s-diff pea CodeMirror-wrap"},G.createElement("pre",{className:"ma0",style:{paddingTop:6,paddingBottom:6}},e.map((e,t)=>G.createElement("div",{key:t,className:`relative ${e.added?"bg-washed-green":e.removed?"bg-washed-red":""}`,style:{paddingLeft:14,paddingRight:14}},G.createElement("div",{className:"absolute code f7 prevent-selection black-50",style:{left:3,marginTop:1}},e.added?"+":e.removed?"-":""),e.wordDiff?G.createElement(G.Fragment,null,e.wordDiff.map((t,n)=>G.createElement("span",{key:n,className:`${e.added&&t.added?"bg-light-green":""} ${e.removed&&t.removed?"bg-light-red":""}`},t.value))):e.value))))}}function Pg({id:e,onMerge:t,onInsert:n,merge:r,hovered:i,visible:o}){return G.createElement("a",{className:`absolute pointer ${i?"black bg-near-white":o?"black-30":"transparent"} hover-black hover-bg-near-white br1 pea z-2`,title:`Click to insert. ${ff("Alt-Enter")}${t?`\nShift-click to merge. ${ff("Alt-Backspace")}`:""}`,style:{top:-20,left:-12,width:24,height:24,padding:4},onClick:r=>{(r.shiftKey&&t?t:n)(e)}},r&&t?G.createElement("svg",{viewBox:"0.5 -0.5 16 17",width:"16",height:"17",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("path",{d:"M5.5 11.5 L8 9.5 L10.5 11.5 M8 16.5 L8 9.5"}),G.createElement("path",{d:"M5.5 11 L8 9 L10.5 11 M8 15.5 L8 9",transform:"rotate(180, 8, 8)translate(0, 0.5)"})):G.createElement("svg",{viewBox:"0 0 15 15",width:"15",height:"15",stroke:"currentColor",style:{strokeWidth:"1",strokeLinecap:"round"}},G.createElement("line",{x1:"7.5",x2:"7.5",y1:"2.5",y2:"12.5"}),G.createElement("line",{y1:"7.5",y2:"7.5",x1:"2.5",x2:"12.5"})))}function Ag({fork_of:e,owner:t,forks:n,id:r,userLogin:i,documentSlug:o}){const a=e&&(e.team||e.creator),s=e?["Fork of ",G.createElement(Vc,{key:1,className:"no-underline black-70 hover-blue",to:e.slug?`/@${a.login}/${e.slug}`:`/d/${e.id}`},e.title||"Untitled")," ",t.login!==a.login&&["by ",G.createElement(Vc,{key:2,className:"no-underline black-70 hover-blue",to:`/@${a.login}`},G.createElement(ah,{user:a,s:16,style:{verticalAlign:"text-bottom"},className:"w1 h1 mr1 br-100"}),a.name||a.login)]]:null,l=n?[e?"  ":"",G.createElement(Vc,{key:1,className:"no-underline black-70 hover-blue",to:o?`/@${i}/${o}/forks`:`/d/${r}/forks`},fh(n)," ",n>1?"forks":"fork")]:null;return l||s?G.createElement("div",{className:"inline-flex f6 fw4"},G.createElement(Hu,{className:"mr1 black-30",style:{strokeWidth:1}}),G.createElement("div",{className:"black-50"},s,l)):null}function Lg({children:e,actions:t,exitTo:n}){return G.createElement("div",{className:"flex flex-column flex-row-ns justify-between items-center pa2 pl3 mb3 f6 fw4 black-70 bg-washed-yellow br2",style:{marginLeft:21}},G.createElement("div",{className:"mr2 lh-copy"},e),G.createElement("div",{className:"flex mt2 mt0-ns"},t,G.createElement(Vc,{className:"ph3 pa2 no-underline black-50 hover-blue bg-white hover-bg-white ba b--black-10 br2 pointer",to:n},"Exit")))}qc(Ng,"defaultProps",{id:void 0,diff:void 0,onHeight:void 0});class Og extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{actionsPopover:!1}),qc(this,"toggleActionsPopover",e=>{e.stopPropagation(),this.setState(({actionsPopover:e})=>({actionsPopover:!e}))}),qc(this,"onBase",e=>{this.changeAllSource("base",e)}),qc(this,"onTarget",e=>{this.changeAllSource("target",e)}),qc(this,"onDiff",e=>{this.changeAllSource("diff",e)})}changeAllSource(e,t){const{changeAllSource:n}=this.props;t.currentTarget&&t.currentTarget.blur(),this.toggleActionsPopover(t),n(e)}render(){const{actionsPopover:e}=this.state,{id:t,slug:n,title:r,version:i,owner:o,baseId:a,baseSlug:s,baseTitle:l,baseOwner:c,baseVersion:u,merge:h}=this.props;return G.createElement(Lg,{exitTo:n?`/@${o.login}/${n}`:`/d/${t}`,actions:G.createElement("div",{className:"relative"},G.createElement("div",{onClick:this.toggleActionsPopover,className:"dib inline-flex items-center ph3 pa2 mr2 no-underline black-50 hover-blue bg-white hover-bg-white ba b--black-10 br2 pointer"},G.createElement(vu,{className:"dib mr1"}),"Toggle"),e&&G.createElement(ph,{extraStyle:{right:-2,width:"7rem"},onClickOutside:this.toggleActionsPopover},G.createElement("div",{className:"pv2"},G.createElement("div",{onClick:this.onDiff,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(vu,{className:"w1 h1 mr1"}),"Diff"),G.createElement("div",{onClick:this.onBase,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black bg-washed-red hover-bg-light-red pointer"},G.createElement(gu,{className:"w1 h1 mr1"})," Before"),G.createElement("div",{onClick:this.onTarget,className:"flex items-center ph3 pv2 fw6 no-underline black-70 hover-black bg-washed-green hover-bg-light-green pointer"},G.createElement(mu,{className:"w1 h1 mr1"})," After"))))},h?G.createElement("span",{className:"mr1"},G.createElement("b",null,"Merging")," into"):G.createElement("b",{className:"mr1"},"Comparing"),"-",a!==t&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:s?`/@${c.login}/${s}`:`/d/${a}`},l),null!=u&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:`/d/${a}@${u}`},"version ",u),t===a&&null==u&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:s?`/@${c.login}/${s}`:`/d/${a}`},"the latest version"),o.id!==c.id&&G.createElement("span",{className:"mr1"},"by",G.createElement(Vc,{className:"no-underline black-70 hover-blue",to:`/@${c.login}`},G.createElement(ah,{user:c,s:20,className:"w1 h1 v-btm mh1 br-100"}),c.name||c.login)),G.createElement("span",{className:"mr1"},h?"from":"to"),"+",a!==t&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:n?`/@${o.login}/${n}`:`/d/${t}`},r),null!=i&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:`/d/${t}@${i}`},"version ",i),t===a&&null==i&&G.createElement(Vc,{className:"mr1 no-underline black-90 hover-blue",to:n?`/@${o.login}/${n}`:`/d/${t}`},"the latest version"),o.id!==c.id&&G.createElement("span",{className:"mr1"},"by",G.createElement(Vc,{className:"no-underline black-70 hover-blue",to:`/@${o.login}`},G.createElement(ah,{user:o,s:20,className:"w1 h1 v-btm mh1 br-100"}),o.name||o.login)))}}function Mg({participants:e,user:t}){return G.createElement("div",{className:"flex items-center"},G.createElement("div",{className:"flex flex-row-reverse items-center"},[t].concat(e).map((e,t)=>G.createElement("div",{key:e.id,className:`relative flex hover-z-bump hide-child ${0===t?"":"nr2"}`},G.createElement(Vc,{to:`/@${e.login}`},G.createElement(ah,{user:e,s:24,style:{flexShrink:0},className:"ba b--white br-100 hover-b--black"})),G.createElement("div",{className:"absolute top-2 w4 f6 nowrap tc truncate child",style:{left:"-3rem"}},e.name?e.name:`@${e.login}`)))),G.createElement("div",{className:"ml2 black-70"},e.length+1," people editing"))}const Ig=G.memo(function({likes:e,liked:t,onClick:n}){return G.createElement("a",{onClick:n,title:`${t?"Unlike":"Like"} this notebook.`,className:"flex-column inline-flex w2 items-stretch ml1 ml2 mb1 black-50 hover-bg-light-gray ba b--black-10 br2 pointer overflow-hidden"},G.createElement("div",{className:"flex h2 items-center justify-center pa1"},G.createElement(Ru,{className:t?"bump":"",fill:t?"var(--pink)":"var(--white)",stroke:t?"var(--pink)":"var(--black-50)",style:{width:22,height:22,strokeWidth:1,transition:"all 0.4s ease-in-out"}})),e>0&&G.createElement("div",{style:{paddingTop:2,paddingBottom:2},className:"f6 tc bg-white bt b--black-10"},fh(e)))});function Rg({onHelp:e,save:t}){return G.createElement("div",{className:"flex flex-items-center justify-between items-start mb4 f5 f6 lh-copy black-50",style:{marginLeft:21}},G.createElement("div",null,G.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Playground"),G.createElement("div",{className:"measure-wide mt2 fw4"},"Use this notebook to start playing with Observable. Edit the code below, then ",df("Shift-Enter")," ",ff("Shift-Enter")," to run. To save your changes,"," ",G.createElement("a",{className:"blue hover-dark-blue link pointer",onClick:t},"sign in"),".")),G.createElement("div",{className:"ph2 nowrap"},G.createElement("div",{className:"f5 fw7 black-70 semitracked"},"Help"),G.createElement(Vc,{to:"/collection/@observablehq/introduction",target:"_blank",rel:"noopener noreferrer",className:"db mt2 blue hover-dark-blue link"},"Introduction"),G.createElement(Vc,{to:"/collection/@observablehq/tutorial",target:"_blank",rel:"noopener noreferrer",className:"db blue hover-dark-blue link"},"Tutorials"),G.createElement("a",{onClick:e,className:"db blue hover-dark-blue link pointer"},"Keyboard shortcuts"),G.createElement("a",{href:"https://talk.observablehq.com/",target:"_blank",rel:"noopener noreferrer",className:"db blue hover-dark-blue link"},"Forum")))}var Dg={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Fg="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",jg={5:Fg,6:Fg+" const class extends export import super"},Hg=/^in(stanceof)?$/,Ug="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",$g="---------------------------------------------------------------------------------------------------------------------------------------------------",Vg=new RegExp("["+Ug+"]"),Wg=new RegExp("["+Ug+$g+"]");Ug=$g=null;var Bg=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],zg=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function qg(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function Gg(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Vg.test(String.fromCharCode(e)):!1!==t&&qg(e,Bg)))}function Kg(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&Wg.test(String.fromCharCode(e)):!1!==t&&(qg(e,Bg)||qg(e,zg)))))}var Yg=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function Xg(e,t){return new Yg(e,{beforeExpr:!0,binop:t})}var Qg={beforeExpr:!0},Jg={startsExpr:!0},Zg={};function ev(e,t){return void 0===t&&(t={}),t.keyword=e,Zg[e]=new Yg(e,t)}var tv={num:new Yg("num",Jg),regexp:new Yg("regexp",Jg),string:new Yg("string",Jg),name:new Yg("name",Jg),eof:new Yg("eof"),bracketL:new Yg("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Yg("]"),braceL:new Yg("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Yg("}"),parenL:new Yg("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Yg(")"),comma:new Yg(",",Qg),semi:new Yg(";",Qg),colon:new Yg(":",Qg),dot:new Yg("."),question:new Yg("?",Qg),arrow:new Yg("=>",Qg),template:new Yg("template"),invalidTemplate:new Yg("invalidTemplate"),ellipsis:new Yg("...",Qg),backQuote:new Yg("`",Jg),dollarBraceL:new Yg("${",{beforeExpr:!0,startsExpr:!0}),eq:new Yg("=",{beforeExpr:!0,isAssign:!0}),assign:new Yg("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Yg("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Yg("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Xg("||",1),logicalAND:Xg("&&",2),bitwiseOR:Xg("|",3),bitwiseXOR:Xg("^",4),bitwiseAND:Xg("&",5),equality:Xg("==/!=/===/!==",6),relational:Xg("</>/<=/>=",7),bitShift:Xg("<</>>/>>>",8),plusMin:new Yg("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Xg("%",10),star:Xg("*",10),slash:Xg("/",10),starstar:new Yg("**",{beforeExpr:!0}),_break:ev("break"),_case:ev("case",Qg),_catch:ev("catch"),_continue:ev("continue"),_debugger:ev("debugger"),_default:ev("default",Qg),_do:ev("do",{isLoop:!0,beforeExpr:!0}),_else:ev("else",Qg),_finally:ev("finally"),_for:ev("for",{isLoop:!0}),_function:ev("function",Jg),_if:ev("if"),_return:ev("return",Qg),_switch:ev("switch"),_throw:ev("throw",Qg),_try:ev("try"),_var:ev("var"),_const:ev("const"),_while:ev("while",{isLoop:!0}),_with:ev("with"),_new:ev("new",{beforeExpr:!0,startsExpr:!0}),_this:ev("this",Jg),_super:ev("super",Jg),_class:ev("class",Jg),_extends:ev("extends",Qg),_export:ev("export"),_import:ev("import"),_null:ev("null",Jg),_true:ev("true",Jg),_false:ev("false",Jg),_in:ev("in",{beforeExpr:!0,binop:7}),_instanceof:ev("instanceof",{beforeExpr:!0,binop:7}),_typeof:ev("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ev("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ev("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},nv=/\r\n?|\n|\u2028|\u2029/,rv=new RegExp(nv.source,"g");function iv(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var ov=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,av=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,sv=Object.prototype,lv=sv.hasOwnProperty,cv=sv.toString;function uv(e,t){return lv.call(e,t)}var hv=Array.isArray||function(e){return"[object Array]"===cv.call(e)},dv=function(e,t){this.line=e,this.column=t};dv.prototype.offset=function(e){return new dv(this.line,this.column+e)};var pv=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function fv(e,t){for(var n=1,r=0;;){rv.lastIndex=r;var i=rv.exec(e);if(!(i&&i.index<t))return new dv(n,t-r);++n,r=i.index+i[0].length}}var mv={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function gv(e){var t={};for(var n in mv)t[n]=e&&uv(e,n)?e[n]:mv[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),hv(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return hv(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,o,a,s){var l={type:n?"Block":"Line",value:r,start:i,end:o};e.locations&&(l.loc=new pv(this,a,s)),e.ranges&&(l.range=[i,o]),t.push(l)}}(t,t.onComment)),t}var vv=2,bv=1|vv,yv=4,wv=8;function xv(e,t){return vv|(e?yv:0)|(t?wv:0)}function Ev(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var kv=function(e,t,n){this.options=e=gv(e),this.sourceFile=e.sourceFile,this.keywords=Ev(jg[e.ecmaVersion>=6?6:5]);var r="";if(!e.allowReserved){for(var i=e.ecmaVersion;!(r=Dg[i]);i--);"module"===e.sourceType&&(r+=" await")}this.reservedWords=Ev(r);var o=(r?r+" ":"")+Dg.strict;this.reservedWordsStrict=Ev(o),this.reservedWordsStrictBind=Ev(o+" "+Dg.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(nv).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=tv.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},Sv={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0}};kv.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},Sv.inFunction.get=function(){return(this.currentVarScope().flags&vv)>0},Sv.inGenerator.get=function(){return(this.currentVarScope().flags&wv)>0},Sv.inAsync.get=function(){return(this.currentVarScope().flags&yv)>0},Sv.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},Sv.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},kv.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&vv)>0},kv.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},kv.parse=function(e,t){return new this(t,e).parse()},kv.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},kv.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(kv.prototype,Sv);var Cv=kv.prototype,Tv=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function _v(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}Cv.strictDirective=function(e){for(;;){av.lastIndex=e,e+=av.exec(this.input)[0].length;var t=Tv.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},Cv.eat=function(e){return this.type===e&&(this.next(),!0)},Cv.isContextual=function(e){return this.type===tv.name&&this.value===e&&!this.containsEsc},Cv.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},Cv.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},Cv.canInsertSemicolon=function(){return this.type===tv.eof||this.type===tv.braceR||nv.test(this.input.slice(this.lastTokEnd,this.start))},Cv.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Cv.semicolon=function(){this.eat(tv.semi)||this.insertSemicolon()||this.unexpected()},Cv.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},Cv.expect=function(e){this.eat(e)||this.unexpected()},Cv.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},Cv.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},Cv.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},Cv.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Cv.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var Nv=kv.prototype;Nv.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==tv.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var Pv={kind:"loop"},Av={kind:"switch"};Nv.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;av.lastIndex=this.pos;var e=av.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(Gg(n,!0)){for(var r=t+1;Kg(this.input.charCodeAt(r),!0);)++r;var i=this.input.slice(t,r);if(!Hg.test(i))return!0}return!1},Nv.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;av.lastIndex=this.pos;var e=av.exec(this.input),t=this.pos+e[0].length;return!(nv.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&Kg(this.input.charAt(t+8)))},Nv.parseStatement=function(e,t,n){var r,i=this.type,o=this.startNode();switch(this.isLet()&&(i=tv._var,r="let"),i){case tv._break:case tv._continue:return this.parseBreakContinueStatement(o,i.keyword);case tv._debugger:return this.parseDebuggerStatement(o);case tv._do:return this.parseDoStatement(o);case tv._for:return this.parseForStatement(o);case tv._function:return e&&(this.strict||"if"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!e);case tv._class:return e&&this.unexpected(),this.parseClass(o,!0);case tv._if:return this.parseIfStatement(o);case tv._return:return this.parseReturnStatement(o);case tv._switch:return this.parseSwitchStatement(o);case tv._throw:return this.parseThrowStatement(o);case tv._try:return this.parseTryStatement(o);case tv._const:case tv._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case tv._while:return this.parseWhileStatement(o);case tv._with:return this.parseWithStatement(o);case tv.braceL:return this.parseBlock(!0,o);case tv.semi:return this.parseEmptyStatement(o);case tv._export:case tv._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===tv._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!e);var a=this.value,s=this.parseExpression();return i===tv.name&&"Identifier"===s.type&&this.eat(tv.colon)?this.parseLabeledStatement(o,a,s,e):this.parseExpressionStatement(o,s)}},Nv.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(tv.semi)||this.insertSemicolon()?e.label=null:this.type!==tv.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},Nv.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},Nv.parseDoStatement=function(e){return this.next(),this.labels.push(Pv),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(tv._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(tv.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},Nv.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Pv),this.enterScope(0),this.expect(tv.parenL),this.type===tv.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===tv._var||this.type===tv._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),!(this.type===tv._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==i&&r.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,r)):(this.options.ecmaVersion>=9&&(this.type===tv._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r))}var o=new _v,a=this.parseExpression(!0,o);return this.type===tv._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===tv._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},Nv.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ov|(n?0:Mv),!1,t)},Nv.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(tv._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},Nv.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(tv.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},Nv.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(tv.braceL),this.labels.push(Av),this.enterScope(0);for(var n=!1;this.type!==tv.braceR;)if(this.type===tv._case||this.type===tv._default){var r=this.type===tv._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(tv.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},Nv.parseThrowStatement=function(e){return this.next(),nv.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Lv=[];Nv.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===tv._catch){var t=this.startNode();if(this.next(),this.eat(tv.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(tv.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(tv._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},Nv.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},Nv.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Pv),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},Nv.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},Nv.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},Nv.parseLabeledStatement=function(e,t,n,r){for(var i=0,o=this.labels;i<o.length;i+=1){o[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===tv._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var l=this.labels[s];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},Nv.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},Nv.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(tv.braceL),e&&this.enterScope(0);!this.eat(tv.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},Nv.parseFor=function(e,t){return e.init=t,this.expect(tv.semi),e.test=this.type===tv.semi?null:this.parseExpression(),this.expect(tv.semi),e.update=this.type===tv.parenR?null:this.parseExpression(),this.expect(tv.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,"ForStatement")},Nv.parseForIn=function(e,t){var n=this.type===tv._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(tv.parenR),this.exitScope(),e.body=this.parseStatement("for"),this.labels.pop(),this.finishNode(e,n)},Nv.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(tv.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===tv._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===tv._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(tv.comma))break}return e},Nv.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,"var"===t?1:2,!1)};var Ov=1,Mv=2;Nv.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(e.generator=this.eat(tv.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ov&&(e.id=4&t&&this.type!==tv.name?null:this.parseIdent(),!e.id||t&Mv||this.checkLVal(e.id,this.inModule&&!this.inFunction?2:3));var i=this.yieldPos,o=this.awaitPos;return this.yieldPos=0,this.awaitPos=0,this.enterScope(xv(e.async,e.generator)),t&Ov||(e.id=this.type===tv.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.yieldPos=i,this.awaitPos=o,this.finishNode(e,t&Ov?"FunctionDeclaration":"FunctionExpression")},Nv.parseFunctionParams=function(e){this.expect(tv.parenL),e.params=this.parseBindingList(tv.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Nv.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(tv.braceL);!this.eat(tv.braceR);){var i=this.parseClassElement(null!==e.superClass);i&&(n.body.push(i),"MethodDefinition"===i.type&&"constructor"===i.kind&&(r&&this.raise(i.start,"Duplicate constructor in the same class"),r=!0))}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},Nv.parseClassElement=function(e){var t=this;if(this.eat(tv.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===tv.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,o),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(tv.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(tv.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,s=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",s=e),this.parseClassMethod(n,i,o,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},Nv.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},Nv.parseClassId=function(e,t){e.id=this.type===tv.name?this.parseIdent():!0===t?this.unexpected():null},Nv.parseClassSuper=function(e){e.superClass=this.eat(tv._extends)?this.parseExprSubscripts():null},Nv.parseExport=function(e,t){if(this.next(),this.eat(tv.star))return this.expectContextual("from"),this.type!==tv.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(tv._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===tv._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|Ov,!1,n,!0)}else if(this.type===tv._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==tv.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,a=e.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},Nv.checkExport=function(e,t,n){e&&(uv(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},Nv.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(e,o)}else if("ArrayPattern"===n)for(var a=0,s=t.elements;a<s.length;a+=1){var l=s[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},Nv.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},Nv.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Nv.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(tv.braceL);!this.eat(tv.braceR);){if(n)n=!1;else if(this.expect(tv.comma),this.afterTrailingComma(tv.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},Nv.parseImport=function(e){return this.next(),this.type===tv.string?(e.specifiers=Lv,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===tv.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},Nv.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===tv.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(tv.comma))return e}if(this.type===tv.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(tv.braceL);!this.eat(tv.braceR);){if(t)t=!1;else if(this.expect(tv.comma),this.afterTrailingComma(tv.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},Nv.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},Nv.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Iv=kv.prototype;Iv.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Iv.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var o=e[n-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},Iv.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Iv.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==tv.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Iv.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case tv.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(tv.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case tv.braceL:return this.parseObj(!0)}return this.parseIdent()},Iv.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(tv.comma),t&&this.type===tv.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===tv.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===tv.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},Iv.parseBindingListItem=function(e){return e},Iv.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(tv.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Iv.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(uv(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,s=e.elements;a<s.length;a+=1){var l=s[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var Rv=kv.prototype;Rv.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];if(a)("init"===o?this.strict&&a.init||a.get||a.set:a.init||a[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else a=t[r]={init:!1,get:!1,set:!1};a[o]=!0}}},Rv.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===tv.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(tv.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},Rv.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield();this.exprAllowed=!1}var r=!1,i=-1,o=-1,a=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new _v,r=!0);var s=this.start,l=this.startLoc;this.type!==tv.parenL&&this.type!==tv.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,s,l)),this.type.isAssign){var u=this.startNodeAt(s,l);return u.operator=this.value,u.left=this.type===tv.eq?this.toAssignable(c,!1,t):c,r||_v.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),a>-1&&(t.shorthandAssign=a),c},Rv.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(tv.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(tv.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},Rv.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},Rv.parseExprOp=function(e,t,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==tv._in)&&o>r){var a=this.type===tv.logicalOR||this.type===tv.logicalAND,s=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,o,i),h=this.buildBinary(t,n,e,u,s,a);return this.parseExprOp(h,t,n,r,i)}return e},Rv.buildBinary=function(e,t,n,r,i,o){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},Rv.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===tv.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(tv.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},Rv.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var o=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},Rv.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=this.eat(tv.bracketL))||this.eat(tv.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=o?this.parseExpression():this.parseIdent(!0),a.computed=!!o,o&&this.expect(tv.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(tv.parenL)){var s=new _v,l=this.yieldPos,c=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var u=this.parseExprList(tv.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(tv.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=c,this.parseArrowExpression(this.startNodeAt(t,n),u,!0);this.checkExpressionErrors(s,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos;var h=this.startNodeAt(t,n);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}else{if(this.type!==tv.backQuote)return e;var d=this.startNodeAt(t,n);d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression")}},Rv.parseExprAtom=function(e){this.type===tv.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case tv._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==tv.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==tv.dot&&this.type!==tv.bracketL&&this.type!==tv.parenL&&this.unexpected(),this.finishNode(t,"Super");case tv._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case tv.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(this.type!==tv.name);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(tv._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(tv.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===tv.name&&!o)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(tv.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case tv.regexp:var s=this.value;return(t=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},t;case tv.num:case tv.string:return this.parseLiteral(this.value);case tv._null:case tv._true:case tv._false:return(t=this.startNode()).value=this.type===tv._null?null:this.type===tv._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case tv.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case tv.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(tv.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case tv.braceL:return this.parseObj(!1,e);case tv._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case tv._class:return this.parseClass(this.startNode(),!1);case tv._new:return this.parseNew();case tv.backQuote:return this.parseTemplate();default:this.unexpected()}},Rv.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},Rv.parseParenExpression=function(){this.expect(tv.parenL);var e=this.parseExpression();return this.expect(tv.parenR),e},Rv.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,l=[],c=!0,u=!1,h=new _v,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==tv.parenR;){if(c?c=!1:this.expect(tv.comma),i&&this.afterTrailingComma(tv.parenR,!0)){u=!0;break}if(this.type===tv.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===tv.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(tv.parenR),e&&!this.canInsertSemicolon()&&this.eat(tv.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((t=this.startNodeAt(a,s)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},Rv.parseParenItem=function(e){return e},Rv.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var Dv=[];Rv.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(tv.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.eat(tv.parenL)?e.arguments=this.parseExprList(tv.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Dv,this.finishNode(e,"NewExpression")},Rv.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===tv.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===tv.backQuote,this.finishNode(n,"TemplateElement")},Rv.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===tv.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(tv.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(tv.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},Rv.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===tv.name||this.type===tv.num||this.type===tv.string||this.type===tv.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===tv.star)&&!nv.test(this.input.slice(this.lastTokEnd,this.start))},Rv.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(tv.braceR);){if(r)r=!1;else if(this.expect(tv.comma),this.afterTrailingComma(tv.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),n.properties.push(o)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},Rv.parseProperty=function(e,t){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(tv.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===tv.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===tv.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===tv.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(n=this.eat(tv.star)));var s=this.containsEsc;return this.parsePropertyName(a),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(tv.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,o,t,s),this.finishNode(a,"Property")},Rv.parsePropertyValue=function(e,t,n,r,i,o,a,s){if((n||r)&&this.type===tv.colon&&this.unexpected(),this.eat(tv.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===tv.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===tv.comma||this.type===tv.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===tv.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},Rv.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(tv.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(tv.bracketR),e.key;e.computed=!1}return e.key=this.type===tv.num||this.type===tv.string?this.parseExprAtom():this.parseIdent(!0)},Rv.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},Rv.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.enterScope(64|xv(t,r.generator)|(n?128:0)),this.expect(tv.parenL),r.params=this.parseBindingList(tv.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.yieldPos=i,this.awaitPos=o,this.finishNode(r,"FunctionExpression")},Rv.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos;return this.enterScope(16|xv(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.yieldPos=r,this.awaitPos=i,this.finishNode(e,"ArrowFunctionExpression")},Rv.parseFunctionBody=function(e,t){var n=t&&this.type!==tv.braceL,r=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);r&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!r&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=r},Rv.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},Rv.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,1,t?null:n)}},Rv.parseExprList=function(e,t,n,r){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(tv.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===tv.comma?a=null:this.type===tv.ellipsis?(a=this.parseSpread(r),r&&this.type===tv.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},Rv.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},Rv.parseIdent=function(e,t){var n=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===tv.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},Rv.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===tv.semi||this.canInsertSemicolon()||this.type!==tv.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(tv.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},Rv.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Fv=kv.prototype;Fv.raise=function(e,t){var n=fv(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Fv.raiseRecoverable=Fv.raise,Fv.curPosition=function(){if(this.options.locations)return new dv(this.curLine,this.pos-this.lineStart)};var jv=kv.prototype,Hv=function(e){this.flags=e,this.var=[],this.lexical=[]};jv.enterScope=function(e){this.scopeStack.push(new Hv(e))},jv.exitScope=function(){this.scopeStack.pop()},jv.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e)}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var o=this.currentScope();r=o.lexical.indexOf(e)>-1,o.var.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var s=this.scopeStack[a];if(s.lexical.indexOf(e)>-1&&!(32&s.flags)&&s.lexical[0]===e&&(r=!0),s.var.push(e),s.flags&bv)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},jv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},jv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&bv)return t}},jv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&bv&&!(16&t.flags))return t}};var Uv=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new pv(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},$v=kv.prototype;function Vv(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}$v.startNode=function(){return new Uv(this,this.start,this.startLoc)},$v.startNodeAt=function(e,t){return new Uv(this,e,t)},$v.finishNode=function(e,t){return Vv.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},$v.finishNodeAt=function(e,t,n,r){return Vv.call(this,e,t,n,r)};var Wv=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Bv={b_stat:new Wv("{",!1),b_expr:new Wv("{",!0),b_tmpl:new Wv("${",!1),p_stat:new Wv("(",!1),p_expr:new Wv("(",!0),q_tmpl:new Wv("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Wv("function",!1),f_expr:new Wv("function",!0),f_expr_gen:new Wv("function",!0,!1,null,!0),f_gen:new Wv("function",!1,!1,null,!0)},zv=kv.prototype;zv.initialContext=function(){return[Bv.b_stat]},zv.braceIsBlock=function(e){var t=this.curContext();return t===Bv.f_expr||t===Bv.f_stat||(e!==tv.colon||t!==Bv.b_stat&&t!==Bv.b_expr?e===tv._return||e===tv.name&&this.exprAllowed?nv.test(this.input.slice(this.lastTokEnd,this.start)):e===tv._else||e===tv.semi||e===tv.eof||e===tv.parenR||e===tv.arrow||(e===tv.braceL?t===Bv.b_stat:e!==tv._var&&e!==tv._const&&e!==tv.name&&!this.exprAllowed):!t.isExpr)},zv.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},zv.updateContext=function(e){var t,n=this.type;n.keyword&&e===tv.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},tv.parenR.updateContext=tv.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===Bv.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},tv.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Bv.b_stat:Bv.b_expr),this.exprAllowed=!0},tv.dollarBraceL.updateContext=function(){this.context.push(Bv.b_tmpl),this.exprAllowed=!0},tv.parenL.updateContext=function(e){var t=e===tv._if||e===tv._for||e===tv._with||e===tv._while;this.context.push(t?Bv.p_stat:Bv.p_expr),this.exprAllowed=!0},tv.incDec.updateContext=function(){},tv._function.updateContext=tv._class.updateContext=function(e){!e.beforeExpr||e===tv.semi||e===tv._else||e===tv._return&&nv.test(this.input.slice(this.lastTokEnd,this.start))||(e===tv.colon||e===tv.braceL)&&this.curContext()===Bv.b_stat?this.context.push(Bv.f_stat):this.context.push(Bv.f_expr),this.exprAllowed=!1},tv.backQuote.updateContext=function(){this.curContext()===Bv.q_tmpl?this.context.pop():this.context.push(Bv.q_tmpl),this.exprAllowed=!1},tv.star.updateContext=function(e){if(e===tv._function){var t=this.context.length-1;this.context[t]===Bv.f_expr?this.context[t]=Bv.f_expr_gen:this.context[t]=Bv.f_gen}this.exprAllowed=!0},tv.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==tv.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var qv={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(qv.$LONE,qv.General_Category),qv.gc=qv.General_Category,qv.sc=qv.Script_Extensions=qv.scx=qv.Script;var Gv=kv.prototype,Kv=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Yv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Xv(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Qv(e){return e>=65&&e<=90||e>=97&&e<=122}function Jv(e){return Qv(e)||95===e}function Zv(e){return Jv(e)||eb(e)}function eb(e){return e>=48&&e<=57}function tb(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function nb(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function rb(e){return e>=48&&e<=55}Kv.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Kv.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Kv.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Kv.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||r<=55295||r>=57344||e+1>=n?e+1:e+2},Kv.prototype.current=function(){return this.at(this.pos)},Kv.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Kv.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Kv.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},Gv.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Gv.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Gv.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Gv.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Gv.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Gv.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Gv.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Gv.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Gv.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Gv.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Gv.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Gv.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Gv.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Gv.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Gv.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Gv.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Gv.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Xv(t)&&(e.lastIntValue=t,e.advance(),!0)},Gv.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!Xv(n);)e.advance();return e.pos!==t},Gv.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Gv.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Gv.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Gv.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Yv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Yv(e.lastIntValue);return!0}return!1},Gv.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return Gg(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Gv.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return Kg(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Gv.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Gv.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Gv.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Gv.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Gv.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Gv.regexp_eatZero=function(e){return 48===e.current()&&!eb(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Gv.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Gv.regexp_eatControlLetter=function(e){var t=e.current();return!!Qv(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Gv.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(r-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Gv.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Gv.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Gv.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Gv.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Gv.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){qv.hasOwnProperty(t)&&-1!==qv[t].indexOf(n)||e.raise("Invalid property name")},Gv.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===qv.$LONE.indexOf(t)&&e.raise("Invalid property name")},Gv.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Jv(t=e.current());)e.lastStringValue+=Yv(t),e.advance();return""!==e.lastStringValue},Gv.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Zv(t=e.current());)e.lastStringValue+=Yv(t),e.advance();return""!==e.lastStringValue},Gv.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Gv.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Gv.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Gv.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||rb(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Gv.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Gv.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!eb(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Gv.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Gv.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;eb(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Gv.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;tb(n=e.current());)e.lastIntValue=16*e.lastIntValue+nb(n),e.advance();return e.pos!==t},Gv.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Gv.regexp_eatOctalDigit=function(e){var t=e.current();return rb(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Gv.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!tb(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+nb(i),e.advance()}return!0};var ib=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new pv(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ob=kv.prototype;function ab(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}ob.next=function(){this.options.onToken&&this.options.onToken(new ib(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ob.getToken=function(){return this.next(),new ib(this)},"undefined"!=typeof Symbol&&(ob[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===tv.eof,value:t}}}}),ob.curContext=function(){return this.context[this.context.length-1]},ob.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(tv.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ob.readToken=function(e){return Gg(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ob.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},ob.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(rv.lastIndex=n;(e=rv.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},ob.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!iv(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ob.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&ov.test(String.fromCharCode(e))))break e;++this.pos}}},ob.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ob.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(tv.ellipsis)):(++this.pos,this.finishToken(tv.dot))},ob.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(tv.assign,2):this.finishOp(tv.slash,1)},ob.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?tv.star:tv.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=tv.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(tv.assign,n+1):this.finishOp(r,n)},ob.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?tv.logicalOR:tv.logicalAND,2):61===t?this.finishOp(tv.assign,2):this.finishOp(124===e?tv.bitwiseOR:tv.bitwiseAND,1)},ob.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(tv.assign,2):this.finishOp(tv.bitwiseXOR,1)},ob.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!nv.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(tv.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(tv.assign,2):this.finishOp(tv.plusMin,1)},ob.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(tv.assign,n+1):this.finishOp(tv.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(tv.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ob.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(tv.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(tv.arrow)):this.finishOp(61===e?tv.eq:tv.prefix,1)},ob.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(tv.parenL);case 41:return++this.pos,this.finishToken(tv.parenR);case 59:return++this.pos,this.finishToken(tv.semi);case 44:return++this.pos,this.finishToken(tv.comma);case 91:return++this.pos,this.finishToken(tv.bracketL);case 93:return++this.pos,this.finishToken(tv.bracketR);case 123:return++this.pos,this.finishToken(tv.braceL);case 125:return++this.pos,this.finishToken(tv.braceR);case 58:return++this.pos,this.finishToken(tv.colon);case 63:return++this.pos,this.finishToken(tv.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(tv.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(tv.prefix,1)}this.raise(this.pos,"Unexpected character '"+ab(e)+"'")},ob.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ob.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(nv.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new Kv(this));s.reset(n,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(i,a)}catch(c){}return this.finishToken(tv.regexp,{pattern:i,flags:a,value:l})},ob.readInt=function(e,t){for(var n=this.pos,r=0,i=0,o=null==t?1/0:t;i<o;++i){var a=this.input.charCodeAt(this.pos),s=void 0;if((s=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+s}return this.pos===n||null!=t&&this.pos-n!==t?null:r},ob.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),Gg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(tv.num,t)},ob.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),Gg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=n?parseInt(i,8):parseFloat(i);return this.finishToken(tv.num,o)},ob.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ob.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(iv(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(tv.string,t)};var sb={};ob.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==sb)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ob.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw sb;this.raise(e,t)},ob.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==tv.template&&this.type!==tv.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(tv.template,e)):36===n?(this.pos+=2,this.finishToken(tv.dollarBraceL)):(++this.pos,this.finishToken(tv.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(iv(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ob.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(tv.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ob.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ab(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(t)}},ob.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ob.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Kg(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?Gg:Kg)(a,r)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=ab(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ob.readWord=function(){var e=this.readWord1(),t=tv.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=Zg[e]),this.finishToken(t,e)};var lb=function(e){return e&&e.default||e}(Object.freeze({version:"6.0.4",parse:function(e,t){return kv.parse(e,t)},parseExpressionAt:function(e,t,n){return kv.parseExpressionAt(e,t,n)},tokenizer:function(e,t){return kv.tokenizer(e,t)},Parser:kv,defaultOptions:mv,Position:dv,SourceLocation:pv,getLineInfo:fv,Node:Uv,TokenType:Yg,tokTypes:tv,keywordTypes:Zg,TokContext:Wv,tokContexts:Bv,isIdentifierChar:Kg,isIdentifierStart:Gg,Token:ib,isNewLine:iv,lineBreak:nv,lineBreakG:rv,nonASCIIwhitespace:ov}));const cb=lb.tokTypes,ub=lb.isIdentifierStart;var hb=function(e){return class extends e{parseLiteral(e){const t=super.parseLiteral(e);return 110==t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw),t}readRadixNumber(e){let t=this.pos;this.pos+=2;let n=this.readInt(e);if(null===n&&this.raise(this.start+2,`Expected number in radix ${e}`),110==this.input.charCodeAt(this.pos)){let e=this.input.slice(t,this.pos);n="undefined"!=typeof BigInt?BigInt(e):null,++this.pos}else ub(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(cb.num,n)}readNumber(e){let t=this.pos;if(e)return super.readNumber(e);if(48===this.input.charCodeAt(t)&&110!==this.input.charCodeAt(t+1))return super.readNumber(e);if(null===this.readInt(10)&&this.raise(t,"Invalid number"),110!=this.input.charCodeAt(this.pos))return this.pos=t,super.readNumber(e);let n=this.input.slice(t,this.pos),r="undefined"!=typeof BigInt?BigInt(n):null;return++this.pos,this.finishToken(cb.num,r)}}};function db(e){const t=new e;function n({input:e,pos:n}){return t.input=e,t.pos=n,t.nextToken(),t}return class extends e{parseExprAtom(){if(this.type===tv._import){const{type:e}=n(this);if(e===tv.parenL)return function(e){const t=e.startNode();return e.expect(tv._import),e.finishNode(t,"Import")}(this);this.unexpected()}return super.parseExprAtom.apply(this,arguments)}parseStatement(){if(this.type===tv._import){const{type:e}=n(this);if(e===tv.parenL)return function(e){const t=e.startNode(),{start:n}=e,r=e.startNode(),i=e.parseExprAtom();e.expect(tv.parenL),r.arguments=[e.parseMaybeAssign()],r.callee=i,e.finishNode(r,"CallExpression"),e.expect(tv.parenR);const o=e.parseSubscripts(r,n);return e.parseExpressionStatement(t,o)}(this)}return super.parseStatement.apply(this,arguments)}}}function pb(e,t,n,r){var i=[];n||(n=vb),function e(r,o,a){var s=a||r.type,l=t[s],c=r!==i[i.length-1];c&&i.push(r),n[s](r,o,e),l&&l(r,o||i,i),c&&i.pop()}(e,r)}tv._import.startsExpr=!0;var fb=Object.create||function(e){function t(){}return t.prototype=e,new t};function mb(e,t,n){n(e,t)}function gb(e,t,n){}var vb={};vb.Program=vb.BlockStatement=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t,"Statement")}},vb.Statement=mb,vb.EmptyStatement=gb,vb.ExpressionStatement=vb.ParenthesizedExpression=function(e,t,n){return n(e.expression,t,"Expression")},vb.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},vb.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},vb.BreakStatement=vb.ContinueStatement=gb,vb.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},vb.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1){var o=i[r];o.test&&n(o.test,t,"Expression");for(var a=0,s=o.consequent;a<s.length;a+=1){n(s[a],t,"Statement")}}},vb.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1){n(i[r],t,"Statement")}},vb.ReturnStatement=vb.YieldExpression=vb.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},vb.ThrowStatement=vb.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},vb.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},vb.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},vb.WhileStatement=vb.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},vb.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},vb.ForInStatement=vb.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},vb.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},vb.DebuggerStatement=gb,vb.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},vb.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1){n(i[r],t)}},vb.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},vb.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1){n(i[r],t,"Pattern")}n(e.body,t,e.expression?"Expression":"Statement")},vb.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},vb.VariablePattern=gb,vb.MemberPattern=mb,vb.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},vb.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var o=i[r];o&&n(o,t,"Pattern")}},vb.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];"Property"===o.type?(o.computed&&n(o.key,t,"Expression"),n(o.value,t,"Pattern")):"RestElement"===o.type&&n(o.argument,t,"Pattern")}},vb.Expression=mb,vb.ThisExpression=vb.Super=vb.MetaProperty=gb,vb.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var o=i[r];o&&n(o,t,"Expression")}},vb.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){n(i[r],t)}},vb.FunctionExpression=vb.ArrowFunctionExpression=vb.FunctionDeclaration,vb.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1){n(i[r],t,"Expression")}},vb.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1){n(i[r],t)}for(var o=0,a=e.expressions;o<a.length;o+=1){n(a[o],t,"Expression")}},vb.TemplateElement=gb,vb.UnaryExpression=vb.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},vb.BinaryExpression=vb.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},vb.AssignmentExpression=vb.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},vb.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},vb.NewExpression=vb.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1){n(i[r],t,"Expression")}},vb.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},vb.ExportNamedDeclaration=vb.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},vb.ExportAllDeclaration=function(e,t,n){n(e.source,t,"Expression")},vb.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1){n(i[r],t)}n(e.source,t,"Expression")},vb.ImportSpecifier=vb.ImportDefaultSpecifier=vb.ImportNamespaceSpecifier=vb.Identifier=vb.Literal=gb,vb.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},vb.ClassDeclaration=vb.ClassExpression=function(e,t,n){return n(e,t,"Class")},vb.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},vb.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1){n(i[r],t)}},vb.MethodDefinition=vb.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")};var bb=function(e,t){var n=fb(t||vb);for(var r in e)n[r]=e[r];return n}({Import(){},SpreadProperty(e,t,n){n(e.argument,t,"Expression")},ObjectPattern(e,t,n){const r=e.properties;for(let i=0;i<r.length;++i){const e=r[i];n(e.value||e.argument,t,"Pattern")}},ViewExpression(e,t,n){n(e.id,t,"Identifier")},MutableExpression(e,t,n){n(e.id,t,"Identifier")}});function yb(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type||"ArrowFunctionExpression"===e.type||"Program"===e.type}function wb(e){return"BlockStatement"===e.type||"ForInStatement"===e.type||"ForOfStatement"===e.type||"ForStatement"===e.type||yb(e)}function xb(e){return"FunctionExpression"===e.type||"FunctionDeclaration"===e.type}const Eb=2,kb=4,Sb=8;function Cb(e,{globals:t}={}){const n=Tb.parse(e);if(n.body&&"ImportDeclaration"!==n.body.type)try{n.references=function(e,t){const n={type:"Program",body:[e.body]},r=new Map,i=new Set(t),o=[];function a(e,t){const n=r.get(e);return!!n&&n.has(t)}function s(e,t){const n=r.get(e);n?n.add(t.name):r.set(e,new Set([t.name]))}function l(e){e.params.forEach(t=>c(t,e)),e.id&&s(e,e.id)}function c(e,t){switch(e.type){case"Identifier":s(t,e);break;case"ObjectPattern":e.properties.forEach(e=>c(e,t));break;case"ArrayPattern":e.elements.forEach(e=>e&&c(e,t));break;case"Property":c(e.value,t);break;case"RestElement":c(e.argument,t);break;case"AssignmentPattern":c(e.left,t);break;default:throw new Error("Unrecognized pattern type: "+e.type)}}function u(e){s(n,e.local)}function h(e,t){let n=e.name;if("undefined"!==n){for(let r=t.length-2;r>=0;--r){if("arguments"===n&&xb(t[r]))return;if(a(t[r],n))return;"ViewExpression"===t[r].type&&(n=`viewof ${(e=t[r]).id.name}`),"MutableExpression"===t[r].type&&(n=`mutable ${(e=t[r]).id.name}`)}if(!i.has(n)){if("arguments"===n)throw Object.assign(new ReferenceError("arguments is not allowed"),{node:e});i.add(n),o.push(e)}}}function d(e,t){switch(e.type){case"Identifier":case"VariablePattern":n(e,t);break;case"ArrayPattern":case"ObjectPattern":pb(e,{Identifier:n,VariablePattern:n},bb)}function n(e,n){for(const r of t)if(a(r,e.name))return;if("MutableExpression"!==n[n.length-2].type)throw Object.assign(new TypeError(`Assignment to constant variable ${e.name}`),{node:e})}}function p(e,t){d(e.left,t)}return pb(n,{VariableDeclaration:(e,t)=>{let n=null;for(let r=t.length-1;r>=0&&null===n;--r)("var"===e.kind?yb(t[r]):wb(t[r]))&&(n=t[r]);e.declarations.forEach(e=>c(e.id,n))},FunctionDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;--r)yb(t[r])&&(n=t[r]);s(n,e.id),l(e)},Function:l,ClassDeclaration:(e,t)=>{let n=null;for(let r=t.length-2;r>=0&&null===n;r--)yb(t[r])&&(n=t[r]);s(n,e.id)},Class:function(e){e.id&&s(e,e.id)},CatchClause:function(e){e.param&&c(e.param,e)},ImportDefaultSpecifier:u,ImportSpecifier:u,ImportNamespaceSpecifier:u},bb),pb(n,{VariablePattern:h,Identifier:h},bb),pb(n,{AssignmentExpression:p,UpdateExpression:function(e,t){d(e.argument,t)},ForOfStatement:p,ForInStatement:p},bb),o}(n,t)}catch(r){if(r.node){const t=fv(e,r.node.start);r.message+=` (${t.line}:${t.column})`,r.pos=r.node.start,r.loc=t,delete r.node}throw r}return n}class Tb extends(kv.extend(hb,db)){constructor(...e){super(...e),this.O_function=0,this.O_async=!1,this.O_generator=!1}enterScope(e){return e&Eb&&++this.O_function,super.enterScope.apply(this,arguments)}exitScope(){return this.currentScope().flags&Eb&&--this.O_function,super.exitScope.apply(this,arguments)}parseForIn(e){return 1===this.O_function&&e.await&&(this.O_async=!0),super.parseForIn.apply(this,arguments)}parseAwait(){return 1===this.O_function&&(this.O_async=!0),super.parseAwait.apply(this,arguments)}parseYield(){return 1===this.O_function&&(this.O_generator=!0),super.parseYield.apply(this,arguments)}parseImport(e){return this.next(),e.specifiers=this.parseImportSpecifiers(),this.type===tv._with&&(this.next(),e.injections=this.parseImportSpecifiers()),this.expectContextual("from"),e.source=this.type===tv.string?this.parseExprAtom():this.unexpected(),this.finishNode(e,"ImportDeclaration")}parseImportSpecifiers(){const e=[];let t=!0;for(this.expect(tv.braceL);!this.eat(tv.braceR);){if(t)t=!1;else if(this.expect(tv.comma),this.afterTrailingComma(tv.braceR))break;const n=this.startNode();n.view=this.eatContextual("viewof"),n.view||(n.mutable=this.eatContextual("mutable")),n.imported=this.parseIdent(),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportSpecifier"))}return e}parseExprAtom(){return this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||super.parseExprAtom.apply(this,arguments)}parseCell(e,t){const n=new Tb({},this.input,this.start);let r=n.getToken(),i=null,o=null;return this.strict=!0,this.enterScope(Eb|kb|Sb),r.type===tv._import?i=this.parseImport(this.startNode()):r.type!==tv.eof&&(r.type===tv.name&&("viewof"!==r.value&&"mutable"!==r.value||(r=n.getToken()).type!==tv.name&&n.unexpected(),(r=n.getToken()).type===tv.eq&&(o=this.parseMaybeKeywordExpression("viewof","ViewExpression")||this.parseMaybeKeywordExpression("mutable","MutableExpression")||this.parseIdent(),r=n.getToken(),this.expect(tv.eq))),r.type===tv.braceL?i=this.parseBlock():(i=this.parseExpression(),null!==o||"FunctionExpression"!==i.type&&"ClassExpression"!==i.type||(o=i.id))),t&&this.expect(tv.eof),e.id=o,e.async=this.O_async,e.generator=this.O_generator,e.body=i,this.exitScope(),this.finishNode(e,"Cell")}parseTopLevel(e){return this.parseCell(e,!0)}toAssignable(e){return"MutableExpression"===e.type?e:super.toAssignable.apply(this,arguments)}checkUnreserved(e){return"viewof"!==e.name&&"mutable"!==e.name||this.raise(e.start,`Unexpected keyword '${e.name}'`),super.checkUnreserved(e)}checkLVal(e,t,n){return"MutableExpression"===e.type?super.checkLVal.call(this,e.id,t,n):super.checkLVal.apply(this,arguments)}unexpected(e){this.raise(null!=e?e:this.start,this.type===tv.eof?"Unexpected end of input":"Unexpected token")}parseMaybeKeywordExpression(e,t){if(this.isContextual(e)){const e=this.startNode();return this.next(),e.id=this.parseIdent(),this.finishNode(e,t)}}}var _b=new Set(["Array","ArrayBuffer","atob","AudioContext","Blob","Boolean","BigInt","btoa","clearInterval","clearTimeout","console","crypto","CustomEvent","DataView","Date","decodeURI","decodeURIComponent","devicePixelRatio","document","encodeURI","encodeURIComponent","Error","escape","eval","fetch","File","FileList","FileReader","Float32Array","Float64Array","Function","Headers","Image","ImageData","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","NaN","Number","navigator","Object","parseFloat","parseInt","performance","Path2D","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","cancelAnimationFrame","requestAnimationFrame","Set","setInterval","setTimeout","String","Symbol","SyntaxError","TextDecoder","TextEncoder","this","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","URL","WeakMap","WeakSet","WebSocket","Worker","window"]);class Nb{constructor(){this._nameNode=null,this._inputNodes=[],this._offsets=[{line:1,column:0,lineOffset:0,columnOffset:0}]}_ensureOffset(e,t){let n=this._closest(e,t);n&&n.line===e&&n.column===t||this._offsets.push({line:e,column:t,lineOffset:n?n.lineOffset:0,columnOffset:n&&n.line===e?n.columnOffset:0})}_closest(e,t){let n=null;return this._offsets.forEach(r=>{(r.line<e||r.line===e&&r.column<=t)&&(!n||r.line>n.line||r.line===n.line&&r.column>n.column)&&(n=r)}),n}translate(e,t){const n=this._closest(e,t);if(n)return{line:e+n.lineOffset,column:e===n.line?t+n.columnOffset:t}}translateError(e){let t;if(e.runtime){const t=e.runtime.input?this._inputNodes.find(t=>e.runtime.input===("ViewExpression"===t.type?`viewof ${t.id.name}`:t.name)):this._nameNode;return t&&{line:t.location.line,column:t.location.column+1}}if(e.message&&(t=/^[\s\S]+\((\d+):(\d+)\)$/m.exec(e.message)))return this.translate(+t[1],+t[2]+1);if(e.stack){const n=e.stack.split("\n");for(let e=n.length-1;e>=0;e--){const r=n[e];if((t=/<anonymous>:(\d+):(\d+)\)$/.exec(r))||(t=/Function:(\d+):(\d+)$/.exec(r)),t)return this.translate(+t[1],+t[2])}}}name(e){this._nameNode=e}inputs(e){this._inputNodes=e}insert(e,t,n){const{line:r,column:i}=fv(e,t),o=fv(n,n.length);return--o.line,this._ensureOffset(r,i),this._offsets.forEach(e=>{if(e.line>r)e.line+=o.line,e.lineOffset-=o.line;else if(e.line===r&&e.column>=i)if(e.line+=o.line,e.lineOffset-=o.line,o.line){const t=o.column+(e.column-i);e.columnOffset+=e.column-t,e.column=t}else e.column+=o.column,e.columnOffset-=o.column}),e.slice(0,t)+n+e.slice(t)}delete(e,t,n){const{line:r,column:i}=fv(e,t),{line:o,column:a}=fv(e,n),s=o-r,l=o===r?a-i:0;return this._ensureOffset(o,a),this._offsets=this._offsets.filter(e=>{if(r<e.line&&o>e.line||e.line===r&&o>r&&e.column>=i||e.line===o&&r<o&&e.column<a||r===e.line&&o===e.line&&e.column>=i&&e.column<a)return!1;if(e.line>r){if(e.line===o){const t=i+e.column-a;e.columnOffset+=e.column-t,e.column=t}e.line-=s,e.lineOffset+=s}else e.line===r&&e.line===o&&e.column>=a&&(e.column-=l,e.columnOffset+=l);return!0}),e.slice(0,t)+e.slice(n)}sort(){return this._offsets.sort((e,t)=>e.line===t.line?e.column-t.column:e.line-t.line),this}}const Pb=/^\s*#+\s*(.*)$/m;async function Ab(e,t,n,r){const i=new Map,o=new Map,a=l(e,t,n);function s(e){let t=i.get(e);return t||i.set(e,t=async function(e){const t=await r(e),n=new Map;return t.nodes.forEach(t=>{const r=Ib(t.value);if(r.name)n.set(r.name,r);else if(r.imports){const i=l(e,t.id,r);r.imports.forEach(e=>{n.set(e.name,{name:e.name,remote:e.remote,module:i})})}}),n}(e)),t}function l(e,t,n){let r=n.module;if(!n.exports)return r;let o=e+"/"+t;return i.set(o,s(r).then(t=>(t=new Map(t),n.exports.forEach(n=>{t.set(n.name,{name:n.name,remote:n.remote,module:e})}),t))),o}try{await async function t(n,r,i){if(n===e)return;if(i>8)throw new RangeError("Maximum import stack size exceeded");const a=await s(n);let l=o.get(n);const c=new Map;l||o.set(n,l=new Map);for(const e of r){let t=a.get(e);if(t)if(l.set(e,t),t.module){let e=c.get(t.module);e||c.set(t.module,e=new Set),e.add(t.remote)}else t.inputs.forEach(r.add,r)}for(const[e,o]of c)await t(e,o,i+1)}(a,(c=n.imports,new Set(c.map(Lb))),1)}catch(u){return{name:void 0,view:!1,inputs:[],body:`throw new ${u.constructor.name}(${JSON.stringify(u.message)})`,sourcemap:new Nb}}var c;return{id:a,imports:n.imports,module:n.module,modules:Array.from(o,Ob)}}function Lb(e){return e.remote}function Ob(e){return{id:e[0],values:Array.from(e[1].values())}}const Mb={globals:_b};function Ib(e){const t=new Nb;try{const r={},i=Cb(e,Mb),o=new Map;let a,s=!1,l=!1;if(null===i.body)return{name:a,view:s,mutable:l,inputs:[],features:r,body:"",sourcemap:t};if("ImportDeclaration"===i.body.type)return function(e){return{module:e.source.value,imports:Fb(e.specifiers),exports:e.injections&&Fb(e.injections)}}(i.body);const{references:c}=i;for(const t of c)t.location=fv(e,t.start);let u;t.inputs(c);let h=0;const d=function(n){let r=o.get(n.id.name);if(!r){let e=-1;u||(u=function(e){const t=new Set;return pb(e,{Identifier:e=>t.add(e.name)},bb),t}(i.body));do{r=`$${++e}`}while(u.has(r));u.add(r),o.set(n.id.name,r)}const a="ViewExpression"===n.type?r:`${r}.value`;e=t.delete(e,n.start+h,n.end+h),e=t.insert(e,n.start+h,a),h+=n.start-n.end+a.length};if(pb(i.body,{ViewExpression:d,MutableExpression:d},bb),pb(i.body,{Import:function(n,i){const o=i[i.length-2].arguments[0];r.dynamicImport=!0,"Literal"!==o.type||/^(\w+:|\.?\.?\/)/.test(o.value)||(e=t.insert(e,o.end-1+h,"?module"),e=t.insert(e,o.start+1+h,"https://unpkg.com/"),h+=25)}},bb),pb(i.body,{Literal:function(e){e.bigint&&(r.bigInt=!0)}},bb),i.id){s="ViewExpression"===i.id.type,l="MutableExpression"===i.id.type;const n=s||l?i.id.id:i.id;if(a=n.name,n.location=fv(e,n.start),_b.has(a)||"arguments"===a){const{line:e,column:t}=n.location;throw new ReferenceError(`${a} is reserved (${e}:${t})`)}t.name(n),e=t.delete(e,i.body.end+h,e.length),e=t.delete(e,0,i.body.start)}i.async&&i.generator&&(r.asyncGenerator=!0);let p=`${i.async?"async ":""}function${i.generator?"*":""}`;const f=c.map(Db,o);return"BlockStatement"===i.body.type?(e=t.insert(e,0,`"use strict";(${p}(${f})\n`),e=t.insert(e,e.length,"\n)")):(e=t.insert(e,0,`"use strict";(${p}(${f}){return(\n`),e=t.insert(e,e.length,"\n)})")),t.sort(),{name:a,view:s,mutable:l,inputs:c.map(Rb),body:e,features:r,sourcemap:t}}catch(n){return{name:void 0,view:!1,mutable:!1,features:{},inputs:[],body:`throw new ${n.constructor.name}(${JSON.stringify(n.message)})`,sourcemap:new Nb}}}function Rb(e){return"ViewExpression"===e.type?`viewof ${e.id.name}`:"MutableExpression"===e.type?`mutable ${e.id.name}`:e.name}function Db(e){return"ViewExpression"===e.type||"MutableExpression"===e.type?this.get(e.id.name):e.name}function Fb(e){const t=[];for(const{local:{name:n},imported:{name:r},view:i,mutable:o}of e)t.push({name:n,remote:r}),i?t.push({name:`viewof ${n}`,remote:`viewof ${r}`}):o&&t.push({name:`mutable ${n}`,remote:`mutable ${r}`});return t}const jb=e=>e?`https://${e}.static.observableusercontent.com`:"https://anonymous.static.observableusercontent.com";class Hb extends G.Component{constructor(...e){super(...e),qc(this,"ref",null),qc(this,"queue",null),qc(this,"workerResolve",null),qc(this,"worker",null),qc(this,"hoverId",null),qc(this,"onRef",e=>{this.ref=e}),qc(this,"onWorkerLoaded",()=>{const{id:e,path:t}=this.props;this.worker.postMessage({type:"hello",id:e,path:t},"*")}),qc(this,"onWorkerMessaged",e=>{const{login:t}=this.props;if(e.origin!==jb(t)||e.source!==this.worker)return;const{onWorkerEvent:n,onNodeHover:r}=this.props;switch(e.data.type){case"ready":this.workerResolve();break;case"hover":return void r(this.hoverId=e.data.id)}n(e.data)}),qc(this,"importNotebook",async e=>{if(!/^([0-9a-f]{16}|@[0-9a-z_-]+\/[0-9a-z_-]+(\/[0-9]+)?)(@\d+)?$/i.test(e))throw new ReferenceError("notebook not found");const t=await fetch(`https://api.observablehq.com/document/${e}`,{credentials:"include"});if(404===t.status)throw new ReferenceError("notebook not found");if(!t.ok)throw new Error("unable to load notebook");const n=await t.json(),{login:r}=this.props,i=n.team||n.creator;if(!n.publish_time&&i.login!==r)throw new ReferenceError("notebook not found");return n})}componentDidMount(){addEventListener("message",this.onWorkerMessaged),this.queue=new Promise(e=>this.workerResolve=e),this.worker=this.ref.contentWindow,this.queueEvents()}componentWillReceiveProps({id:e,path:t}){this.props.id===e&&this.props.path===t||this.worker.postMessage({type:"hello",id:e,path:t},"*")}componentDidUpdate(){this.queueEvents()}componentWillUnmount(){removeEventListener("message",this.onWorkerMessaged),this.queue=null,this.workerResolve=null,this.worker=null}queueEvents(){const{events:e}=this.props;e.length&&(this.queue=this.queue.then(this.postEvents.bind(this,e.map(this.processEvent,this))),e.length=0)}async processEvent(e){const{id:t}=this.props;switch(e.type){case"insert_node":case"modify_node":let n=e.new_node_value;n.imports&&((n=await Ab(t,e.node_id,n,this.importNotebook)).origin="https://beta.observablehq.com",e.new_node_value=n)}return e}async postEvents(e){e=await Promise.all(e),this.worker&&this.worker.postMessage({type:"bundle",events:e},"*")}render(){const{login:e,height:t,pointerEvents:n}=this.props;return G.createElement("iframe",{ref:this.onRef,onLoad:this.onWorkerLoaded,style:{height:t},className:`absolute w-100 bn ${n?"":"pen"}`,scrolling:"no",sandbox:`allow-same-origin allow-scripts allow-popups allow-forms allow-popups-to-escape-sandbox allow-top-navigation${/\bfirefox\b/i.test(navigator.userAgent)?"":"-by-user-activation"}`,allow:"geolocation; microphone; camera; midi; encrypted-media; autoplay; accelerometer; magnetometer; gyroscope; vr",allowFullScreen:!0,src:jb(e)+"/worker/worker.cd1ea69ee50e9a4ba4f49a7eb1a0829ea2c2339e29e4fd7fa30c005fcc75bee3.html"})}}function Ub({collection:e,notebook:t,add:n}){const r=!!t.collections.find(t=>t.id==e.id);return G.createElement("div",{className:`flex items-center pb1 ${r?"black":"black-50"} pointer`},G.createElement("input",{type:"checkbox",id:`collection-${e.id}`,checked:r,onChange:()=>n(e,r)}),G.createElement("label",{htmlFor:`collection-${e.id}`,title:`@${e.owner.login}/${e.slug}`,className:"flex-auto pl2 truncate"},e.title))}class $b extends G.Component{constructor(...e){super(...e),qc(this,"state",{collectionGroups:void 0,notebook:void 0,newCollectionTitle:void 0}),qc(this,"add",async(e,t)=>{const{api:n,id:r}=this.props;t?(this.setState(({notebook:t})=>({notebook:Gc({},t,{collections:t.collections.filter(t=>t.id!==e.id)})})),await n.collectionRemoveDocument({id:e.id,document_id:r})):(this.setState(({notebook:t})=>({notebook:Gc({},t,{collections:t.collections.concat(e)})})),await n.collectionAddDocument({id:e.id,document_id:r}))}),qc(this,"onChangeNewCollectionTitle",e=>{this.setState({newCollectionTitle:e.target.value})}),qc(this,"createAndAdd",async e=>{const{api:t,id:n,onDismiss:r}=this.props;e.preventDefault();const{newCollectionTitle:i}=this.state;if(!i)return;this.setState({newCollectionTitle:void 0});const{id:o}=await t.collectionNew({title:i,description:"",pinned:!1});await t.collectionAddDocument({id:o,document_id:n}),r()})}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.setState({collectionGroups:[]}),this.reload(e)}reload(e=this.props){const{api:t,user:n,team:r,id:i}=e;if(!n)return;let o=[n];const a=n.teams.find(e=>"observablehq"===e.login);a&&o.push(a),r&&(n.teams.find(e=>e.id===r.id)&&!a||r.id!==a.id)&&o.push(r),t.init({cache:"no-cache"}).documentLoad(i).then(e=>(this.setState({notebook:e}),Promise.all(o.map(n=>t.init({cache:"no-cache"}).collectionsLoadUser(n.login).then(t=>({user:n,collections:t.map(e=>Gc({owner:n},e)).sort(t=>e.collections.find(e=>e.id==t.id)?-1:1)})))))).then(e=>{this.setState({collectionGroups:e.sort(({user:e},{user:t})=>e.id===n.id?-1:t.id===n.id?1:e.login>t.login)})})}render(){const{onDismiss:e}=this.props,{collectionGroups:t,notebook:n,newCollectionTitle:r}=this.state;return G.createElement("div",{className:"relative w5 pa2"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("h3",{className:"ma0 mb2 f4 fw4 black-70"},"Add to collection"),G.createElement("div",{className:"pa2 bg-near-white br2 overflow-auto",style:{minHeight:80,maxHeight:250}},t&&(t.some(({collections:e})=>e.length)?t.map(({collections:e,user:t},r)=>G.createElement("div",{key:t.id,className:r>0?"bt b--black-10 pt2 mt2":""},G.createElement("div",{className:"flex items-center pb2 black-50"},G.createElement(ah,{user:t,s:16,className:"mr1 br-100"}),G.createElement("span",null,t.name||t.login)),e.map(e=>G.createElement(Ub,{collection:e,notebook:n,key:e.id,add:this.add})))):G.createElement("div",{className:"lh-copy tc black-70"},"You dont have any collections."))),G.createElement("div",{className:"pt3"},G.createElement(ip,{highlight:!0,type:"button",onClick:e},"Done")),G.createElement("form",{onSubmit:this.createAndAdd,className:"flex flex-column flex-auto items-stretch mt3 bt b--black-10"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},"Add to new collection"),G.createElement("div",{className:"flex items-stretch ba b--black-10 br2"},G.createElement("input",{minLength:"1",maxLength:"255",name:"title",className:"flex-auto pa2 black-70 br2 br--left bn hover-b--black-30",placeholder:"Title",required:!0,value:r,onChange:this.onChangeNewCollectionTitle}),G.createElement("button",{className:`ph3 pv2 f6 fw6 br--right br2 pointer bn\n              ${r?"white bg-blue hover-bg-dark-blue pointer":"white bg-light-gray"}`},"Add"))))}}const Vb=Symbol("ALREADY_PUBLISHED"),Wb=Symbol("NEVER_PUBLISHED"),Bb=Symbol("NEVER_PUBLISHED_IN_TEAM"),zb=Symbol("NEEDS_REPUBLISH");class qb extends G.PureComponent{constructor(...e){super(...e),qc(this,"publish",()=>{const{state:e,team:t,publish:n}=this.props;(e!==Bb||confirm(`Are you sure you want to publish this ${t.name||t.login} team notebook? This will make the notebook publicly visible.`))&&n()})}render(){const{state:e}=this.props,t={[Wb]:"bn black-70 hover-black bg-light-gray hover-bg-moon-gray pointer",[Bb]:"bn black-70 hover-black bg-light-gray hover-bg-moon-gray pointer",[zb]:"bn white bg-blue hover-bg-dark-blue pointer",[Vb]:"bn black-40 bg-light-gray"}[e];return G.createElement("button",{onClick:this.publish,disabled:e===Vb,title:e===Vb?"This notebook has already been published with these changes.":e===zb?"Youve edited this notebook since publishing.":"",className:`br2 pv2 ph2 f6 inline-flex fw6 mr3-ns mr2 ${t}`},G.createElement(Ou,{className:"w1 h1 mr1-ns"}),G.createElement("span",{className:"dn di-ns"},"Publish",e===Bb?"":""))}}class Gb extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{actionsPopover:!1,addToCollectionModal:!1,linkCopied:void 0}),qc(this,"toggleActionsPopover",e=>{e.stopPropagation(),this.setState({actionsPopover:!this.state.actionsPopover})}),qc(this,"share",async()=>{!function(e){const t=document.body.appendChild(document.createElement("input"));t.style.position="absolute",t.style.left="-9999px",t.setAttribute("readonly",""),t.value=""+e,t.select();try{document.execCommand("copy")}catch(n){return!1}finally{t.parentNode.removeChild(t)}}(window.location.href);const{editable:e,hasUnpublishedChanges:t,publishVersion:n,publishUnlisted:r}=this.props;!e||!t&&n||await r(),this.setState({linkCopied:setTimeout(()=>this.setState({linkCopied:void 0,actionsPopover:!1}),1e3)})}),qc(this,"unpublish",async()=>{const{unpublish:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"merge",()=>{const{baseTitle:e,merge:t}=this.props;confirm(`Are you sure you want to merge these changes into ${e}?`)&&t()}),qc(this,"showAddToCollectionModal",()=>{this.setState({addToCollectionModal:!0,actionsPopover:!1})}),qc(this,"hideAddToCollectionModal",()=>{const{reloadCollections:e}=this.props;this.setState({addToCollectionModal:!1}),e()}),qc(this,"moduleUrl",e=>{const{slug:t,id:n,team:r,creator:i}=this.props;return`https://api.observablehq.com${t?`/@${r?r.login:i.login}/${t}`:`/d/${n}`}.${e}`}),qc(this,"download",async e=>{const{editable:t,hasUnpublishedChanges:n,publishVersion:r,publishUnlisted:i}=this.props;if(this.toggleActionsPopover(e),t&&(n||!r)){const t=e.target.href,n=window.open("about:blank","_blank");e.preventDefault(),await i(),n.location=t}}),qc(this,"trash",()=>{if(!confirm("Are you sure you want to move this notebook to the trash?"))return;const{trash:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"revert",()=>{const{revert:e,slug:t}=this.props;confirm(`Are you sure you want to discard your ${t?"unpublished":"unshared"} changes?`)&&(this.setState({actionsPopover:!1}),e())}),qc(this,"fullscreen",()=>{const{fullscreen:e}=this.props;this.setState({actionsPopover:!1}),e()}),qc(this,"fork",(...e)=>{this.setState({actionsPopover:!1}),this.props.fork.apply(this,e)}),qc(this,"forkFromCompare",(...e)=>{this.setState({actionsPopover:!1}),this.props.forkFromCompare.apply(this,e)}),qc(this,"transfer",(...e)=>{this.setState({actionsPopover:!1}),this.props.transfer.apply(this,e)})}componentWillUnmount(){window.clearTimeout(this.state.linkCopied)}render(){const{actionsPopover:e,linkCopied:t,addToCollectionModal:n}=this.state,{trashed:r,type:i,api:o,publish:a,comments:s,user:l,id:c,baseId:u,creator:h,team:d,slug:p,hasUnpublishedChanges:f,editable:m,merge:g,fork_of:v,version:b,baseVersion:y,modelVersion:w,publishVersion:x,publishTime:E,saveVersion:k,forkFromPlayground:S}=this.props,C=l&&l.teams.find(e=>"observablehq"===e.login),T="playground"===i?"save":g?"merge":!r&&m?"publish":"default"===i||"safe"===i||"versioned"===i?"fork":void 0,_=p?f?zb:Vb:d?Bb:Wb;return G.createElement(G.Fragment,null,G.createElement("div",{className:"relative",key:"2"},G.createElement("button",{onClick:this.toggleActionsPopover,className:"pointer flex fw6 black-20 hover-black-50 bg-transparent mr2 br2 pv2 ph2 bn f6"},G.createElement(Yu,null)),e&&G.createElement(ph,{extraStyle:{right:-2,width:"12rem"},onClickOutside:this.toggleActionsPopover},G.createElement("div",{className:"pv2"},"playground"!==i&&m&&("publish"===T?G.createElement(Hd,{fork:this.fork,user:l,inList:!0}):G.createElement("a",{onClick:a,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(Ou,{className:"w1 h1 mr1"}),"Publish")),"compare"===i&&G.createElement(G.Fragment,null,G.createElement(Vc,{className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white no-underline pointer",to:`/compare/${c}${null!=b?`@${b}`:""}...${u}${null!=y?`@${y}`:""}`},G.createElement(Su,{className:"w1 h1 mr1"}),"Compare reverse"),G.createElement(Hd,{fork:this.forkFromCompare,user:l,inList:!0})),"playground"!==i&&m&&!p&&G.createElement("a",{onClick:this.share,className:"flex items-center justify-between ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement("div",{className:"flex items-center"},G.createElement(Vu,{className:"w1 h1 mr1"}),"Share link"),G.createElement("span",{className:`ml2 f7 ttu ${t?"o-100":"o-0"} black-30`},"Copied")),"playground"!==i&&m&&x&&(!p||Date.now()-E<864e5)&&G.createElement("a",{onClick:this.unpublish,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(wu,{className:"w1 h1 mr1"}),p?"Unpublish":"Unshare"),"playground"!==i&&"compare"!==i&&m&&f&&G.createElement("a",{onClick:this.revert,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(fu,{className:"w1 h1 mr1"}),"Revert"),"playground"!==i&&"compare"!==i&&m&&!p&&G.createElement(Ud,{transfer:this.transfer,user:l,owner:d||h,inList:!0}),"playground"!==i&&"compare"!==i&&(m||C)&&p&&G.createElement("a",{onClick:this.showAddToCollectionModal,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(Iu,{className:"w1 h1 mr1"}),"Add to collection"),this.props.fullscreen&&G.createElement("a",{onClick:this.fullscreen,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},G.createElement(pu,{className:"w1 h1 mr1"}),"Fullscreen"),("default"===i&&v||"versioned"===i)&&G.createElement(Vc,{to:"default"===i?`/compare/${v.id}...${c}`:`/compare/${c}@${k}...${c}`,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white no-underline pointer"},G.createElement(vu,{className:"w1 h1 mr1"}),"Compare ","default"===i?"fork":"to latest"),"playground"!==i&&"compare"!==i&&G.createElement(G.Fragment,null,G.createElement("a",{href:this.moduleUrl("js"),onClick:this.download,rel:"noopener noreferrer",target:"_blank",className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(ju,{className:"w1 h1 mr1"}),"Download code"),G.createElement("a",{href:this.moduleUrl("tgz"),onClick:this.download,rel:"noopener noreferrer",target:"_blank",className:"flex items-center ph3 pv2 f6 fw6 no-underline black-70 hover-black hover-bg-near-white pointer"},G.createElement(xu,{className:"w1 h1 mr1"}),"Download tarball")),"playground"!==i&&m&&G.createElement("a",{onClick:this.trash,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-red hover-bg-near-white pointer"},G.createElement(Mu,{className:"w1 h1 mr1"}),"Trash"))),n&&G.createElement(eh,{onDismiss:this.hideAddToCollectionModal},G.createElement($b,{api:o,id:c,slug:p,user:l,team:d,creator:h,onDismiss:this.hideAddToCollectionModal}))),"publish"===T?G.createElement("div",{className:"inline-flex items-center"},G.createElement(qb,{team:d,publish:a,state:_})):"fork"===T?G.createElement(Hd,{fork:this.fork,user:l,highlight:!m&&(w>k||s.length>0&&"compare"!==i)}):"merge"===T?G.createElement("button",{onClick:this.merge,className:"br2 pa2 f6 inline-flex fw6 mr3-ns mr2 bn white bg-blue hover-bg-dark-blue pointer"},G.createElement(Cu,{className:"w1 h1 v-top mr1"}),G.createElement("span",{className:"mr1"},"Merge")):"save"===T?G.createElement("button",{onClick:S,className:"br2 pa2 f6 inline-flex fw6 mr3-ns mr2 bn white bg-blue hover-bg-dark-blue pointer"},G.createElement($u,{className:"w1 h1 v-top mr2-ns"}),G.createElement("span",{className:"dn db-ns mr2-ns"},"Save")):null)}}const Kb=G.memo(function({collections:e}){let t=wf(e.map(({slug:e,owner:{login:t},title:n},r)=>G.createElement(Vc,{key:r,className:"no-underline black-70 hover-blue",to:`/collection/@${t}/${e}`},n)));return G.createElement("div",{className:"inline-flex mr4 f6 fw4 black-50"},G.createElement(Iu,{className:"mr1 black-30",style:{strokeWidth:1}}),G.createElement("div",null,"Featured in ",t))});function Yb({notebook:e}){return G.createElement("div",{className:"relative"},G.createElement("div",{className:"br--top cover bg-center",style:Gc({paddingTop:"62.5%"},{backgroundImage:e&&e.thumbnail?`url(https://static.observableusercontent.com/thumbnail/${e.thumbnail}.jpg)`:"var(--checkboard)"})}),G.createElement("div",{className:"truncate"},G.createElement("div",{className:"f6 fw4 db ph2 flex lh-solid"},G.createElement("div",{title:e.title||"",className:"pv2 truncate"},e.title||"Untitled"))))}const Xb=G.memo(function({collection:e,id:t}){let n,r,i=e.documents.findIndex(e=>e.id===t);i>0&&(n=e.documents[i-1]),i<e.documents.length-1&&(r=e.documents[i+1]);const{owner:{login:o}}=e;return G.createElement("div",{className:"pb4"},G.createElement("div",{className:"pv2 pt2 pt4-ns f5 fw7 black-50"},"Continue reading"," ",G.createElement(Vc,{className:"no-underline black-70 hover-blue",to:`/collection/@${o}/${e.slug}`},e.title)),G.createElement("div",{className:"mw6 pt2 cf"},n&&G.createElement(Vc,{to:`/@${n.team?n.team.login:n.creator.login}/${n.slug}`,className:"w-50 pr1 pr2-ns no-underline fl"},G.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Previous"),G.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},G.createElement(Yb,{notebook:n,id:t}))),r&&G.createElement(Vc,{to:`/@${r.team?r.team.login:r.creator.login}/${r.slug}`,className:`fl w-50 no-underline${n?" pl1 pl2-ns":""}`},G.createElement("div",{className:"db pv1 f7 fw4 tracked ttu black-50"},"Next"),G.createElement("div",{className:"black hover-blue bg-white br2 overflow-hidden hover-shadow-4"},G.createElement(Yb,{notebook:r,id:t})))))});class Qb extends G.Component{constructor(e){super(e),qc(this,"maybeUpdate",()=>{const e=uh(this.props.time);e!==this.state.relativeTime&&this.setState({relativeTime:e})}),this.state={relativeTime:uh(e.time)}}componentDidMount(){this.updateInterval=setInterval(this.maybeUpdate,1e3)}componentWillUnmount(){clearInterval(this.updateInterval)}render(){return G.createElement("span",{title:this.props.time.toLocaleString()},this.state.relativeTime)}}const Jb=()=>/((?:https?(?::\/\/))(?:www\.)?(?:[a-zA-Z\d-_.]+(?:\.[a-zA-Z\d]{2,})|localhost)(?:(?:[-a-zA-Z\d:%_+.~#!?&\/\/=@]*)(?:[,](?![\s]))*)*|\B@[\w-]{1,39})/g;function Zb({content:e}){const t=[];let n=0,r=0;const i=e.split("\n");for(let o of i){let e=!1;for(let r of o.split(Jb()))e?"@"===r[0]?t.push(G.createElement(Vc,{key:++n,to:`/${r}`,className:"no-underline black hover-blue"},r)):t.push(G.createElement("a",{rel:"noopener noreferrer",className:"no-underline black hover-blue",target:"_blank",key:++n,href:r},r)):t.push(G.createElement("span",{key:++n},r)),e=!e;i.length>1&&++r<i.length&&t.push(G.createElement("br",{key:++n}))}return t}const ey=G.memo(function({comment:{create_time:e,update_time:t,content:n,user:r,id:i,nonce:o},onCommentRemove:a,isRepeat:s,first:l}){return G.createElement("div",{className:`ph3 pv2 ${s||l?"":"bt b--black-10"}`},G.createElement("div",{className:"flex items-center justify-between pb1 sans-serif f6 lh-title black-70"},G.createElement("div",{className:"flex items-center"},s?void 0:G.createElement(G.Fragment,null,G.createElement(Vc,{to:`/@${r.login}`,className:"inline-flex items-center no-underline black hover-blue"},G.createElement(ah,{user:r,s:24,className:"mr2 br-100",style:{flexShrink:"0"}}),G.createElement("span",{className:""},r.name||r.login)),G.createElement("span",{className:"ph1"},"")),G.createElement("span",{className:"inline-flex items-end black-40"},G.createElement(Qb,{time:new Date(t||e)}))),a&&G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:"inline-flex items-center ph1 nr1 black-10 hover-red pointer",title:"Delete comment.",onClick:()=>a(i,o)},G.createElement(wu,{className:"w1 h1 ml1"})))),G.createElement("div",{className:"sans-serif f6 lh-copy black-70 comment-content"},G.createElement(Zb,{content:n})))});function ty({children:e}){return G.createElement("span",{className:"disappear-child relative v-mid",style:{lineHeight:0}},G.createElement("span",{className:"dib ml2 f7 tc black-70 hover-black bg-white ba b--black-10 br-pill pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"}},"?"),G.createElement("nav",{className:"db absolute lh-solid tl z-2 child",style:{right:"-12px",width:"16rem"},"aria-label":"submenu","aria-hidden":""+!open},G.createElement("div",{className:"bg-white br2 shadow-4 overflow-hidden",style:{marginTop:"10px"}},G.createElement("div",{className:"pa2 lh-copy"},e)),G.createElement("div",{className:"absolute right-1",style:{top:"-4px",clip:"rect(0 18px 14px -4px)"}},G.createElement("div",{className:"w1 h1 bg-white",style:{boxShadow:"0 2px 3px 0 rgba(0,0,0,.2)",transform:"rotate(45deg) translate(6px, 6px)"}}))))}class ny extends G.Component{constructor(e){super(e),qc(this,"state",{value:""}),qc(this,"onChange",({target:{value:e}})=>{const{current:t}=this.textareaRef;t.style.height="auto",t.style.height=`${t.scrollHeight}px`,this.setState({value:e})}),qc(this,"close",()=>{const{onCommentClose:e,node_id:t}=this.props;e(t),this.setState({value:""})}),qc(this,"onComment",e=>{e.preventDefault();const{onCommentInsert:t,onCommentClose:n,node_id:r}=this.props;let{value:i}=this.state;(i=i.trim())&&(t(i,r),n(r),this.setState({value:""}))}),qc(this,"onKeyDown",e=>{"Enter"===e.key&&e.shiftKey?this.onComment(e):"Escape"!==e.key||this.state.value.trim()||this.close()}),qc(this,"onUpdate",()=>{const{onCommentHeight:e,node_id:t}=this.props,n=this.containerRef.current,{height:r}=n.getBoundingClientRect();r!==this.lastHeight&&(this.lastHeight=r,e(t,r))}),this.containerRef=G.createRef(),this.textareaRef=G.createRef(),this.lastHeight=void 0}componentDidMount(){this.onUpdate()}componentDidUpdate(){this.onUpdate()}componentWillUnmount(){const{onCommentHeight:e,node_id:t}=this.props;e(t,0)}render(){let{value:e}=this.state;const{open:t,owned:n,comments:r,user:i,node_id:o,team:a,onCommentRemove:s,onCommentResolve:l,onCommentOpen:c}=this.props;let u;const h=n?a?`Only members of ${a.name||a.login} will see this.`:"Only you will see this.":"Fork to save your comments.";return G.createElement("div",{ref:this.containerRef,className:"pt2 f5"},G.createElement("div",{className:"relative w-100 pea",style:{maxWidth:640}},r.length>0?G.createElement("div",{className:"pv1 bg-washed-yellow"},r.map((e,t)=>{const{user:{id:r}}=e,o=r===i.id,a=u===r;return u=r,G.createElement(ey,{key:e.id||`nonce-${e.nonce}`,comment:e,isRepeat:a,onCommentRemove:(e.id||!n)&&o&&s,first:0===t})})):null,t?G.createElement("div",{className:"sans-serif"},G.createElement("form",{onSubmit:this.onComment,className:"flex flex-column relative items-stretch bg-washed-yellow bt",style:{borderColor:"#e6e2d4"}},G.createElement("textarea",{className:"w-100 pa3 sans-serif f6 lh-copy black-70 bg-transparent br3 bn",style:{resize:"none"},onKeyDown:this.onKeyDown,autoFocus:t,rows:1,ref:this.textareaRef,value:e,placeholder:"",maxLength:"65536",onChange:this.onChange}),G.createElement("div",{className:"flex justify-between pa2"},G.createElement("button",{type:"button",onClick:this.close,className:"inline-flex items-center pa2 f6 fw6 black-30 hover-red bg-washed-yellow br2 pointer bn"},"Cancel"),G.createElement("div",{className:"inline-flex items-center"},G.createElement("div",{className:"db-ns dn ml2 f6 f7 black-50"},h),G.createElement(ty,null,G.createElement("div",{className:"f6 black-70"},"Use plain text. URLs are auto-linked.",G.createElement("span",{className:"dn-ns di"}," ",h))),G.createElement("button",{className:`ml2 ph3 pv2 f6 fw6 white ${e.trim()?"bg-blue hover-bg-dark-blue pointer":"bg-silver"} br2 bn`},"Comment"))))):G.createElement("div",{className:`flex justify-${n?"between":"end"} bg-washed-yellow`},n&&G.createElement("button",{type:"button",onClick:()=>l(o),className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 black-30 hover-black-70 bg-transparent br2 pointer bn"},"Resolve"),G.createElement("button",{className:"inline-flex items-center ph3 pt1 pb3 f6 fw6 black-30 hover-black-70 bg-transparent br2 pointer bn",onClick:()=>c(o)},G.createElement(mu,{className:"w1 h1 mr1"}),"Comment"))))}}qc(ny,"defaultProps",{comments:[],user:void 0,node_id:void 0,open:!1,onComment:()=>{},getUser:()=>{},onCommentHeight:()=>{}});let ry=0;class iy{constructor({name:e,loaded:t=!1,edited:n=!1,imports:r,selections:i=[],source:o,empty:a=!1,disabled:s=!1,editorHeight:l=0,workerHeight:c=zf,commentHeight:u=0,diff:h,error:d,sourcemap:p,features:f}){this.name=e,this.loaded=t,this.edited=n,this.imports=r,this.selections=i,this.source=o,this.empty=a,this.disabled=s,this.editorHeight=l,this.comparerHeight=h&&"noop"!==h.type?zf:0,this.workerHeight=c,this.commentHeight=u,this.diff=h,this.error=d,this.sourcemap=p,this.features=f}}const oy=(e,t)=>({type:"offset_node",node_id:e,height:t.editorHeight+t.comparerHeight+t.commentHeight}),ay=function(e){let t,n,r,i;const o=(e,t)=>e===n[t];return function(){const a=Array.from(arguments);return i&&t===this&&n.length===arguments.length&&a.every(o)?r:(r=e.apply(this,a),i=!0,t=this,n=a,r)}}(e=>{let t=new Set;for(let n of e.values())if(n.name&&t.add(n.name),n.imports)for(let e of n.imports){let{name:n}=e;t.add(n)}return t});const sy=(e,t,n)=>{for(let r of n){let{type:n,node_id:i,new_node_value:o,new_next_node_id:a}=r;switch(n){case"insert_node":case"modify_node":const r=Ib(o),{sourcemap:s,features:l}=r;let c;if(e=new Map(e),"insert_node"===n)c=new iy({name:r.name,imports:r.imports,empty:""===r.body,sourcemap:s,features:l});else{(c=e.get(i)).empty!==(c=new iy(Gc({},c,{name:r.name,imports:r.imports,empty:""===r.body,error:void 0,sourcemap:s,features:l}))).empty&&(c.editorHeight+=(c.empty?-1:1)*zf,t.push(oy(i,c)))}e.set(i,c),c.sourcemap=r.sourcemap,delete r.sourcemap,t.push({type:n,node_id:i,new_node_value:r,new_next_node_id:a});break;case"remove_node":(e=new Map(e)).delete(i),t.push({type:n,node_id:i});break;case"move_node":t.push({type:n,node_id:i,new_next_node_id:a})}}return{workerEvents:t,cells:e}};function ly(e,t,n,r){let i=!0,o=[],a=e=>{"noop"!==e.type&&(i=!1),o.push(e)},s=e.apply(r,a);if(i)return{workerEvents:n,model:e,cells:t};if(e.nodes[0]!==s.nodes[0]&&e.version<s.version){const t=function(e){try{const{body:n}=Cb(e);if(n&&"TaggedTemplateExpression"===n.type&&"md"===n.tag.name&&(e=Pb.exec(e.slice(n.quasi.start+1,n.quasi.end-1))))return e[1]}catch(t){}}(s.nodes[0].value)||"";t!==e.title&&(s=s.apply([{type:"modify_title",new_node_value:t}],a))}return({workerEvents:n,cells:t}=sy(t,n,o)),{workerEvents:n,model:s,cells:t}}function cy(e,t,n,r){return({workerEvents:i,model:o,cells:a})=>{const{nodes:s}=o,l=o.events.length;let c,u;if(n)c=e,u=null===e?s[s.length-1].pinned:s.find(t=>t.id===e).pinned;else if(null===e){const e=s[0];u=e.pinned,c=e.id}else{const t=s.findIndex(t=>t.id===e);u=s[t].pinned,c=t<s.length-1?s[t+1].id:null}if(({model:o,workerEvents:i,cells:a}=ly(o,a,i,[{type:"insert_node",node_id:l,new_node_value:t,new_node_pinned:u,new_next_node_id:c}])),r){const e=n?t.length:0;(a=new Map(a)).set(l,new iy(Gc({},a.get(l),{selections:[{anchor:e,head:e}]})))}return{model:o,cells:a,workerEvents:i,focusId:r?l:e}}}function uy(e,t,n){return cy(e,t,!0,n)}const hy=(e,t,n)=>({model:r,cells:i,workerEvents:o})=>{const a=r.nodes,s=a.findIndex(t=>t.id===e),l=a[n?s-1:s+1];if(!l)return;const c=[{type:"remove_node",node_id:e}];t&&(c.push({type:"modify_node",node_id:l.id,new_node_value:n?l.value+t:t+l.value}),a[s].pinned&&!l.pinned&&c.push({type:"pin_node",node_id:l.id})),({model:r,workerEvents:o,cells:i}=ly(r,i,o,c));const u=(n?l.value:t).length;return(i=new Map(i)).set(l.id,new iy(Gc({},i.get(l.id),{selections:[{anchor:u,head:u}]}))),{model:r,cells:i,workerEvents:o,focusId:l.id}},dy=e=>({model:t,comments:n,cells:r,workerEvents:i})=>{const{nodes:o}=t;if(o.find(t=>t.id===e)&&!n.find(t=>t.node_id===e))return ly(t,r,i,[1===o.length?{type:"modify_node",node_id:e,new_node_value:""}:{type:"remove_node",node_id:e}])},py=(e,t)=>({model:n,cells:r,workerEvents:i})=>{const{nodes:o}=n,a=o.findIndex(t=>t.id===e);if(t>0&&++t,a+t<0||a+t>o.length)return;const s=o[a+t];return ly(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:s?s.id:null}])},fy=(e,t)=>({model:n,cells:r,workerEvents:i})=>Gc({},ly(n,r,i,[{type:"move_node",node_id:e,new_next_node_id:t}]),{dragging:!1}),my=(e,t)=>({model:n})=>({model:n.apply([{type:t?"pin_node":"unpin_node",node_id:e}])}),gy=({id:e,error:t})=>({cells:n})=>{const r=n.get(e);if(r)return t&&r.sourcemap&&(t=r.sourcemap.translateError(t)),(n=new Map(n)).set(e,new iy(Gc({},r,{error:t}))),{cells:n}},vy=(e,t,n)=>({model:r,cells:i,workerEvents:o})=>{if(!i.has(e))return;const a={type:"modify_node",node_id:e,new_node_value:t};let s;if((i=new Map(i)).set(e,new iy(Gc({},i.get(e),{edited:!0}))),({model:s,cells:i,workerEvents:o}=ly(r,i,o,[a])),r!==s)return{model:s,cells:i,workerEvents:o};if(n){i=new Map(i);const n=Ib(t),{sourcemap:r}=n;let a=new iy(Gc({},i.get(e),{name:n.name,imports:n.imports,error:void 0,sourcemap:r}));return i.set(e,a),a.sourcemap=n.sourcemap,delete n.sourcemap,o.push({type:"modify_node",node_id:e,new_node_value:n}),{cells:i,workerEvents:o}}},by=(e,t)=>({model:n,cells:r,workerEvents:i})=>{r=new Map(r);const o=[];for(let[a,s]of r){if("all"!==t&&t!==a||"noop"===s.diff.type)continue;const n="diff"===e&&"modify_node"!==s.diff.type?"target":e,i=s.diff["diff"===n?"target":n];r.set(a,new iy(Gc({},s,{edited:!1,disabled:!i,source:n}))),(s.edited||s.source!==n&&!("diff"===s.source&&"target"===n||"target"===s.source&&"diff"===n))&&o.push({type:"modify_node",node_id:a,new_node_value:i&&i.value})}return ly(n,r,i,o)},yy=(e,t,n)=>({model:r,workerEvents:i,focusId:o,cells:a})=>{const s=o===e,{pinned:l}=r.nodes.find(t=>t.id===e),c=a.get(e),u="compare"===n&&c.diff&&"noop"!==c.diff.type;return t&&(({model:r,cells:a,workerEvents:i}=ly(r,a,i,[{type:l?"unpin_node":"pin_node",node_id:e}])),s||l)?{model:r,workerEvents:i}:{focusId:!s||l||u?e:null,cells:a,model:r,workerEvents:i}},wy=(e,t)=>({model:n,cells:r,workerEvents:i,publishVersion:o})=>{const a=n.events.length,s={version:a,type:"revert",node_id:o};try{({model:n,cells:r,workerEvents:i}=ly(n,r,i,[s]))}catch(l){return n.events.push(s),e(a).then(t),{model:n}}return{model:n,cells:r,workerEvents:i,hasUnpublishedChanges:!1}},xy=(e,t)=>({cells:n})=>{const r=n.get(e);if(r)return(n=new Map(n)).set(e,new iy(Gc({},r,{selections:t.slice()}))),{cells:n}},Ey=(e,t,n,r)=>({id:i,model:{version:o},creator:a,team:s,comments:l})=>{const c=i&&a&&hh(r,{creator:a,team:s});for(let h=l.length-1;h>=0;--h){const i=l[h];if(i.node_id===t){if(i.user.id===r.id&&(i.id?new Date(i.create_time)>Date.now()-18e4:!c))return e=i.content+"\n\n"+e,c&&n.send({type:"commentmodify",id:i.id,content:e}),(l=l.slice()).splice(h,1,Gc({},i,{version:o,content:e,update_time:new Date})),{comments:l};break}}const u=++ry;return c&&n.send({type:"comment",nonce:u,node_id:t,content:e}),{comments:l.concat({nonce:u,node_id:t,version:o,content:e,user:r,create_time:new Date,update_time:null})}},ky=(e,t,n,r)=>({id:i,creator:o,team:a,comments:s})=>{return i&&o&&hh(r,{creator:o,team:a})&&n.send({type:"commentdelete",ids:[e]}),{comments:s.filter(e?t=>t.id!==e:e=>e.nonce!==t)}},Sy=(e,t)=>({comments:n})=>(t.send({type:"commentresolve",ids:n.filter(t=>t.id&&t.node_id===e).map(e=>e.id),resolved:!0}),{comments:n.filter(t=>t.id&&t.node_id!==e)}),Cy=e=>({comments:t})=>{t=t.slice();for(const n of e){const e=t.findIndex(e=>e.id===n.id);-1!==e?n.resolved||n.deleted?t.splice(e,1):t.splice(e,1,n):n.resolved||n.deleted||t.push(n)}return{comments:t}},Ty=(e,t)=>({cells:n,workerEvents:r})=>{let i=n.get(e);if(i)return n=new Map(n),i=new iy(Gc({},i,{commentHeight:t})),n.set(e,i),r.push(oy(e,i)),{cells:n,workerEvents:r}},_y=(e,t)=>({cells:n,workerEvents:r})=>{let i=n.get(e);if(i)return i.empty&&(t-=zf),n=new Map(n),i=new iy(Gc({},i,{editorHeight:t})),n.set(e,i),r.push(oy(e,i)),{cells:n,workerEvents:r}},Ny=1e3;class Py extends G.Component{constructor(...e){super(...e),qc(this,"state",{id:void 0,newId:void 0,baseId:void 0,model:void 0,comments:[],baseModel:void 0,targetModel:void 0,baseVersion:void 0,baseIsLatestVersion:void 0,targetVersion:void 0,shiftKey:!1,saveVersion:void 0,updateTime:void 0,publishTime:void 0,publishVersion:void 0,trashed:void 0,creator:void 0,baseCreator:void 0,created:!1,team:void 0,baseTeam:void 0,forks:0,fork_of:void 0,originalTitle:void 0,originalBaseTitle:void 0,bottomHover:!1,hoverId:null,focusId:null,errorMessage:void 0,hintVisible:!1,keyboardShortcutsModal:!1,cells:new Map,workerEvents:[],workerKey:void 0,likes:0,liked:!1,diff:void 0,diffCount:void 0,collections:[],platformSupport:[],participants:[],openComments:new Set,hasUnpublishedChanges:!1}),qc(this,"anchorId",null),qc(this,"autocompleteResolve",null),qc(this,"cropResolve",null),qc(this,"contentRef",null),qc(this,"clientRef",null),qc(this,"onFullScreen",()=>{Cp.fullscreenElement===this.contentRef?(this.contentRef.focus(),this.contentRef.classList.add("fullscreen-stretch")):this.contentRef.classList.remove("fullscreen-stretch")}),qc(this,"fullscreen",()=>{Cp.requestFullscreen(this.contentRef)}),qc(this,"reloadCollections",async()=>{const{id:e}=this.state,{api:t}=this.props,{collections:n}=await t.init({cache:"no-cache"}).documentLoad(e);this.setState({collections:n}),n.length?t.collectionLoad(n[0].owner.login,n[0].slug).then(e=>{this.setState({collectionContext:e})}):this.setState({collectionContext:void 0})}),qc(this,"workerAutocomplete",({name:e,path:t,prefix:n,nonce:r})=>(this.setState(({workerEvents:i})=>(i.push({type:"autocomplete",name:e,path:t,prefix:n,nonce:r}),{workerEvents:i})),new Promise(e=>this.autocompleteResolve=e))),qc(this,"onContentRef",e=>{this.contentRef=e}),qc(this,"commit",async()=>(null!==this.state.focusId&&(await new Promise(e=>this.setState({focusId:null},e)),await new Promise(e=>this.setState({},e))),this.state.model.version)),qc(this,"save",async e=>{let{saveVersion:t}=this.state;for(;t<e;)t=await new Promise(e=>this.saveResolve=e)}),qc(this,"publish",async e=>{if(e){let{target:t}=e;for(;t&&t.tabIndex<0;)t=t.parentNode;t&&t.blur&&t.blur()}const{api:t,history:n,location:r}=this.props,i=await this.commit();await this.save(i);try{const{id:e,model:{title:a},creator:{login:s},team:l}=this.state,{update_time:c,slug:u}=await t.documentPublish(e,i,a),h=`/@${l?l.login:s}/${u}`;h!==r.pathname?n.push(h):this.setState(({publishTime:e})=>({publishTime:e||new Date(c),publishVersion:i,hasUnpublishedChanges:!1}))}catch(o){this.setState({errorMessage:"Oops, publishing failed. Try again?"})}}),qc(this,"publishUnlisted",async()=>{const{api:e}=this.props,t=await this.commit();await this.save(t);const{id:n,model:{title:r}}=this.state;try{const{update_time:o}=await e.documentPublish(n,t,r,!0);this.setState({publishTime:new Date(o),publishVersion:t,hasUnpublishedChanges:!1})}catch(i){this.setState({errorMessage:"Oops, sharing failed. Try again?"})}}),qc(this,"unpublish",async()=>{const{id:e}=this.state,{api:t,match:{params:{documentSlug:n}},history:r}=this.props;try{await t.documentUnpublish(e),this.setState({slug:void 0,publishTime:void 0,publishVersion:void 0,hasUnpublishedChanges:!1},n?()=>{r.replace(`/d/${e}`)}:void 0)}catch(i){this.setState({errorMessage:`Oops, un${n?"publishing":"sharing"} failed. Try again?`})}}),qc(this,"reload",e=>{e.preventDefault(),window.location.reload(!0)}),qc(this,"trash",async()=>{const{api:e,history:t}=this.props,{id:n}=this.state;try{await e.documentTrash(n),t.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Oops, trashing failed. Try again?"})}}),qc(this,"fork",async({team:e}={})=>{const{api:t,history:n,user:r}=this.props,i=await this.commit(),{id:o,creator:a,team:s,saveVersion:l,model:c,comments:u,openComments:h}=this.state;if(h.size&&!confirm("Your unsaved comments will be lost. Continue?"))return;const d=c.events.slice(l+1,i+1).map(Bp);if(r)try{const{id:i}=await t.documentFork(o,l,{events:d,comments:hh(r,{creator:a,team:s})?[]:u.map(e=>{return Kc(e,["id","user","create_time"])}),team:e});n.push(`/d/${i}`)}catch(p){this.setState({errorMessage:"Oops, forking failed. Try again?"})}else this.props.showLogin({loginReason:"fork",loginAction:()=>{Gp&&(Gp.setItem("forkId",o),Gp.setItem("fork",JSON.stringify({saveVersion:l,events:d,comments:u})))}})}),qc(this,"forkFromPlayground",async()=>{const e=await this.commit(),{id:t,saveVersion:n,model:r}=this.state,i=r.events.slice(n+1,e+1).map(Bp);this.props.showLogin({loginReason:"playground",loginAction:()=>{Gp&&(Gp.setItem("forkId",t),Gp.setItem("fork",JSON.stringify({saveVersion:n,events:i}))),qp&&qp.removeItem("playground")}})}),qc(this,"forkFromCompare",async({team:e}={})=>{const{api:t,history:n}=this.props,{model:r,diff:i,cells:o,targetModel:a,baseId:s,baseVersion:l,id:c,targetVersion:u}=this.state,{patchModel:h,baseToLocal:d,targetToLocal:p}=Eg({model:r,diff:i,cells:o}),f=a.patch(h,p);kg(f,s,d);try{const{id:r}=await t.documentFork(c,u,{events:[],team:e});await t.documentMerge(r,u,{events:f.events.map(Bp),target:{id:s,version:l}}),n.push(`/d/${r}`)}catch(m){this.setState({errorMessage:"Oops, forking failed. Try again?"})}}),qc(this,"transfer",async e=>{const{api:t}=this.props,{id:n}=this.state;try{await t.documentTransfer(n,e),this.load(this.props)}catch(r){this.setState({errorMessage:"Oops, transfer failed. Try again?"})}}),qc(this,"merge",async()=>{const{api:e,history:t}=this.props,{model:n,diff:r,cells:i,baseModel:o,baseId:a,baseVersion:s,id:l,targetVersion:c}=this.state,{patchModel:u,baseToLocal:h,targetToLocal:d}=Eg({model:n,diff:r,cells:i}),p=o.patch(u,h);kg(p,l,d);try{await e.documentMerge(a,s,{events:p.events.map(Bp),target:{id:l,version:c}}),t.push(`/d/${a}`)}catch(f){this.setState({errorMessage:"Oops, merging failed. Try again?"})}}),qc(this,"targetPatchSize",()=>{const{model:e,diff:t,cells:n,targetModel:r}=this.state,{patchModel:i,targetToLocal:o}=Eg({model:e,diff:t,cells:n});return r.patch(i,o).events.length}),qc(this,"onKeydown",e=>{"Shift"===e.key?this.setState({shiftKey:!0}):"s"===e.key&&e.metaKey?e.preventDefault():Kf.has(e.target.tagName)||"true"===e.target.contentEditable||("?"===e.key?this.setState(({model:e,trashed:t,keyboardShortcutsModal:n})=>{if(e&&!t)return{keyboardShortcutsModal:!n}}):"Tab"===e.key&&e.altKey&&this.setState(({model:t,focusId:n})=>{if(t){if(e.preventDefault(),null===n)return{focusId:t.nodes[e.shiftKey?t.nodes.length-1:0].id};const r=document.querySelector(`[data-node-id="${n}"] textarea`);r&&r.focus()}}))}),qc(this,"onKeyup",e=>{"Shift"===e.key&&this.setState({shiftKey:!1})}),qc(this,"onNodeEditorMoveFocus",(e,t)=>{const{model:{nodes:n}}=this.state,r=n[n.findIndex(t=>t.id===e)+t];r&&this.setState({focusId:r.id})}),qc(this,"onNodeEditorSelect",(e,t)=>{this.setState(xy(e,t))}),qc(this,"onNodeEditorInput",(e,t,n)=>{this.setState(vy(e,t,n))}),qc(this,"onNodeEditorInsertBefore",(e,t,n)=>{this.setState(uy(e,t,n))}),qc(this,"onNodeEditorInsertAfter",(e,t,n)=>{this.setState(function(e,t,n){return cy(e,t,!1,n)}(e,t,n))}),qc(this,"onNodeEditorMoveNode",(e,t)=>{this.setState(py(e,t))}),qc(this,"onNodeEditorPinNode",(e,t)=>{this.setState(my(e,t))}),qc(this,"onNodeEditorRemoveNode",e=>{this.setState(dy(e))}),qc(this,"onNodeEditorMergeNode",(e,t,n)=>{this.setState(hy(e,t,n))}),qc(this,"onNodeInserterInsert",e=>{this.setState(uy(e,"",!0))}),qc(this,"setError",e=>{this.setState(gy(e))}),qc(this,"onNodeComparerChangeSource",(e,t)=>{this.setState(by(t,e))}),qc(this,"revert",()=>{this.setState(wy(this.save,()=>window.location.reload()))}),qc(this,"onCommentOpen",e=>{this.setState(({openComments:t})=>(t.add(e),{openComments:t}))}),qc(this,"onCommentClose",e=>{this.setState(({openComments:t})=>(t.delete(e),{openComments:t}))}),qc(this,"onCommentHeight",(e,t)=>{this.setState(Ty(e,t))}),qc(this,"insertComment",(e,t)=>{this.setState(Ey(e,t,this.clientRef,this.props.user))}),qc(this,"removeComment",(e,t)=>{confirm("Delete this comment?")&&this.setState(ky(e,t,this.clientRef,this.props.user))}),qc(this,"resolveComments",e=>{this.setState(Sy(e,this.clientRef))}),qc(this,"onClientComments",e=>{this.setState(Cy(e))}),qc(this,"onClientCommentConfirm",async(e,t)=>{this.setState(({comments:n})=>({comments:n.map(n=>n.nonce===t?Gc({id:e},n):n)}))}),qc(this,"onNodeEditorFocus",e=>{this.setState({focusId:e})}),qc(this,"onNodeEditorBlur",()=>{this.setState({focusId:null})}),qc(this,"onNodeEditorHeight",(e,t)=>{this.setState(_y(e,t))}),qc(this,"onNodeInserterMerge",e=>{const{model:{nodes:t}}=this.state;this.onNodeEditorMergeNode(e,t.find(t=>t.id===e).value,!0)}),qc(this,"onNodeHover",e=>{this.setState({hoverId:e})}),qc(this,"onBottomEnter",()=>{this.setState({bottomHover:!0})}),qc(this,"onBottomLeave",()=>{this.setState({bottomHover:!1})}),qc(this,"onWorkerEvent",e=>{const{cells:t}=this.state;let n;switch(e.type){case"load":if(!(n=t.get(e.id)))return;n.loaded=!0,this.maybeScrollIfLoaded();break;case"cropped":this.cropResolve(e);break;case"error":this.setError(e);break;case"resize":if(!(n=t.get(e.id)))return;n.workerHeight!==e.height&&(n.workerHeight=e.height,this.setState({cells:new Map(t)}));break;case"secrets":this.onSecrets();break;case"autocompleted":this.autocompleteResolve(e);break;case"ready":this.setState({platformSupport:e.platformSupport})}}),qc(this,"onClientRef",e=>{this.clientRef=e}),qc(this,"onClientSave",(e,t)=>{this.setState(({model:n,cells:r,workerEvents:i})=>{try{const t=[];n=n.merge(e,e=>t.push(e)),({cells:r,workerEvents:i}=sy(r,i,t))}catch(o){return{errorMessage:G.createElement("div",null,"Oops, someone reverted this notebook!",G.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Please reload?"))}}return{model:n,cells:r,workerEvents:i,saveVersion:t,updateTime:new Date}})}),qc(this,"onClientSaveConfirm",e=>{this.saveResolve&&(this.saveResolve(e),this.saveResolve=null),this.setState({saveVersion:e,updateTime:new Date})}),qc(this,"onClientError",()=>{this.setState({errorMessage:G.createElement("div",null,"Oops, unable to connect.",G.createElement("a",{href:"#",className:"ml1 black-70 hover-blue link",onClick:this.reload},"Try reloading?"))})}),qc(this,"onClientPresence",e=>{this.setState({participants:e})}),qc(this,"onPutBack",async()=>{const{api:e}=this.props,{id:t,model:n}=this.state;await e.documentPutBack(t),this.setState({trashed:!1,focusId:n.nodes[0].id})}),qc(this,"onNodeGutterClick",(e,t)=>{const{type:n}=this.props;this.disallowHint(),this.setState(yy(e,t,n))}),qc(this,"onNodeDragStart",e=>{this.nodeDraggingId=e,this.nodePositions=[...document.querySelectorAll("[data-node-id]")].map(e=>{const t=e.getBoundingClientRect();return{id:+e.dataset.nodeId,elem:e,top:t.top+window.scrollY,bottom:t.bottom+window.scrollY}}),this.setState({dragging:!0})}),qc(this,"findClosest",e=>{if(!this.nodePositions)return;let t=1/0,n=void 0,r=void 0;for(let i=0;i<this.nodePositions.length;i++){const o=this.nodePositions[i];let a=Math.abs(e-o.top),s=Math.abs(e-o.bottom);a<t&&(t=a,n=o.id),s<t&&(t=s,n=this.nodePositions.length>i+1?this.nodePositions[i+1].id:null,r=o.id)}return{next:n,before:r}}),qc(this,"clearPreview",()=>{for(let e of document.querySelectorAll(".show-before,.show-after"))e.classList.remove("show-before","show-after")}),qc(this,"onNodeDrag",e=>{if(null==this.nodeDraggingId)return;let{next:t,before:n}=this.findClosest(e);this.clearPreview(),null!==t?document.querySelector(`[data-node-id="${t}"]`).classList.add("show-before"):document.querySelector(`[data-node-id="${n}"]`).classList.add("show-after")}),qc(this,"onNodeDrop",e=>{if(void 0===this.nodeDraggingId)return;let{next:t}=this.findClosest(e);this.nodePositions=[];const{nodeDraggingId:n}=this;return this.nodeDraggingId=void 0,this.clearPreview(),this.setState(fy(n,t))}),qc(this,"onSecrets",async()=>{const{id:e,creator:t,team:n,publishTime:r}=this.state;let i=null;if(hh(nh.user,{creator:t,team:n})&&!r){const{api:t}=this.props;null===(i=await t.documentLoadSecrets(e))&&confirm("Allow this notebook to access your secrets?")&&(i=await t.documentAllowSecrets(e,!0))}this.setState(({workerEvents:e})=>(e.push({type:"secrets",secrets:i}),{workerEvents:e}))}),qc(this,"maybeScrollIfLoaded",e=>{if(this.anchorId){const{model:t,cells:n}=this.state;if(!e)for(const e of t.nodes){const{id:t}=e;if(t===this.anchorId)break;if(!n.get(t).loaded)return}const r=n.get(this.anchorId);if(r){const e=document.getElementById(r.name);window.scrollBy(0,e.getBoundingClientRect().top)}this.anchorId=null}}),qc(this,"showKeyboardShortcuts",()=>{this.setState({keyboardShortcutsModal:!0})}),qc(this,"hideKeyboardShortcuts",()=>{this.setState({keyboardShortcutsModal:!1})}),qc(this,"dismissHint",()=>{this.setState({hintVisible:!1}),this.disallowHint()}),qc(this,"disallowHint",()=>{let e=new Date(Date.now()+31536e6).toUTCString();document.cookie=`sawClickToEdit=true; Expires=${e}; Path=/`}),qc(this,"changeAllSource",e=>{this.setState(by(e,"all"))}),qc(this,"like",async()=>{const{api:e,user:t}=this.props,{id:n,liked:r}=this.state;t?this.setState(({likes:e,liked:t})=>({liked:!t,likes:t?e-1:e+1}),async()=>{try{await e.documentLike(n,!r)}catch(t){this.setState(({likes:e,liked:t})=>({errorMessage:"Oops, liking failed. Try again?",liked:!t,likes:t?e-1:e+1}))}}):this.props.showLogin({loginReason:"like"})}),qc(this,"hasUnpublishedChanges",()=>{const{hasUnpublishedChanges:e,model:t,publishVersion:n=0}=this.state;if(e)return!0;if(!n)return!1;for(let r=t.version;r>n;--r){const e=t.events[r];if(!e)return!1;switch(e.type){case"insert_comment":case"modify_comment":case"remove_comment":continue;case"revert":r=e.node_id+1;continue}return!0}return!1})}componentDidMount(){this.load(this.props),addEventListener("keydown",this.onKeydown),addEventListener("keyup",this.onKeyup),Cp.addEventListener("fullscreenchange",this.onFullScreen)}componentWillReceiveProps(e){const{type:t,match:{params:{id:n}}}=e;n&&n===this.state.id&&t===this.props.type&&"compare"!==t||this.props.location.pathname===e.location.pathname||this.load(e)}componentDidUpdate(e,{model:t}){const{api:n,type:r,history:i}=this.props,{id:o,created:a,model:s,team:l,saveVersion:c}=this.state;"playground"===r&&s&&s!==t&&s.version>c&&qp&&qp.setItem("playground",JSON.stringify({id:o,saveVersion:c,events:s.events.slice(c+1).map(Bp)})),"default"===r&&s&&s.version>1&&!o&&!a&&(this.setState({created:!0}),n.documentNew(s,l&&l.id).then(({id:e,version:t,update_time:n})=>{this.setState({id:e,updateTime:new Date(n),saveVersion:t},()=>i.replace(`/d/${e}`))}))}componentWillUnmount(){removeEventListener("keydown",this.onKeydown),removeEventListener("keyup",this.onKeyup),Cp.removeEventListener("fullscreenchange",this.onFullScreen)}async load(e){let t,{cells:n,workerEvents:r}=this.state,{api:i,type:o,match:{params:{baseId:a,baseVersion:s,id:l=a,version:c,userLogin:u,documentSlug:h,teamLogin:d}},history:p}=e;"compare"===o&&(s=/^~/.test(s)?await i.documentVersion(a)-s.substr(1):s&&+s.substr(1),t=c=c&&+c.substr(1)),n.clear(),r.length=0,this.setState({id:l,baseId:a,slug:h,baseSlug:void 0,model:void 0,baseModel:void 0,targetModel:void 0,baseVersion:s,targetVersion:t,saveVersion:void 0,baseIsLatestVersion:null==s,updateTime:void 0,publishTime:void 0,publishVersion:void 0,trashed:void 0,creator:nh.user&&u===nh.user.login?nh.user:void 0,baseCreator:void 0,team:void 0,baseTeam:void 0,forks:0,fork_of:void 0,originalTitle:void 0,originalBaseTitle:void 0,cells:n,hoverId:null,focusId:null,errorMessage:void 0,keyboardShortcutsModal:!1,hintVisible:this.hintAllowed(),workerEvents:r,workerKey:Date.now(),likes:0,liked:!1,collectionContext:void 0,comments:[],openComments:new Set,collections:[],participants:[],created:!(!h&&!l),hasUnpublishedChanges:!1});let f,m,g,v,b,y,w,x,E,k={};switch(o){case"safe":case"default":if(l){if(m=(k=await i.documentLoad(l)).version,k.slug)return p.replace(`/@${k.team?k.team.login:k.creator.login}/${k.slug}`)}else h?m=(k=await i.documentLoadPublished(u,h,nh.isSelfOrMember(u)?"latest":void 0)).version:k={version:1,creator:nh.user,update_time:new Date,nodes:[{id:0,value:"md`# Untitled`"}]};if(d){if(!nh.isSelfOrMember(d))throw new Qc("Not authorized");k.team=await i.userLoad(d)}k.collections&&k.collections.length&&i.collectionLoad(k.collections[0].owner.login,k.collections[0].slug).then(e=>{this.setState({collectionContext:e})});break;case"compare":[k,f,g]=await Promise.all([i.documentLoad(l,c),i.documentLoad(a,s),t&&s?i.documentsLoadCommonAncestry(a,s,l,t):null]),null==g&&(g=await i.documentsLoadCommonAncestry(a,f.version,l,k.version));break;case"versioned":case"thumbnail":m=(k=h?await i.documentLoadPublished(u,h,c):await i.documentLoad(l,c)).version;break;case"playground":qp&&qp.getItem("playground")?(({id:l,saveVersion:c,events:v}=JSON.parse(qp.getItem("playground"))),k=await i.documentLoad(l,c)):k=await i.documentLoadPublished("observablehq","playground"),m=k.version}"thumbnail"!==o&&k&&k.id&&nh.user&&i.documentLoadMeta(k.id).then(({forks:e,fork_of:t,like:n})=>{this.setState({forks:e,fork_of:t,liked:n})}),"compare"===o?(y=Wp.of(f),w=Wp.of(k),({diff:x,count:E}=function(e,t){const n=new Map(t.map(wg)),r={insert_node:0,modify_node:0,remove_node:0,noop:0,total:0};for(const[i,o]of e.entries())if(r[xg(o)]++,"noop"!==o.type&&r.total++,o.id=i,o.baseId=o.base?o.base.id:null,o.targetId=o.target?o.target.id:null,null==o.baseId&&n.has(o.targetId)&&(o.baseId=n.get(o.targetId)),o.base&&o.target){const e=bg(o.base.value,o.target.value);e.forEach((t,n)=>{const r=e[n-1],i=e[n+1];let o;if(t.added&&r&&r.removed&&(o=r),t.removed&&i&&i.added&&(o=i),o){const e=yg(t.added?o.value:t.value,t.added?t.value:o.value).filter(e=>t.added?!e.removed:!e.added);e.forEach((e,t,n)=>{const r=n[t-1],i=n[t+1];r&&r.added&&i&&i.added&&" "===e.value&&!e.added&&(e.added=!0),r&&r.removed&&i&&i.removed&&" "===e.value&&!e.removed&&(e.removed=!0)}),t.wordDiff=e}}),o.lineDiff=e}return{diff:e,count:r}}(y.diff(w,g.mapping),g.mapping)),m=x[x.length-1].id):(b=Wp.of(k),m&&(b.events.length=m+1)),v&&(b=b.apply(v));const S="compare"===o?x.map(e=>Gc({},e.target||Gc({},e.base,{value:"",disabled:!0}),{id:e.id})):b.nodes,C=S.map(e=>{const{id:t,value:n,pinned:r}=e;return{type:"insert_node",node_id:t,new_node_value:n,new_node_pinned:r}});if(({cells:n,workerEvents:r}=sy(n,r,C)),"compare"===o&&(null==s&&(s=f.version),null==t&&(t=k.version),b=Wp.of({version:m,title:k.title,nodes:S}),x.forEach(e=>{const t=n.get(e.id);t.diff=e,t.source="modify_node"===e.type?"diff":"target",t.disabled=!t.diff.target})),("default"===o||"safe"===o)&&qp&&qp.getItem(`notebook-${k.id}`))try{const e=JSON.parse(qp.getItem(`notebook-${k.id}`));if(qp.removeItem(`notebook-${k.id}`),b.version===e[0].version-1){const t=[];b=b.merge(e,e=>t.push(e)),({cells:n,workerEvents:r}=sy(n,r,t))}}catch(N){}const T=b.nodes[0].id;1===b.version&&(n.get(T).selections=[{anchor:5,head:13}]);const _=e.location.hash;if(_)for(const[P,{name:A}]of n)if(A===_.substr(1)){this.anchorId=P,setTimeout(()=>this.maybeScrollIfLoaded(!0),Ny);break}this.setState({id:k.id,baseId:a,slug:k.slug,baseSlug:f&&f.slug,model:b,baseModel:y,targetModel:w,baseVersion:s,targetVersion:t,saveVersion:m,trashed:k.trashed,creator:k.creator,baseCreator:f&&f.creator,team:k.team,baseTeam:f&&f.team,updateTime:k.update_time&&new Date(k.update_time),publishTime:k.publish_time&&new Date(k.publish_time),publishVersion:k.publish_version||void 0,forks:k.forks,fork_of:k.fork_of,likes:k.likes,originalTitle:k.title,originalBaseTitle:f&&f.title,cells:n,focusId:"default"===o&&!k.trashed&&1===b.version&&nh.user?T:null,workerEvents:r,collections:k.collections||[],diff:x,diffCount:E,hasUnpublishedChanges:k.edit_unpublished})}hintAllowed(){const{type:e}=this.props;return"default"===e&&!document.cookie.split("; ").includes("sawClickToEdit=true")}render(){let{api:e,type:t,token:n,user:r,location:i,match:{params:{userLogin:o,version:a,baseVersion:s,documentSlug:l}}}=this.props;const{id:c,baseId:u,slug:h,baseSlug:d,comments:p,model:f,baseModel:m,saveVersion:g,shiftKey:v,trashed:b,updateTime:y,publishTime:w,publishVersion:x,baseIsLatestVersion:E,creator:k,baseCreator:S,team:C,baseTeam:T,forks:_,fork_of:N,originalTitle:P,originalBaseTitle:A,cells:L,bottomHover:O,hoverId:M,focusId:I,likes:R,liked:D,workerEvents:F,workerKey:j,errorMessage:H,keyboardShortcutsModal:U,hintVisible:$,collections:V,collectionContext:W,platformSupport:B,participants:z,diffCount:q,openComments:K,dragging:Y}=this.state;"compare"===t&&(a=a&&this.state.targetVersion,s=s&&this.state.baseVersion);const X=z.find(e=>e.id!==r.id);let Q=qf;if(f)for(const G of f.nodes){const{editorHeight:e,empty:n,commentHeight:r,comparerHeight:i,workerHeight:o,diff:a}=L.get(G.id);Q+=o+i+r+(G.pinned||n||I===G.id||"compare"===t&&a&&"noop"!==a.type?e:0)+Gf}const J=C||k,Z=T||S,ee=c&&k&&hh(r,{creator:k,team:C}),te=u&&S&&hh(r,{creator:S,team:T}),ne=ee&&"versioned"!==t&&"compare"!==t,re="compare"!==t?f&&f.title:f&&m&&`Comparing ${A} to ${P}`,ie=this.hasUnpublishedChanges();let oe=f&&f.version>g?"compare"===t?this.targetPatchSize():f.version-g:0,ae=ee?0:p.length;oe+=ae;const se="compare"===t&&(oe||q&&q.total>0),le=te&&E&&se&&this.merge,ce="compare"!==t&&"playground"!==t&&(N||V.length||_),ue="playground"!==t,he=f&&(le||ne&&h&&ie||!ne&&f.version>g);return G.createElement(Uh,{query:{maxWidth:1024}},S=>G.createElement(qd,Object.assign({contextUI:f&&("playground"===t||"compare"===t||f.version>1)&&G.createElement(Gb,{slug:h,id:c,baseId:u,team:C,creator:k,publish:this.publish,publishUnlisted:this.publishUnlisted,unpublish:this.unpublish,revert:this.revert,trash:this.trash,reloadCollections:this.reloadCollections,fullscreen:Cp.fullscreenEnabled&&this.fullscreen,user:r,baseTitle:A,editable:ne,version:a,baseVersion:s,modelVersion:f&&f.version,hasUnpublishedChanges:ie,publishTime:w,publishVersion:x,saveVersion:g,fork:this.fork,forkFromCompare:this.forkFromCompare,forkFromPlayground:this.forkFromPlayground,transfer:this.transfer,merge:le,comments:p,fork_of:N,trashed:b,type:t,location:i,api:e}),isNotebook:!0,footerContent:W&&G.createElement(Xb,{collection:W,id:c}),grayFooter:!!W,nofooter:"thumbnail"===t,stickyHeader:he,hintVisible:$&&!he,onDismissHint:this.dismissHint},this.props),G.createElement(rl,null,f&&G.createElement("title",null,re)),H?G.createElement("div",{className:"relative w-100"},G.createElement("div",{className:"absolute w-100 nt4 tc"},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 dark-red black-50 bg-washed-red br2 br--bottom"},H))):f&&ne&&ie&&G.createElement("div",{className:"relative w-100"},G.createElement("div",{className:"absolute w-100 nt4 tc"},G.createElement("div",{className:"dib ph2 pv1 f7 fw4 black-50 bg-near-white br2 br--bottom"},"Youve edited this notebook since",h?" publishing":" sharing",".",G.createElement(Vc,{className:"ml1 no-underline black-70 hover-blue",to:`/compare/${c}@${x}`},"View changes"),".",h?null:G.createElement("a",{className:"ml1 no-underline black-70 hover-blue pointer",onClick:this.publishUnlisted},"Reshare?")))),b?G.createElement(Zm,{onPutBack:this.onPutBack}):f&&ee&&G.createElement(af,{ref:this.onClientRef,id:c,model:f,token:n,saveVersion:g,editable:ne,onSave:this.onClientSave,onSaveConfirm:this.onClientSaveConfirm,onPresence:this.onClientPresence,onComments:this.onClientComments,onCommentConfirm:this.onClientCommentConfirm,onError:this.onClientError}),"compare"===t&&f&&m&&G.createElement(Og,{id:c,slug:h,title:P,owner:J,version:a,baseId:u,baseSlug:d,baseTitle:A,baseOwner:Z,baseVersion:s,compareHasChanges:se,changeAllSource:this.changeAllSource,merge:le}),"versioned"===t&&G.createElement(Lg,{exitTo:`/d/${c}`},G.createElement("b",null,"Showing version ",a,".")," Any changes you make will not be saved."),"safe"===t&&G.createElement(Lg,{exitTo:i.pathname.slice(0,-5)},G.createElement("b",null,"Safe mode enabled.")," Use this code-only view to fix issues that might crash or hang the normal editor."),ue&&G.createElement("div",{className:"flex justify-between ph3"},G.createElement(fp,{api:e,currentUser:r,creator:k,time:"versioned"===t?y:w||y,updateTime:"versioned"!==t&&w&&y>w?y:void 0,status:w?h?void 0:"SHARED":"PRIVATE",team:C}),G.createElement("div",{className:"f6"},X&&G.createElement(Mg,{participants:z,user:r}),"compare"!==t&&x&&G.createElement(Ig,{onClick:this.like,likes:R,liked:D}))),ce?G.createElement("div",{className:"h2 ph3 mt4"},V.length?G.createElement(Kb,{collections:V}):null,G.createElement(Ag,{fork_of:N,owner:C||k,forks:_,id:c,userLogin:o,documentSlug:l})):null,"playground"===t&&G.createElement(Rg,{location:i,save:this.forkFromPlayground,onHelp:this.showKeyboardShortcuts}),"default"===t&&G.createElement(Ef,{cells:L,platformSupport:B}),f&&G.createElement("div",{className:`relative mh0-ns nl3 ${"compare"===t?"mt3":ce||"playground"===t?"":"mt5"}`,style:{marginLeft:21}},G.createElement("div",{ref:this.onContentRef,tabIndex:"-1",className:"relative outline-0",onMouseLeave:()=>this.onNodeHover(null)},"safe"!==t&&G.createElement(Hb,{key:j,id:c,login:C?C.login:k&&k.login,events:F,height:Q,path:i.pathname+i.search,pointerEvents:!Y,onNodeHover:this.onNodeHover,onWorkerEvent:this.onWorkerEvent}),G.createElement("div",{className:"absolute h-100",style:{width:"50vw",left:"-50vw"}}),G.createElement("div",{className:"dib relative w-100 code f6 lh-copy black pen"},f&&f.nodes&&f.nodes.map((e,n)=>{const i=L.get(e.id),o=e.id===I||e.pinned||i.empty||"safe"===t||"compare"===t&&i.diff&&"noop"!==i.diff.type,a="compare"===t&&i.diff?xg(i.diff):"normal",s={};i.name&&(s.id=i.name);const l=p.filter(t=>t.node_id===e.id);return G.createElement("div",Object.assign({},s,{"data-node-id":e.id,key:e.id,className:"relative",onMouseEnter:()=>this.onNodeHover(e.id),style:{marginTop:qf,marginBottom:Gf,paddingTop:"safe"===t||i.empty||i.disabled?0:i.workerHeight}}),G.createElement("div",{className:"bg-light-blue drag-marker-before"}),G.createElement("div",{className:"bg-light-blue drag-marker-after"}),G.createElement(Pg,{id:e.id,merge:v,visible:e.id===M||e.id===I||n>0&&f.nodes[n-1].id===M||n>0&&f.nodes[n-1].id===I,onInsert:this.onNodeInserterInsert,onMerge:n>0&&this.onNodeInserterMerge}),o&&G.createElement(G.Fragment,null,"compare"===t&&i.diff&&"noop"!==i.diff.type&&G.createElement(_g,{id:e.id,source:i.source,edited:i.edited,onChangeSource:this.onNodeComparerChangeSource,diff:i.diff}),("compare"!==t||"diff"!==i.source)&&G.createElement(Qm,{id:e.id,value:i.disabled?i.diff["base"===i.source?"target":"base"].value:e.value,pinned:e.pinned,type:a,disabled:i.disabled,error:i.error,hovered:e.id===M,focused:e.id===I,selections:i.selections,cellNames:ay(L),workerAutocomplete:this.workerAutocomplete,onFocus:this.onNodeEditorFocus,onBlur:this.onNodeEditorBlur,onHeight:this.onNodeEditorHeight,onInput:this.onNodeEditorInput,onInsertBefore:this.onNodeEditorInsertBefore,onInsertAfter:this.onNodeEditorInsertAfter,onMergeNode:this.onNodeEditorMergeNode,onRemoveNode:this.onNodeEditorRemoveNode,onMoveFocus:this.onNodeEditorMoveFocus,onMoveNode:this.onNodeEditorMoveNode,onPinNode:this.onNodeEditorPinNode,onSelect:this.onNodeEditorSelect,autoClosePairs:r&&r.setting_autoclose_pairs}),"compare"===t&&"diff"===i.source&&G.createElement(Ng,{id:e.id,diff:i.diff,onHeight:this.onNodeEditorHeight})),G.createElement(Jm,{id:e.id,mobile:S,name:i.name,height:i.workerHeight,hovered:e.id===M,focused:e.id===I,type:t,open:o,pinned:e.pinned,pinnable:!i.disabled&&!i.empty,commentFlag:C||r&&r.flag_create_team,onCommentOpen:this.onCommentOpen,onRemove:this.onNodeEditorRemoveNode,onNodeDragStart:this.onNodeDragStart,onNodeDrag:this.onNodeDrag,onNodeDrop:this.onNodeDrop,onClick:this.onNodeGutterClick}),(l.length>0||K.has(e.id))&&G.createElement(ny,{node_id:e.id,open:K.has(e.id),user:r,team:C,owned:ee,onCommentOpen:this.onCommentOpen,onCommentClose:this.onCommentClose,onCommentHeight:this.onCommentHeight,onCommentInsert:this.insertComment,onCommentRemove:this.removeComment,onCommentResolve:this.resolveComments,comments:l}))}),G.createElement("div",{className:"relative",style:{marginTop:qf,marginBottom:Gf}},G.createElement(Pg,{id:null,merge:v,hovered:O,visible:O||f.nodes[f.nodes.length-1].id===M||f.nodes[f.nodes.length-1].id===I,onInsert:this.onNodeInserterInsert}))),G.createElement("div",{className:"relative h4 pointer",onMouseEnter:this.onBottomEnter,onMouseLeave:this.onBottomLeave,onClick:()=>this.onNodeInserterInsert(null),title:`Click to insert. ${ff("Alt-Enter")}`,style:{marginLeft:"-50vw",width:"calc(100% + 50vw)"}}))),Vs.createPortal(G.createElement("div",null,"playground"!==t&&oe>0&&G.createElement("div",{className:`fixed bottom-0 left-0 right-0 pv2 f6 black-80 bg-near-white bt b--black-10 z-2 ${ne?"fade-in delay-short":""}`},G.createElement("div",{className:ih},G.createElement("div",{className:"flex items-center mr5 mr0-ns lh-title"},ne?G.createElement(G.Fragment,null,G.createElement(Lu,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),"You have ",oe," unsaved change",1===oe?"":"s",", which will be saved when the server reconnects."):G.createElement(G.Fragment,null,G.createElement(Au,{className:"w1 h1 mr2 red",style:{flexShrink:0}}),`You have ${oe} unsaved change${1===oe?"":"s"}. ${"compare"===t&&te&&E?"Merge or fork":"Fork"} this notebook to\n                        save.`)))),G.createElement("div",{className:"fixed bottom-1 right-1 tc z-2"},"thumbnail"!==t&&G.createElement(Wd,{user:r,keyboardShortcuts:!0,showKeyboardShortcuts:this.showKeyboardShortcuts}))),document.getElementsByClassName("overlay")[0]),U&&G.createElement(eh,{onDismiss:this.hideKeyboardShortcuts,wrapperClass:"overflow-y-auto"},G.createElement(yf,{onDismiss:this.hideKeyboardShortcuts}))))}}qc(Py,"defaultProps",{api:void 0,type:"default",user:void 0,token:void 0,history:void 0,match:void 0});var Ay=[{license:{license:"MIT"},modules:[{author:"mrmrs",modules:["tachyons-custom"]},{author:"Facebook, Inc. and its affiliates.",modules:["react-dom","react","scheduler"]},{author:"NFL",modules:["react-helmet"]},{author:"Michael Jackson and Ryan Florence",modules:["react-router","react-router-dom"]},{author:"Sindre Sorhus",modules:["query-string","object-assign"]},{author:"Michael Jackson",modules:["react-media","history","resolve-pathname","value-equal"]},{author:"Rafael Pedicini",modules:["fscreen"]},{author:"Marijn Haverbeke",modules:["codemirror"]},{author:"John-David Dalton",modules:["lodash-es"]},{author:"Misha Moroshko",modules:["react-autosuggest","react-autowhatever","shallow-equal","section-iterator"]},{author:"Blake Embrey",modules:["path-to-regexp"]},{author:"Kevin Mrtensson",modules:["strict-uri-encode"]},{author:"Sam Verschueren",modules:["decode-uri-component"]},{author:"Facebook, Inc.",modules:["prop-types"]},{author:"Dan Abramov",modules:["react-side-effect"]},{author:"James Halliday",modules:["deep-equal"]},{author:"Andres Suarez",modules:["invariant"]},{author:"Julian Gruber",modules:["isarray"]},{author:"Marijn Haverbeke, Ingvar Stepanyan and Adrian Heine",modules:["acorn","acorn-walk"]},{author:"Alberto Leal",modules:["shallowequal"]},{author:"Mark Dalgleish",modules:["react-themeable"]},{author:"by Adrian Heine",modules:["acorn-bigint"]}]},{license:{license:"ISC"},modules:[{author:"Observable, Inc.",modules:["d3-require","@observablehq/notebook-runtime","@observablehq/notebook-parser"]}]},{license:{license:"BSD-3-Clause"},modules:[{author:"Kevin Decker",modules:["diff"]},{author:"Berkeley Martinez",modules:["warning"]},{author:"Michael Ridgway",modules:["hoist-non-react-statics"]},{author:"Jed Watson",modules:["exenv"]}]}];function Ly(e){return G.createElement(qd,Object.assign({},e,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Open Source")),G.createElement("h2",{className:"mt4 mb2 f4 fw7 lh-title black-70"},"Open Source"),G.createElement("div",{className:"measure-wide f5 fw4 lh-copy black-70"},G.createElement("p",null,"Observable wouldnt be possible without the code written and freely shared by the open source community. This web application includes code from the following modules."),Ay.map(({license:e,modules:t},n)=>G.createElement("div",{key:n,className:"mt4"},G.createElement("div",{className:"mb3 f5 fw7 semitracked"},function e(t){return t.license?-1!==t.license.indexOf("LicenseRef")?'License Reference "'+t.license+'"':[G.createElement("a",{key:1,className:"no-underline black-70 hover-blue",href:`https://spdx.org/licenses/${t.license}.html`},t.license),t.plus?" or newer":"",t.exception?" with "+t.exception:""]:[e(t.left)," ",t.conjunction," ",e(t.right)]}(e)),G.createElement("div",{className:"mt2 lh-copy"},t.map(({author:e,modules:t},n)=>G.createElement("div",{key:n,className:"mt1"},function(e){if(2===(e=e.map((e,t)=>G.createElement("a",{key:t,className:"no-underline blue hover-dark-blue",href:`https://npmjs.org/package/${e}`},e))).length)e.splice(1,0," and ");else if(e.length>2){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n<e.length-1&&(n==e.length-2?t.push(", and "):t.push(", "));e=t}return e}(t),"  ",e)))))))}Ay.find(e=>"MIT"===e.license.license).modules.push({author:"Cole Bemis",modules:["feather-icons"]},{author:"Khan Academy",modules:["katex"]},{author:"Christopher Jeffrey",modules:["marked"]}),Ay.find(e=>"ISC"===e.license.license).modules.push({author:"Dominic Tobias",modules:["react-image-crop"]});const Oy=Rc(class extends G.Component{async componentDidMount(){let{api:e,history:t,match:{params:{path:n}},location:{search:r}}=this.props;const{signup:i}=lu(r);if(n=n?`/${n.replace(/^(loggedin\/)+/,"")}`:"/",!nh.user)return window.history.replaceState(null,"",n),void window.location.reload(!0);const o=Gp&&Gp.getItem("fork");if(o){const t=Gp.getItem("forkId"),r=JSON.parse(o),{saveVersion:i}=r,a=Kc(r,["saveVersion"]),{id:s}=await e.documentFork(t,i,a);n=`/d/${s}`,Gp.removeItem("forkId"),Gp.removeItem("fork")}t.replace(n,{signup:i})}render(){return G.createElement(qd,this.props,G.createElement(rl,null,G.createElement("title",null,"Logged In")))}});class My extends G.Component{render(){throw new Zc}}class Iy extends G.Component{componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}parseParams(e){const{query:t,offset:n}=lu(e.location.search);return{query:t,offset:+n||0}}load(e){const{query:t,offset:n}=this.parseParams(e);if(!t)return void this.setState({notebooks:[]});this.setState({notebooks:new Array(27).fill(void 0)});const{api:r}=e;r.documentSearch(t,n).then(e=>this.setState({notebooks:e}))}render(){const{user:e}=this.props,{notebooks:t}=this.state,{query:n,offset:r}=this.parseParams(this.props);return G.createElement(qd,Object.assign({},this.props,{gray:!0}),G.createElement(rl,null,G.createElement("title",null,"Search")),n?G.createElement("div",null,G.createElement("div",{className:"mv4 f4 fw4 lh-copy black-70"},"Search results for ",n,""),0===t.length?G.createElement("div",{className:"flex h5 items-center justify-center"},G.createElement("div",{className:"black-50"},"We couldnt find any notebooks that matched your search.")):G.createElement("div",null,G.createElement("div",{className:"listing-grid"},t.slice(0,27).map((t,r)=>G.createElement(xh,Object.assign({},this.props,{key:t?t.id:r,notebook:t,query:n,user:e})))),t.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?query=${encodeURIComponent(n)}&offset=${r+27}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more")))):G.createElement("div",{className:"flex justify-center pv5"},G.createElement("form",null,G.createElement("div",{className:"mb3 f4 lh-copy black-50"}," Search for notebooks"),G.createElement("div",{className:"flex content-stretch items-top"},G.createElement("input",{name:"query",maxLength:"256",className:"flex-auto ph2 mr2 bg-white ba b--black-10 br2 hover-b--black-30 input-reset w-auto"}),G.createElement("input",{type:"submit",value:"Search",className:"pa2 white bg-blue hover-bg-dark-blue br2 pointer bn"})))))}}class Ry extends G.Component{render(){const{code:e}=lu(this.props.location.search);switch(window.history.replaceState(null,"","/"),e){case"401":throw new Qc;case"404":throw new Zc;default:throw new Yc}}}class Dy extends G.Component{constructor(...e){super(...e),qc(this,"state",{customer:void 0,error:void 0}),qc(this,"onToken",async e=>{const{team:{id:t},api:n}=this.props;try{await n.teamBillingUpdate(t,e.id)}catch(r){this.setState({error:"Whoops, this payment method could not be used. Please try again, or use another form of payment."})}this.load(this.props)}),qc(this,"updateBilling",()=>{this.openHandler("Update")}),qc(this,"addBilling",()=>{this.openHandler("Subscribe")}),qc(this,"openHandler",e=>{const{team:t,user:n,team:{id:r}}=this.props,{handler:i}=this.state,o=n.teams.find(e=>e.id===r).email;i.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e994d8ef78e387a9715cc1aab4dfdbc250bf565186e1165a931b055d1e02e84d.png",description:`${t.name||t.login}: Team account`,email:o,panelLabel:e})}),qc(this,"removeBilling",async()=>{const{team:e}=this.props;if(!confirm(`Are you sure you want to cancel the subscription for ${e.name||e.login}?`))return;const{team:{id:t},api:n}=this.props;await n.teamBillingDelete(t),this.load(this.props)}),qc(this,"dismissError",()=>{this.setState({error:void 0})})}componentWillMount(){Um("https://checkout.stripe.com/checkout.js").catch(()=>this.setState({handler:window.StripeCheckout.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})})),this.load(this.props)}componentWillReceiveProps(e){this.load(e)}componentWillUnmount(){const{handler:e}=this.state;e&&e.close()}load({team:e,api:t}){e&&t.teamBilling(e.id).then(e=>this.setState({customer:e}))}render(){const{customer:e,error:t}=this.state;if(void 0===e)return G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",null,G.createElement("div",{className:"mb2 f4 lh-copy black-50"},"Loading billing information")));let n,r,i,o;try{({sources:{data:[n]}}=e),({subscriptions:{data:[{quantity:r,plan:{amount:i}}]}}=e),o=!!(n&&r&&i)}catch(a){o=!1}return G.createElement(G.Fragment,null,t&&G.createElement("div",{className:"relative pa3 mb4 bg-washed-yellow br2"},G.createElement("button",{className:"inline-flex absolute right-1 top-1 pa1 black-50 hover-black bg-transparent bn pointer",onClick:this.dismissError},G.createElement(wu,{className:"w1 h1"})),G.createElement("div",{className:"mr3 lh-copy black-70"},t)),G.createElement("div",{className:"fw5"},"Your plan"),!0===o?G.createElement("div",{className:"mt3"},G.createElement("div",null,G.createElement("span",{className:"mr2 fw5 black"},"$",(i*r/100).toFixed(0),"/month"),G.createElement("span",{className:"black-30"},r," user",1===r?"":"s"," at $",(i/100).toFixed(0),"/month")),G.createElement("div",{className:"mt4 fw5"},"Payment method"),G.createElement("div",{className:"mt3"},n.brand," ending in ",n.last4," Expiration ",n.exp_month,"/",n.exp_year),G.createElement("div",{className:"mt3"},G.createElement(ip,{secondary:!0,onClick:this.updateBilling},"Update payment method")),G.createElement("div",{className:"flex items-center justify-center mt5"},G.createElement("button",{className:"ph2 pv1 f6 black-70 hover-white bg-transparent hover-bg-red ba b--black-10 br2 pointer",title:"Delete payment method",onClick:this.removeBilling},"Cancel subscription"))):!1===o?G.createElement("div",null,G.createElement("div",{className:"mv3 lh-copy black-70"},"This team has no attached payment information. To avoid it being deactivated in the next billing cycle, please set up billing."),G.createElement("button",{className:"ph3 pv2 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn",onClick:this.addBilling},"Add payment method")):null)}}class Fy extends G.Component{constructor(...e){super(...e),qc(this,"state",{popover:!1}),qc(this,"togglePopover",e=>{e.stopPropagation(),this.setState(({popover:e})=>({popover:!e}))}),qc(this,"remove",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;confirm(`Are you sure you want to remove @${n.login} from the team?`)&&(await e.teamMemberRemove(t.id,n.id),await r())}),qc(this,"promote",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;await e.teamMemberRole(t.id,n.id,"owner"),await r(),this.setState({popover:!1})}),qc(this,"demote",async()=>{const{api:e,team:t,member:n,reload:r}=this.props;await e.teamMemberRole(t.id,n.id,"member"),await r(),this.setState({popover:!1})})}render(){const{popover:e}=this.state,{member:t,role:n,user:r}=this.props;return G.createElement("div",{className:"flex justify-between items-center pv2"},G.createElement(Vc,{className:"inline-flex items-center no-underline black hover-blue",to:`/@${t.login}`},G.createElement(ah,{user:t,s:16,className:"mr2 br-100"}),t.name||t.login),G.createElement("div",{className:"inline-flex relative items-center"},G.createElement("span",{className:"mh2 f7 fw4 ttu black-30"},"owner"===t.role?"OWNER":"MEMBER"),"owner"===n&&t.id!==r.id&&G.createElement("button",{onClick:this.togglePopover,className:"inline-flex pa0 black-30 hover-black bg-transparent bn pointer"},G.createElement(_u,{className:"w1 h1"})),e&&G.createElement(ph,{onClickOutside:this.togglePopover,extraStyle:{right:-16,width:"13rem",top:18}},G.createElement("div",{className:"pv2"},"member"===t.role&&G.createElement("a",{onClick:this.remove,className:"flex items-center ph3 pv2 f6 fw6 black-70 hover-black hover-bg-near-white pointer"},"Remove from team"),G.createElement("a",{onClick:"owner"===t.role?this.demote:this.promote,className:"flex items-center ph3 pv2 f6 fw6 lh-copy black-70 hover-black hover-bg-near-white pointer"},"owner"===t.role?"Change role to member":"Change role to owner")))))}}class jy extends G.Component{constructor(...e){super(...e),qc(this,"state",{members:[],email:"",invitations:[]}),qc(this,"reload",()=>{const{api:e}=this.props;this.load(Gc({},this.props,{api:e.init({cache:"no-cache"})}))}),qc(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),qc(this,"rescind",async e=>{if(!e.id)return void alert("This invitation was just sent; please wait a moment.");if(!confirm(`Are you sure you want to rescind the invitation to ${e.email}?`))return;const{api:t,team:n}=this.props;this.setState(({invitations:t})=>({invitations:t.filter(t=>e!==t)})),await t.teamRescindInvitation(n.id,e.id),this.load(this.props)}),qc(this,"invite",async e=>{e.preventDefault();const{api:t,team:n,user:r}=this.props,{email:i}=this.state;this.setState(({invitations:e})=>({email:"",invitations:e.filter(e=>e.email!==i).concat({email:i,create_time:new Date,accept_time:null,owner:r})})),await t.teamInvite(n.id,i),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({team:e,api:t,role:n}){e&&(t.teamMembers(e.id).then(e=>this.setState({members:e.sort((e,t)=>t.role.localeCompare(e.role)||(e.name||e.login).localeCompare(t.name||t.login))})),"owner"===n&&t.teamInvitations(e.id).then(e=>this.setState({invitations:e.map(e=>{let{create_time:t}=e;return Gc({},Kc(e,["create_time"]),{create_time:new Date(t)})})})))}render(){const{role:e}=this.props,{members:t,email:n,invitations:r}=this.state,i=r.filter(e=>!e.accept_time);return G.createElement("div",null,G.createElement("div",{className:"mb3 fw5"},"Members"),G.createElement("div",{className:"pv2 bt bb b--black-10"},t.map(e=>G.createElement(Fy,Object.assign({key:e.id,member:e},this.props,{reload:this.reload})))),"owner"===e?G.createElement("div",null,i.length>0&&G.createElement(G.Fragment,null,G.createElement("div",{className:"mt5 mb3 fw5"},"Invitations"),G.createElement("div",{className:"pv2 bt bb b--black-10"},i.map((e,t)=>G.createElement("div",{key:t,className:"pv2"},G.createElement("div",{className:"flex justify-between items-center"},e.email,G.createElement("button",{onClick:this.rescind.bind(this,e),title:"Click to rescind invitation.",className:"inline-flex pa0 black-30 hover-white bg-transparent hover-bg-dark-red bn pointer"},G.createElement(wu,{className:"w1 h1 ma1"}))),G.createElement("div",{className:"mt1 f7 fw4 black-30"},"Invited"," ",G.createElement(Qb,{time:e.create_time})," by"," ",G.createElement(Vc,{to:`/@${e.owner.login}`,className:"no-underline black-50 hover-blue"},e.owner.name||e.owner.login)))))),G.createElement("div",{className:"mt5"},G.createElement("form",{className:"flex flex-column mw5-ns center items-stretch",onSubmit:this.invite},G.createElement("h3",{className:"ma0 f6 fw5 black-70"},"Invite member"),G.createElement("label",{className:"db mt3 mb1 f6 fw5 black-50",htmlFor:"invite-email"},"Email"),G.createElement("input",{id:"invite-email",name:"email",type:"email",maxLength:"255",required:!0,value:n,onChange:this.onChangeEmail,className:"pa2 mb2 bg-white ba b--black-10 br2 hover-b--black-30",placeholder:"user@email.com"}),G.createElement(ip,{disabled:!n,highlight:n},"Send")))):G.createElement("div",{className:"pv2 mt3 f6 tc black-30"},"Owners in this team can invite new members and change roles."))}}var Hy=({onDismiss:e})=>G.createElement(eh,{onDismiss:e},G.createElement("div",{className:"relative"},G.createElement("div",{onClick:e,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("h3",{className:"mt0 mb2 f4 fw7 black"},"Please check your email to accept this change."),G.createElement("div",{className:"mt3 f6 lh-copy"},"You should receive an email momentarily confirming this email address change. If you do not receive it, please check your Spam folder, wait a few minutes, or contact Observable support."),G.createElement("div",{className:"flex items-center justify-end mt3"},G.createElement("button",{onClick:e,className:"inline-flex ph3 pv2 f6 fw6 white bg-blue hover-bg-dark-blue br2 pointer bn"},"Close"))));const Uy="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function $y(e){const t=e.getBoundingClientRect(),n=document.documentElement;return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}}function Vy(e){let t,n;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),{x:t,y:n}}function Wy(e,t,n){return Math.min(Math.max(e,t),n)}function By(e){return e&&e.width&&e.height}function zy(e){let t;return"n"===e?t="s":"ne"===e?t="sw":"e"===e?t="w":"se"===e?t="nw":"s"===e?t="n":"sw"===e?t="ne":"w"===e?t="e":"nw"===e&&(t="se"),t}class qy extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{}),qc(this,"onCropMouseTouchDown",e=>{const{crop:t}=this.props;e.preventDefault();const n=Vy(e);this.componentRef.focus({preventScroll:!0});const{ord:r}=e.target.dataset,i="nw"===r||"w"===r||"sw"===r,o="nw"===r||"n"===r||"ne"===r;let a;t.aspect&&(a=$y(this.cropSelectRef)),this.evData={clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:i?t.x+t.width:t.x,cropStartY:o?t.y+t.height:t.y,xInversed:i,yInversed:o,xCrossOver:i,yCrossOver:o,startXCrossOver:i,startYCrossOver:o,isResize:e.target!==this.cropSelectRef,ord:r,cropOffset:a},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),qc(this,"onComponentMouseTouchDown",e=>{const{crop:t,keepSelection:n,onChange:r}=this.props;if(e.target!==this.imageRef)return;if(n&&By(t))return;e.preventDefault();const i=Vy(e);this.componentRef.focus({preventScroll:!0});const o=$y(this.imageRef),a=(i.x-o.left)/this.imageRef.width*100,s=(i.y-o.top)/this.imageRef.height*100,l={aspect:t?t.aspect:void 0,x:a,y:s,width:0,height:0};this.evData={clientStartX:i.x,clientStartY:i.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:l.x,cropStartY:l.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0,r(l,Gy(this.imageRef,l)),this.setState({cropIsActive:!0})}),qc(this,"onDocMouseTouchMove",e=>{const{crop:t,onChange:n,onDragStart:r}=this.props;if(r(),!this.mouseDownOnCrop)return;e.preventDefault();const{evData:i}=this,o=Vy(e);i.isResize&&t.aspect&&i.cropOffset&&(o.y=this.straightenYPath(o.x));const a=o.x-i.clientStartX;i.xDiffPc=a/this.imageRef.width*100;const s=o.y-i.clientStartY;let l;i.yDiffPc=s/this.imageRef.height*100,n(l=i.isResize?this.resizeCrop():this.dragCrop(),Gy(this.imageRef,l))}),qc(this,"onComponentKeyDown",e=>{const{crop:t,onChange:n,onComplete:r}=this.props,i=e.which;let o=!1;if(!By(t))return;const a=this.makeNewCrop();i===qy.arrowKey.left?(a.x-=qy.nudgeStep,o=!0):i===qy.arrowKey.right?(a.x+=qy.nudgeStep,o=!0):i===qy.arrowKey.up?(a.y-=qy.nudgeStep,o=!0):i===qy.arrowKey.down&&(a.y+=qy.nudgeStep,o=!0),o&&(e.preventDefault(),a.x=Wy(a.x,0,100-a.width),a.y=Wy(a.y,0,100-a.height),n(a,Gy(this.imageRef,a)),r(a,Gy(this.imageRef,a)))}),qc(this,"onDocMouseTouchEnd",()=>{const{crop:e,onComplete:t,onDragEnd:n}=this.props;n(),this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,t(e,Gy(this.imageRef,e)),this.setState({cropIsActive:!1}))})}componentDidMount(){const e={passive:!1};if(document.addEventListener("mousemove",this.onDocMouseTouchMove,e),document.addEventListener("touchmove",this.onDocMouseTouchMove,e),document.addEventListener("mouseup",this.onDocMouseTouchEnd,e),document.addEventListener("touchend",this.onDocMouseTouchEnd,e),document.addEventListener("touchcancel",this.onDocMouseTouchEnd,e),this.imageRef.complete||this.imageRef.readyState)if(0===this.imageRef.naturalWidth){const{src:e}=this.imageRef;this.imageRef.src=Uy,this.imageRef.src=e}else this.onImageLoad(this.imageRef)}componentWillUnmount(){document.removeEventListener("mousemove",this.onDocMouseTouchMove),document.removeEventListener("touchmove",this.onDocMouseTouchMove),document.removeEventListener("mouseup",this.onDocMouseTouchEnd),document.removeEventListener("touchend",this.onDocMouseTouchEnd),document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}onImageLoad(e){this.props.onImageLoaded(e)}getCropStyle(){const{crop:e}=this.props;return{top:`${e.y}%`,left:`${e.x}%`,width:`${e.width}%`,height:`${e.height}%`}}getNewSize(){const{crop:e,minWidth:t,maxWidth:n,minHeight:r,maxHeight:i}=this.props,{evData:o}=this,a=this.imageRef.width/this.imageRef.height;let s,l=o.cropStartWidth+o.xDiffPc;return o.xCrossOver&&(l=Math.abs(l)),l=Wy(l,t,n),s=e.aspect?l/e.aspect*a:o.cropStartHeight+o.yDiffPc,o.yCrossOver&&(s=Math.min(Math.abs(s),o.cropStartY)),s=Wy(s,r,i),e.aspect&&(l=Wy(s*e.aspect/a,0,100)),{width:l,height:s}}dragCrop(){const e=this.makeNewCrop(),{evData:t}=this;return e.x=Wy(t.cropStartX+t.xDiffPc,0,100-e.width),e.y=Wy(t.cropStartY+t.yDiffPc,0,100-e.height),e}resizeCrop(){const e=this.makeNewCrop(),{evData:t}=this,{ord:n}=t,r=this.imageRef.width/this.imageRef.height;t.xInversed&&(t.xDiffPc-=2*t.cropStartWidth),t.yInversed&&(t.yDiffPc-=2*t.cropStartHeight);const i=this.getNewSize();let o=t.cropStartX,a=t.cropStartY;t.xCrossOver&&(o=e.x+(e.width-i.width)),t.yCrossOver&&(a=!1===t.lastYCrossover?e.y-i.height:e.y+(e.height-i.height));const s=function(e,t){const n=Gc({},e);let r=!1;n.x+n.width>100?(n.width=e.width+(100-(e.x+e.width)),n.x=e.x+(100-(e.x+n.width)),r=!0):n.x<0&&(n.width=e.x+e.width,n.x=0,r=!0),r&&e.aspect&&(n.height=n.width/e.aspect*t,n.y<e.y&&(n.y=e.y+(e.height-n.height)));let i=!1;return n.y+n.height>100?(n.height=e.height+(100-(e.y+e.height)),n.y=e.y+(100-(e.y+n.height)),i=!0):n.y<0&&(n.height=e.y+e.height,n.y=0,i=!0),i&&e.aspect&&(n.width=n.height*e.aspect/t,n.x<e.x&&(n.x=e.x+(e.width-n.width))),n}({x:o,y:a,width:i.width,height:i.height,aspect:e.aspect},r);return e.aspect||qy.xyOrds.indexOf(n)>-1?(e.x=s.x,e.y=s.y,e.width=s.width,e.height=s.height):qy.xOrds.indexOf(n)>-1?(e.x=s.x,e.width=s.width):qy.yOrds.indexOf(n)>-1&&(e.y=s.y,e.height=s.height),t.lastYCrossover=t.yCrossOver,this.crossOverCheck(),e}straightenYPath(e){const{evData:t}=this,{ord:n}=t,{cropOffset:r}=t,i=t.cropStartWidth/100*this.imageRef.width,o=t.cropStartHeight/100*this.imageRef.height;let a,s;return"nw"===n||"se"===n?(a=o/i,s=r.top-r.left*a):(a=-o/i,s=r.top+(o-r.left*a)),a*e+s}createCropSelection(){const e=this.getCropStyle();return G.createElement("div",{ref:e=>{this.cropSelectRef=e},style:e,className:"absolute top-0 left-0 ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown},G.createElement("div",{className:"ReactCrop__drag-elements"},G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-n","data-ord":"n"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-e","data-ord":"e"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-s","data-ord":"s"}),G.createElement("div",{className:"absolute ReactCrop__drag-bar ord-w","data-ord":"w"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-nw","data-ord":"nw"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-n","data-ord":"n"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-ne","data-ord":"ne"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-e","data-ord":"e"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-se","data-ord":"se"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-s","data-ord":"s"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-sw","data-ord":"sw"}),G.createElement("div",{className:"absolute ReactCrop__drag-handle ord-w","data-ord":"w"})))}makeNewCrop(){return Gc({},qy.defaultCrop,this.props.crop)}crossOverCheck(){const{evData:e}=this;(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc<=0)&&(e.xCrossOver=!e.xCrossOver),(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc<=0)&&(e.yCrossOver=!e.yCrossOver);const t=e.xCrossOver!==e.startXCrossOver,n=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!t&&zy(e.ord),e.inversedYOrd=!!n&&zy(e.ord)}render(){const{children:e,crossorigin:t,crop:n,imageAlt:r,src:i,style:o,imageStyle:a}=this.props,{cropIsActive:s}=this.state;let l;By(n)&&(l=this.createCropSelection());const c=["ReactCrop relative dib overflow-hidden bg-black"];return s&&c.push("ReactCrop--active"),n&&(n.aspect&&c.push("ReactCrop--fixed-aspect"),!s||n.width&&n.height||c.push("ReactCrop--crop-invisible")),G.createElement("div",{ref:e=>{this.componentRef=e},className:c.join(" "),style:o,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"1",onKeyDown:this.onComponentKeyDown},G.createElement("img",{ref:e=>{this.imageRef=e},crossOrigin:t,className:"db ReactCrop__image",style:a,src:i,onLoad:e=>this.onImageLoad(e.target),alt:r}),l,e)}}function Gy(e,t){const n=Math.round(e.naturalWidth*(t.x/100)),r=Math.round(e.naturalHeight*(t.y/100)),i=Math.round(e.naturalWidth*(t.width/100)),o=Math.round(e.naturalHeight*(t.height/100));return{x:n,y:r,width:Wy(i,0,e.naturalWidth-n),height:Wy(o,0,e.naturalHeight-r)}}qy.xOrds=["e","w"],qy.yOrds=["n","s"],qy.xyOrds=["nw","ne","se","sw"],qy.arrowKey={left:37,up:38,right:39,down:40},qy.nudgeStep=.2,qy.defaultCrop={x:0,y:0,width:0,height:0},qy.defaultProps={crop:void 0,crossorigin:void 0,imageAlt:"",maxWidth:100,maxHeight:100,minWidth:0,minHeight:0,keepSelection:!1,onComplete:()=>{},onImageLoaded:()=>{},onDragStart:()=>{},onDragEnd:()=>{},children:void 0,style:void 0,imageStyle:void 0};const Ky=460;class Yy extends G.PureComponent{constructor(...e){super(...e),qc(this,"state",{saving:!1,maxDimension:Math.min(window.innerWidth-40,Ky),crop:{aspect:1}}),qc(this,"onCrop",e=>{this.setState({crop:e})}),qc(this,"saveAvatar",async()=>{this.setState({saving:!0});const{crop:e}=this.state,{teamId:t,fileURL:n,hideAvatarModal:r,refreshUser:i,reloadTeam:o,api:a}=this.props,s=await new Promise((e,t)=>{const r=new Image;r.onload=(()=>e(r)),r.onerror=(e=>t(e)),r.src=n}),{x:l,y:c,width:u,height:h}=Gy(s,e),d=document.createElement("canvas");d.width=Ky,d.height=Ky,d.getContext("2d").drawImage(s,l,c,u,h,0,0,Ky,Ky);const p=d.toDataURL("image/jpeg",.7);await(t?a.teamEditAvatar(t,p):a.userEditAvatar(p)),await Promise.all([i(),o&&o()]),r()}),qc(this,"onImageLoaded",e=>{this.setState({crop:e.width>e.height?{aspect:1,height:100,width:100*e.height/e.width,x:100*(e.width-e.height)/e.width/2,y:0}:{aspect:1,height:100*e.width/e.height,width:100,x:0,y:100*(e.height-e.width)/e.height/2}})})}render(){const{saving:e,crop:t,maxDimension:n}=this.state,{fileURL:r,hideAvatarModal:i}=this.props;return G.createElement(eh,{onDismiss:i},G.createElement("div",{className:"relative"},G.createElement("div",{onClick:i,className:"absolute top-0 right-0 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"})),G.createElement("h3",{className:"mt0 mb2 f4 fw7 black"},"Replace your avatar"),G.createElement("div",{className:"pv2"},G.createElement(qy,{src:r,onChange:this.onCrop,imageStyle:{maxWidth:n,maxHeight:n},crop:t,onImageLoaded:this.onImageLoaded})),G.createElement("div",{className:`flex items-center justify-end mt3 ${e?"pen o-50":""}`},G.createElement("div",{className:"mr2"},G.createElement(ip,{secondary:!0,onClick:i},"Cancel")),G.createElement(ip,{highlight:!0,onClick:this.saveAvatar},"Save"))))}}class Xy extends G.Component{constructor(e){super(e),qc(this,"state",{user:{},email:void 0,fileURL:void 0,saved:!1,saveTimer:void 0,sendingEmailConfirmation:!1,emailConfirmationModal:!1,avatarModal:!1}),qc(this,"hideEmailConfirmation",()=>{this.setState({emailConfirmationModal:!1})}),qc(this,"onChange",e=>{const{target:{name:t,value:n,type:r,checked:i}}=e;this.setState(({user:e})=>({user:Gc({},e,{[t]:"checkbox"===r?i:n})}))}),qc(this,"onChangeEmail",e=>{const{target:{value:t}}=e;this.setState({email:t})}),qc(this,"save",async e=>{e.preventDefault();const{teamId:t,api:n,refreshUser:r,reloadTeam:i}=this.props,{user:o}=this.state;await(t?n.teamEdit(t,o):n.userEdit(o)),await Promise.all([r(),i&&i()]),this.setState({saved:!0,saveTimer:setTimeout(()=>{this.setState({saved:!1})},1e3)})}),qc(this,"saveEmail",async e=>{e.preventDefault(),document.activeElement&&document.activeElement.blur();const{teamId:t,api:n}=this.props,{email:r}=this.state;this.setState({sendingEmailConfirmation:!0}),await(t?n.teamEditEmail(t,r):n.userEditEmail(r)),this.setState({emailConfirmationModal:!0,sendingEmailConfirmation:!1})}),qc(this,"triggerAvatar",()=>{const e=this.fileInputRef.current;e&&e.click()}),qc(this,"onFileChange",async e=>{const[t]=e.target.files;e.target.value="",this.setState({avatarModal:!0,file:t,fileURL:URL.createObjectURL(t)})}),qc(this,"hideAvatarModal",()=>{const{fileURL:e}=this.state;URL.revokeObjectURL(e),this.setState({avatarModal:!1,fileURL:void 0})}),this.fileInputRef=G.createRef()}componentWillMount(){this.reload()}componentWillReceiveProps(e){this.state.avatar_url===e.user.avatar_url?this.reload(e):this.setState({avatar_url:e.user.avatar_url})}reload(e=this.props){const{user:{name:t,home_url:n,bio:r,email:i,setting_autoclose_pairs:o,avatar_url:a}}=e;this.setState({user:{name:t,home_url:n,bio:r,setting_autoclose_pairs:o},avatar_url:a,email:i})}render(){const{refreshUser:e}=this.props,{user:t,saved:n,email:r,emailConfirmationModal:i,sendingEmailConfirmation:o,avatarModal:a,fileURL:s,avatar_url:l}=this.state,{teamId:c,user:u,reloadTeam:h}=this.props,d=u.name!==t.name||u.home_url!==t.home_url||u.bio!==t.bio||u.setting_autoclose_pairs!==t.setting_autoclose_pairs,p=u.email!==r;return G.createElement(G.Fragment,null,G.createElement($l,{when:d||p,message:"Are you sure you want to leave before saving changes?"}),G.createElement("form",{onSubmit:this.save,className:"flex flex-column items-stretch"},G.createElement("div",{className:"flex-ns"},G.createElement("div",{className:"flex flex-column w4 items-stretch"},G.createElement("img",{className:`w4 h4 mt4 br-100 ${l?"":"ba b--black-10"}`,src:l?`${l}?s=256`:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}),G.createElement("button",{type:"button",className:"pv2 mt2 f6 fw6 no-underline black-70 hover-black bg-light-gray hover-bg-moon-gray br2 pointer bn",onClick:this.triggerAvatar},"Change avatar")),G.createElement("div",{className:"flex flex-column flex-auto items-stretch mt4 mt0-ns ml4-ns"},G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"name"},c?"Team display name":"Display name"),G.createElement("input",{id:"name",name:"name",maxLength:"255",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",onChange:this.onChange,value:t.name}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"home_url"},c?"Team URL":"URL"),G.createElement("input",{id:"home_url",name:"home_url",type:"url",maxLength:"255",onChange:this.onChange,className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",value:t.home_url}),G.createElement("label",{className:"pt3 pb1 f6 fw5 black-50",htmlFor:"bio"},c?"Team bio":"Bio"),G.createElement("textarea",{id:"bio",name:"bio",maxLength:"255",onChange:this.onChange,className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",rows:"5",value:t.bio}),!c&&G.createElement("div",{className:"pa2 mt2 bg-near-white br2"},G.createElement("div",{className:"pb1 f6 fw5 black-50"},"Advanced settings"),G.createElement("div",{className:"flex items-center pt2"},G.createElement("input",{type:"checkbox",id:"setting_autoclose_pairs",name:"setting_autoclose_pairs",onChange:this.onChange,className:"mr1",checked:!!t.setting_autoclose_pairs}),G.createElement("label",{className:"inline-flex items-center mr2 f6 black-50",htmlFor:"setting_autoclose_pairs"},"Auto-close pairs",G.createElement(ty,null,"When you type the first character of a pair",G.createElement("code",{className:"pa1 mh1 f7 bg-near-white"},"({['\"`"),"the editor will automatically insert its complementary closing character,",G.createElement("code",{className:"pa1 ml1 f7 bg-near-white"},")}]'\"`"))))),G.createElement("div",{className:"flex items-center justify-end pt3"},n&&G.createElement("div",{className:"mr3 f6 ttu black-30"},"Saved"),G.createElement(ip,{disabled:!d,highlight:d},"Save"))))),G.createElement("h3",{className:"pt5 ma0 mb2 f4 fw4 black-70"},"Email settings"),G.createElement("form",{onSubmit:this.saveEmail,className:"flex flex-column items-stretch",style:o?{pointerEvents:"none",opacity:.5}:{}},G.createElement("label",{className:"flex justify-between pt3 pb1 f6 fw5 black-50",htmlFor:"email"},c?"Team email":"Email"),G.createElement("input",{id:"email",name:"email",type:"email",maxLength:"255",className:"pa2 black-70 bg-white ba b--black-10 br2 hover-b--black-30",onChange:this.onChangeEmail,value:r}),G.createElement("div",{className:"flex items-center justify-end pt3"},G.createElement(ip,{disabled:!p,highlight:p},o?"Sending":"Change email"))),i&&G.createElement(Hy,{onDismiss:this.hideEmailConfirmation}),a&&G.createElement(Yy,{api:this.props.api,refreshUser:e,reloadTeam:h,fileURL:s,hideAvatarModal:this.hideAvatarModal,teamId:c}),G.createElement("input",{type:"file",className:"dn",accept:".jpg, .jpeg, .png",onChange:this.onFileChange,ref:this.fileInputRef}))}}function Qy(e,t){return e.name.localeCompare(t.name)}class Jy extends G.Component{constructor(e){super(e),qc(this,"state",{name:"",value:"",saveValue:"",focused:!1}),qc(this,"onFocus",()=>{this.setState({focused:!0})}),qc(this,"onBlur",()=>{this.setState({focused:!1})}),qc(this,"onChangeName",e=>{const{target:{value:t}}=e;this.setState({name:t})}),qc(this,"onChangeValue",e=>{const{target:{value:t}}=e;this.setState({value:t})}),qc(this,"setSecret",e=>{e.preventDefault();const{isNew:t}=this.props,{name:n,value:r}=this.state;this.props.setSecret({name:n,value:r}),this.setState(t?{name:"",value:""}:{saveValue:r})}),e.secret&&(this.state.name=e.secret.name,this.state.value=e.secret.value,this.state.saveValue=e.secret.value)}componentWillReceiveProps(e){e.secret!==this.props.secret&&this.setState({name:e.secret.name,value:e.secret.value,saveValue:e.secret.value})}render(){const{deleteSecret:e,isNew:t}=this.props,{name:n,value:r,focused:i,saveValue:o}=this.state;return G.createElement("form",{onSubmit:this.setSecret,style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gridGap:"5px",marginBottom:5}},t?G.createElement("input",{name:"name",type:"text",maxLength:"255",required:!0,placeholder:"Name",spellCheck:"false",autoComplete:"off",value:n,onChange:this.onChangeName,className:"pa2 code bg-white ba b--black-10 br2 hover-b--black-30"}):G.createElement("div",{className:"pa2 code truncate"},n),G.createElement("input",{name:"value",type:i?"text":"password",maxLength:"1023",placeholder:"Value",spellCheck:"false",autoComplete:"off",required:!0,value:r,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeValue,className:"pa2 code bg-white ba b--black-10 br2 hover-b--black-30"}),t||o!==r?G.createElement(ip,{disabled:!n||!r,highlight:n&&r},"Save"):G.createElement("button",{onClick:()=>e(n),type:"button",title:"Click to delete secret.",className:"inline-flex w3 pa0 mt2 black-30 hover-white hover-dark-red bg-transparent bn pointer"},G.createElement(wu,{className:"w1 h1 ma1"})))}}class Zy extends G.Component{constructor(...e){super(...e),qc(this,"state",{secrets:[],name:"",value:""}),qc(this,"deleteSecret",async e=>{const{api:t,teamId:n}=this.props;this.setState(({secrets:t})=>({secrets:t.filter(t=>t.name!==e)})),await(n?t.teamSetSecret(n,{name:e,value:null}):t.userSetSecret({name:e,value:null})),this.load(this.props)}),qc(this,"setSecret",async({name:e,value:t})=>{const{api:n,teamId:r}=this.props;this.setState(({secrets:n})=>({name:"",value:"",secrets:n.filter(t=>t.name!==e).concat({name:e,value:t}).sort(Qy)})),await(r?n.teamSetSecret(r,{name:e,value:t}):n.userSetSecret({name:e,value:t})),this.load(this.props)})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({teamId:e,api:t}){(e?t.teamSecrets(e):t.userSecrets()).then(e=>this.setState({secrets:e.sort(Qy)}))}render(){const{secrets:e}=this.state;return G.createElement("div",{className:"mw6-ns center"},G.createElement("div",{className:"flex justify-between mb4"},G.createElement("div",{className:"fw5"},"Secrets"),G.createElement(ty,null,G.createElement("div",{className:"f6 black-50"},"Secrets can be accessed by your notebooks using the"," ",G.createElement("code",null,"Secret()")," function. Use secrets to store API keys and other sensitive values you dont want to be public."))),G.createElement("div",{className:"f6"},e.map(e=>G.createElement(Jy,{key:e.name,secret:e,setSecret:this.setSecret,deleteSecret:this.deleteSecret})),G.createElement(Jy,{setSecret:this.setSecret,isNew:!0})))}}function ew(e,t){return`db fw5 pv2 ph3 mr2 f6 no-underline br2 br--top bt bl br ${e===t?"black-70 bg-white b--black-10":"black-50 hover-black b--transparent"}`}class tw extends G.PureComponent{render(){const{api:e,user:t,match:{params:{tab:n}}}=this.props;return G.createElement(Uh,{query:{maxWidth:640}},r=>G.createElement(qd,Object.assign({},this.props,{gray:!r}),G.createElement(rl,null,G.createElement("title",null,"Settings")),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("div",{className:"ph4-ns"},G.createElement(fp,{api:e,currentUser:t,creator:t})),G.createElement("div",null,G.createElement("div",{className:"bb b--black-10"},G.createElement("div",{className:"flex justify-between items-center mh2 mh4-ns mt4",style:{marginBottom:-1}},G.createElement("div",{className:"flex"},G.createElement(Vc,{className:ew(void 0,n),to:"/settings"},"Profile"),G.createElement(Vc,{className:ew("/secrets",n),to:"/settings/secrets"},"Secrets")))),G.createElement("div",{className:"pt4"},G.createElement("div",{className:"ph4-ns"},void 0===n?G.createElement(Xy,this.props):"/secrets"===n?G.createElement(Zy,this.props):null))))))}}class nw extends G.Component{constructor(...e){super(...e),qc(this,"state",{team:null,role:"none",walkthrough:this.props.location.state&&this.props.location.state.walkthrough}),qc(this,"reload",()=>{const{api:e}=this.props;this.load(Gc({},this.props,{api:e.init({cache:"no-cache"})}))}),qc(this,"dismissTeamWalkthrough",()=>{this.setState({walkthrough:!1})})}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){this.load(e)}load({user:e,match:{params:{teamLogin:t}},api:n}){n.userLoad(t).then(t=>{const n=e.teams.find(e=>e.id==e.id).role;this.setState({team:t,role:n})})}render(){const{api:e,user:t,match:{params:{tab:n}}}=this.props,{team:r,role:i,walkthrough:o}=this.state;return G.createElement(Uh,{query:{maxWidth:640}},a=>G.createElement(qd,Object.assign({},this.props,{gray:!a}),G.createElement(rl,null,r&&G.createElement("title",null,r.name||r.login)),o&&r&&G.createElement("div",{className:"flex mw6-ns center-ns pa3 nt4 bg-washed-yellow br2 br--bottom"},G.createElement("div",{className:"flex-auto f6 lh-copy black-50"},"Finish setting up your team with a display name, avatar, URL, and team email address. Then"," ",G.createElement(Vc,{className:"no-underline black hover-blue",to:`/team/@${r.login}/settings`},"invite the rest of your team.")),G.createElement("div",{onClick:this.dismissTeamWalkthrough,className:"pl2 light-silver hover-black pointer"},G.createElement(wu,{className:"w1 h1"}))),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2  pb5 bg-white b--black-10 br2 ba-ns pt4 "+(o?"mt4-ns":"mt5-ns")},G.createElement("div",{className:"ph4-ns"},G.createElement(fp,{api:e,currentUser:t,creator:r})),r&&G.createElement("div",null,G.createElement("div",{className:"bb b--black-10"},G.createElement("div",{className:"flex justify-between items-center mh2 mh4-ns mt4",style:{marginBottom:-1}},G.createElement("div",{className:"flex"},G.createElement(Vc,{className:ew(void 0,n),to:`/team/@${r.login}/settings`},"Team"),"owner"===i&&G.createElement(Vc,{className:ew("/profile",n),to:`/team/@${r.login}/settings/profile`},"Profile"),G.createElement(Vc,{className:ew("/secrets",n),to:`/team/@${r.login}/settings/secrets`},"Secrets"),"owner"===i&&G.createElement(Vc,{className:ew("/billing",n),to:`/team/@${r.login}/settings/billing`},"Billing")))),G.createElement("div",{className:"pt4"},G.createElement("div",{className:"ph4-ns"},void 0===n?G.createElement(jy,Object.assign({},this.props,{team:r,role:i})):"/billing"===n?G.createElement(Dy,Object.assign({},this.props,{team:r})):"/profile"===n?G.createElement(Xy,Object.assign({},this.props,{reloadTeam:this.reload,teamId:r.id,user:Gc({email:t.teams.find(e=>e.id===r.id).email},r)})):"/secrets"===n?G.createElement(Zy,Object.assign({},this.props,{teamId:r.id})):null))))))}}function rw({collection:e}){const t=e?`/collection/@${e.owner.login}/${e.slug}`:"#",n=e&&e.thumbnail;return G.createElement(Uh,{query:{maxWidth:640}},r=>G.createElement(Vc,{to:t,className:`flex-auto no-underline black br2 ${r?"":"hover-blue hover-shadow-4-trigger"} hide-child`,style:{scrollSnapAlign:"start"}},G.createElement("div",{className:`bg-white br2 ${n?"cover bg-center":""} ${r?"ba b--black-10":"hover-shadow-4"}`,style:{height:"7rem",backgroundImage:n?`url(https://static.observableusercontent.com/thumbnail/${n}.jpg)`:"var(--checkerboard)"}}),G.createElement("div",{className:"flex items-center justify-between pt2 pb3 pb0-ns f6"},G.createElement("div",{className:"fw7 truncate"},e?e.title:G.createElement("span",{className:"light-gray bg-light-gray"},"~~~~~~~~~~"),G.createElement(Eu,{className:"w1 h1 v-top ml1 child",style:{strokeWidth:1.5}})))))}const iw=(e,t)=>"db fw5 pv2 ph3-ns ph2 mr2 f6 no-underline br2 br--top bt bl br "+(e==t?"black-70 bg-near-white b--black-10":"black-50 hover-black b--transparent");function ow({document_count:e}){return e>0}function aw(e){const t=lu(e),{types:n,tab:r}=t;return Gc({},Kc(t,["types","tab"]),{types:"trash"===r?["trash"]:n?[].concat(n):[],tab:r})}function sw({stats:e}){return G.createElement("div",{className:"flex items-center pt3 pt0-ns f6"},e?G.createElement(G.Fragment,null,G.createElement("div",{className:"mr1 fw6 black"},mh(e.published_document_count)),G.createElement("div",{className:"mr3 black-50 fw4"},1===e.published_document_count?"notebook":"notebooks"),G.createElement("div",{className:"mr1 fw6 black"},mh(e.like_count)),G.createElement("div",{className:"mr3 black-50 fw4"},1===e.like_count?"like":"likes"),G.createElement("div",{className:"mr1 fw6 black"},mh(e.fork_count)),G.createElement("div",{className:"black-50 fw4"},1===e.fork_count?"fork":"forks")):G.createElement(G.Fragment,null,G.createElement("span",{className:"near-white bg-near-white"},"~~~~~~~~~~~~~~")))}class lw extends G.Component{constructor(e){super(e),qc(this,"state",{notebooks:new Array(27).fill(void 0),collections:new Array(27).fill(void 0),pinnedCollections:[],owner:void 0,stats:void 0,collectionModal:!1,role:"none"}),qc(this,"emptyTrash",async()=>{document.activeElement.blur();const{owner:e}=this.state;"team"===e.type?await this.props.api.documentsEmptyTrash(e.id):await this.props.api.documentsEmptyTrash(),this.reload(this.props)}),qc(this,"reload",({user:e,match:{params:{userLogin:t}},location:{search:n},api:r}=this.props)=>{const{before:i,tab:o,types:a}=aw(n);let s,l="none";if(e&&(t===e.login?(l="self",s=e):(s=e.teams.find(e=>t===e.login))&&(l="member",s=Gc({type:"team"},s))),s?this.setState({owner:s,role:l}):((s=r.userLoad(t)).then(e=>this.setState({owner:e})),this.setState({role:l})),r.userLoadStats(t).then(e=>this.setState({stats:e})),Promise.all([s,r.collectionsLoadUserPinned(t)]).then(([e,t])=>{this.setState({pinnedCollections:t.map(t=>Gc({},t,{owner:e}))})}),"collections"===o)Promise.all([s,r.collectionsLoadUser(t,{before:i})]).then(([e,t])=>{"none"===l&&(t=t.filter(ow)),this.setState({collections:t.map(t=>Gc({},t,{owner:e}))})}),this.setState({notebooks:[]});else{let e;switch(l){case"none":e=Promise.all([s,r.documentLoadByUser(t,i)]).then(([e,t])=>t.map("team"===e.type?t=>Gc({team:e},t):t=>Gc({creator:e},t)));break;case"self":e="likes"===o?r.documentsLoadUserLikes(i):r.documentsLoadUser({before:i,types:a}).then(e=>e.map(e=>Gc({creator:s},e)));break;case"member":e=r.documentsLoadTeam(s.id,{before:i,types:a}).then(e=>e.map(e=>Gc({team:s},e)))}"trash"===o&&(e=e.then(e=>e.map(e=>Gc({trashed:!0},e)))),e.then(e=>this.setState({notebooks:e}))}}),qc(this,"changeFilter",e=>{const{history:t,location:n}=this.props;let r=e.target.value&&e.target.value.split(",");t.push(Gc({},n,{search:cu(r?{types:r}:{})}))}),qc(this,"showCollectionModal",()=>{this.setState({collectionModal:!0})}),qc(this,"hideCollectionModal",()=>{this.setState({collectionModal:!1})}),e.preloadData&&(this.state=Gc({preloaded:!0},e.preloadData))}componentDidMount(){this.state.preloaded||this.reload(this.props)}componentWillReceiveProps(e){this.setState({notebooks:new Array(27).fill(void 0)}),this.reload(e)}render(){const{api:e,user:t,location:{search:n},match:{params:{userLogin:r}}}=this.props;let{notebooks:i,collections:o,owner:a,role:s,stats:l,collectionModal:c,pinnedCollections:u}=this.state;const{tab:h,types:d}=aw(n),p=!h&&"none"!==s&&G.createElement("select",{className:"w-100 mb0-ns mb4 f6 fw6 black-50 bg-light-gray w-auto-ns bn",onChange:this.changeFilter,value:d.join(",")},G.createElement("option",{value:""},"All"),G.createElement("option",{value:"public"},"Public"),G.createElement("option",{value:"shared"},"Shared"),G.createElement("option",{value:"private"},"Private")),f=G.createElement("div",{onClick:this.showCollectionModal,className:"inline-flex items-center ph3 pv2 mr2 f6 fw5 no-underline black-50 hover-black pointer"},G.createElement(mu,{className:"w1 h1 mr1"}),G.createElement("div",null,"New collection")),m="self"===s?"You dont":"This team doesnt";return G.createElement(qd,Object.assign({},this.props,{gray:!0,seamless:!0}),G.createElement(rl,null,a&&G.createElement("title",null,a.name||a.login),G.createElement("link",{rel:"alternate",type:"application/rss+xml",href:`https://api.observablehq.com/documents/${r}.rss`}),a&&G.createElement("meta",{name:"description",content:`Recently published notebooks by ${a.name||a.login}`})),G.createElement("div",{className:"mb4 nt4 bg-white bb b--black-10 w--full"},G.createElement("div",{className:ih},G.createElement("div",{className:"flex-ns justify-between pv4"},G.createElement(fp,{api:e,currentUser:t,creator:a,socialLinks:!0}),G.createElement(sw,{stats:l})),("none"!==s||u.length>0)&&G.createElement("div",{className:"flex justify-between items-center ml0-ns nl3",style:{marginBottom:-1}},G.createElement("div",{className:"flex flex-auto"},G.createElement(Vc,{className:iw(void 0,h),to:`/@${r}`},"Notebooks"),G.createElement(Vc,{className:iw("collections",h),to:"?tab=collections"},"Collections"),"self"===s&&G.createElement(Vc,{className:iw("likes",h),to:"?tab=likes"},"Likes"),("self"===s||"member"===s)&&G.createElement(Vc,{className:iw("trash",h),to:"?tab=trash"},"Trash")),G.createElement(Uh,{query:{maxWidth:479}},e=>!e&&"collections"===h&&"none"!==s&&f),("self"===s||"member"===s)&&G.createElement("div",{className:"inline-flex items-center"},a&&G.createElement(Vc,{className:"inline-flex items-center ph1 ph3-ns pv2 mr2 f6 fw5 no-underline black-50 hover-black",to:"team"===a.type?`/team/@${a.login}/settings`:"/settings"},G.createElement(_u,{className:"w1 h1 mr2"}),G.createElement("span",{className:"dn di-ns"},"Settings")),p&&G.createElement(Uh,{query:{maxWidth:479}},e=>!e&&p))))),G.createElement("div",null,p&&G.createElement(Uh,{query:{maxWidth:479}},e=>e&&p),G.createElement(Uh,{query:{minWidth:479}},e=>!e&&"collections"===h&&"none"!==s&&G.createElement("div",{className:"flex justify-end pb2"},f)),"collections"===h?G.createElement("div",null,o.length?G.createElement("div",null,G.createElement("div",{className:"dg grid-gap1 grid-template-columns-1 grid-template-columns-3-ns"},o.map((t,n)=>G.createElement(sh,{key:t?t.id:n,api:e,collection:t}))),o.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?${cu({tab:h,types:d,before:o[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more"))):"none"===s?G.createElement("div",{className:"flex flex-column justify-center items-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy black-50"}," This ","team"===a.type?"team":"person"," doesnt have any collections.")):G.createElement("div",{className:"flex flex-column justify-center items-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},m," have any collections."))):G.createElement(G.Fragment,null,"none"!==s&&"trash"===h&&i.length>0&&G.createElement("div",{className:"mb4"},G.createElement("div",{className:"pa3 f5 lh-copy bg-white ba b--red br2"},G.createElement("div",{className:"flex items-center"},G.createElement(Pu,{className:"mr3 red",style:{width:"1.5em",height:"1.5em",strokeWidth:1,flexShrink:0}}),G.createElement("div",{className:"flex-auto"},G.createElement("span",{className:"flex-auto f6 lh-copy black-70",style:{maxWidth:500}},"Notebooks in the trash for more than 30 days will be automatically deleted.")),G.createElement("button",{onClick:this.emptyTrash,disabled:0===i.length,className:`dn db-ns ph3 pa2 f6 nowrap no-underline bg-white ${0===i.length?"black-40":"dark-red hover-dark-red hover-bg-washed-red pointer"} br2 bn`},"Empty trash now"))),G.createElement("button",{onClick:this.emptyTrash,disabled:0===i.length,className:`db dn-ns center ph3 pa2 mt3 f6 f5 nowrap no-underline bg-white ${0===i.length?"black-40":"dark-red hover-dark-red hover-bg-washed-red pointer"} br2 bn`},"Empty trash now")),!h&&!d[0]&&u.length>0?G.createElement("div",{className:"pv3 mb4"},G.createElement("div",{className:"flex justify-between mb3"},G.createElement(Vc,{to:"?tab=collections",className:"inline-flex items-center f5 fw4 no-underline black-70 hover-blue hide-child"},"Featured collections",G.createElement(Eu,{className:"w1 h1 ml1 child",style:{strokeWidth:1}}))),G.createElement("div",{className:"dg-ns",style:{gridTemplateColumns:"repeat(4, 1fr)",gridGap:16}},u.slice(0,4).map(e=>G.createElement(rw,{key:e.id,collection:e})))):null,i.length>0?G.createElement("div",null,G.createElement("div",{className:"listing-grid"},i.slice(0,27).map((e,n)=>G.createElement(xh,Object.assign({},this.props,{key:e?e.id:n,notebook:e,reload:this.reload,user:t})))),i.length>27&&G.createElement("div",{className:"mt4 tc"},G.createElement(Vc,{to:`?${cu({tab:h,types:d,before:"likes"===h?i[26].like_time:i[26].update_time},{encode:!1})}`,className:"pv2 ph3 dib br2 link blue bg-white hover-dark-blue"},"Show more"))):"none"!==s?G.createElement("div",{className:"flex flex-column justify-center items-center pv5"},G.createElement("div",{className:"mb2 f4 lh-copy tc black-50"},"trash"===h?`${m} have anything in the trash.`:"likes"===h?`${m} have any likes.`:`${m} have any ${d.join("/")} notebooks.`),!h&&G.createElement(Vc,{to:"team"===a.type?`/team/@${a.login}/new`:"/new",className:"inline-flex items-center justify-center ph3 pa2 blue hover-dark-blue bg-white br2 link shadow-hover"},G.createElement(mu,{className:"w1 h1 mr1",style:{strokeWidth:1}}),G.createElement("div",null,"Start a new notebook"))):G.createElement("div",{className:"flex justify-center pv5"},G.createElement("div",null,G.createElement("div",{className:"mb2 f4 lh-copy black-50"}," This ","team"===a.type?"team":"person"," hasnt published any notebooks."))))),c&&G.createElement(eh,{onDismiss:this.hideCollectionModal},G.createElement(mp,Object.assign({onDismiss:this.hideCollectionModal,owner:a},this.props))))}}qc(lw,"preload",({match:{params:{userLogin:e}},location:{search:t},api:n})=>{const{before:r,tab:i}=aw(t);return"trash"===i||"likes"===i?null:Promise.all([n.userLoad(e),n.userLoadStats(e),n.collectionsLoadUserPinned(e),"collections"===i?n.collectionsLoadUser(e,{before:r}):[],"collections"!==i?n.documentLoadByUser(e,r):[]]).then(([e,t,n,r,i])=>({owner:e,notebooks:i.map("team"===e.type?t=>Gc({team:e},t):t=>Gc({creator:e},t)),collections:r.filter(ow).map(t=>Gc({},t,{owner:e})),pinnedCollections:n.map(t=>Gc({},t,{owner:e})),stats:t,role:"none"}))});class cw extends G.Component{constructor(...e){super(...e),qc(this,"state",{login:"",name:"",email:this.props.user.email,stripe_source:void 0,handler:void 0,cardError:!1,loading:void 0,serverError:void 0}),qc(this,"onToken",async e=>{const{api:t,history:n,refreshUser:r}=this.props,{login:i}=this.state;this.setState({loading:!0});try{await t.teamCreate({login:i,stripe_token:e.id}),await r(),n.push(`/team/@${i}/settings/profile`,{walkthrough:!0})}catch(o){if(!o.errors)throw o;const e=o.errors[0].code;switch(e){case"LOGIN_CONFLICT":case"LOGIN_INVALID":this.setState({loginValid:!1,serverError:e,loading:!1});break;case"CARD_ERROR":this.setState({cardError:!0,loading:!1})}}}),qc(this,"addBilling",()=>{const{email:e,login:t,handler:n}=this.state;n.open({name:"Observable, Inc.",image:"https://static.observablehq.com/favicon-512.e994d8ef78e387a9715cc1aab4dfdbc250bf565186e1165a931b055d1e02e84d.png",description:`${t}: Team account`,email:e,panelLabel:"Save"})}),qc(this,"onChange",e=>{const{target:{name:t,value:n}}=e;this.setState({[t]:n})}),qc(this,"onLoginChange",e=>{this.setState({serverError:void 0,login:e})}),qc(this,"onLoginValid",e=>{this.setState({loginValid:e})})}componentWillMount(){const{user:e}=this.props;if(!e.flag_create_team)throw new Zc;Um("https://checkout.stripe.com/checkout.js").catch(()=>this.setState({handler:window.StripeCheckout.configure({key:"pk_live_A5hiyxHhT8FK6EIWYFZMuHo8",locale:"auto",zipCode:!0,token:this.onToken})}))}render(){const{loginValid:e,loading:t,cardError:n,serverError:r}=this.state;return G.createElement(Uh,{query:{maxWidth:640}},i=>G.createElement(qd,Object.assign({},this.props,{gray:!i}),G.createElement(rl,null,"Observable / Create a team"),G.createElement("div",{className:"mw6-ns center-ns ph0-ns ph2 pt4 pb5 mt5-ns bg-white b--black-10 br2 ba-ns"},G.createElement("div",{className:"ph4-ns"},G.createElement("div",{className:"flex-ns justify-between items-center mt0 mb2"},G.createElement("h3",{className:"ma0 f4 fw7 black"},"Create a team"),G.createElement("div",{className:"mt2 mt0-ns f6 black-70"},"$12 per member, billed monthly")),G.createElement("div",{className:"pv2 f6 lh-copy"},G.createElement("div",{className:"pb1 black-50"},"Team accounts include:"),G.createElement("div",null," Unlimited public notebooks"),G.createElement("div",null," Unlimited private notebooks"),G.createElement("div",null," Real-time collaborative editing"),G.createElement("div",null," Email support")),G.createElement(Zd,Object.assign({},this.props,{title:"Team URL",name:"team URL",serverError:r,onLoginChange:this.onLoginChange,onLoginValid:this.onLoginValid})),G.createElement("div",null,n&&G.createElement("div",{className:"flex items-center pv1 f6 dark-red"},G.createElement(Pu,{className:"w1 h1 mr1"}),"We werent able to charge this card."),G.createElement("button",{className:`mt3 inline-flex justify-center items-center ph3 pv2 f6 fw6  br2 pointer bn\n                      ${e?" bg-blue hover-bg-dark-blue white hover-white ":"bg-light-gray hover-bg-moon-gray black-70 hover-black  "} ${t?"o-50 pen":""}`,onClick:this.addBilling},"Add payment method & create team",G.createElement(Eu,{className:"ml1"})))))))}}class uw extends G.Component{constructor(...e){super(...e),qc(this,"state",{confirmed:"initial"})}componentDidMount(){this.confirm()}async confirm(){const{match:{params:{token:e}},api:t,refreshUser:n}=this.props;try{await t.userEmailConfirm(e),await n(),this.setState({confirmed:!0})}catch(r){this.setState({confirmed:!1})}}render(){const{confirmed:e}=this.state;return G.createElement(Uh,{query:{maxWidth:640}},t=>G.createElement(qd,Object.assign({},this.props,{gray:!t}),G.createElement(rl,null,"Confirm email"),G.createElement("div",{className:"flex flex-column measure-narrow center-ns items-center justify-center ph0 ph4-ns ph2 pv5 mt5-ns black-70 bg-white b--black-10 br2 ba-ns"},"initial"===e?G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Confirming"):e?G.createElement(G.Fragment,null,G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email change confirmed"),G.createElement(Vc,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")):G.createElement(G.Fragment,null,G.createElement("h3",{className:"ma0 mb2 f4 fw4"},"Email could not be confirmed"),G.createElement("div",{className:"mv3 f6 lh-copy"},"The confirmation link you followed may have already been used, or was issued for another user. The email attached to your account has not been changed."),G.createElement(Vc,{to:"/",className:"inline-flex ph3 pv2 mt4 f6 fw6 no-underline white bg-blue hover-bg-dark-blue br2 pointer bn"},"Return to home page")))))}}class hw extends G.Component{render(){const{user:{login:e},match:{params:{folder:t}}}=this.props,n={"/trash":{tab:"trash"},"/public":{types:"public"},"/likes":{tab:"likes"},undefined:{types:"private"}}[t];return G.createElement(lc,{to:`/@${e}?${cu(n)}`})}}const dw=({match:{params:{collectionSlug:e}}})=>G.createElement(lc,{to:`/collection/@observablehq/${e}`});class pw extends G.Component{render(){return G.createElement(G.Fragment,null,G.createElement(rl,{defaultTitle:"Observable",titleTemplate:"%s / Observable"}),G.createElement(Fc,null,G.createElement(tp,{error:this.props.error},G.createElement(Sc,null,G.createElement(rh,{exact:!0,path:"/",component:Kd}),G.createElement(rh,{permissions:"private",exact:!0,path:"/notebooks:folder(/public|/trash)?",component:hw}),G.createElement(rh,{permissions:"private",exact:!0,path:"/likes",component:({user:{login:e}})=>G.createElement(lc,{to:`/@${e}?${cu({tab:"likes"})}`})}),G.createElement(rh,{permissions:"private",exact:!0,path:"/new",component:Py}),G.createElement(rh,{exact:!0,path:"/d/:id([0-9a-f]+)",component:Py}),G.createElement(rh,{exact:!0,path:"/d/:id([0-9a-f]+)@:version([0-9]+)",component:e=>G.createElement(Py,Object.assign({},e,{type:"versioned"}))}),G.createElement(rh,{exact:!0,path:"/d/:id([0-9a-f]+)/safe",component:e=>G.createElement(Py,Object.assign({},e,{type:"safe"}))}),G.createElement(rh,{userRedirect:"/@observablehq/playground",exact:!0,path:"/playground",component:e=>G.createElement(Py,Object.assign({},e,{type:"playground"}))}),G.createElement(rh,{exact:!0,path:"/compare/:baseId([0-9a-f]+):baseVersion(@[0-9]+)?...:id([0-9a-f]+):version(@[0-9]+)?",component:e=>G.createElement(Py,Object.assign({},e,{type:"compare"}))}),G.createElement(rh,{exact:!0,path:"/compare/:baseId([0-9a-f]+):baseVersion([@~][0-9]+)",component:e=>G.createElement(Py,Object.assign({},e,{type:"compare"}))}),G.createElement(rh,{permissions:"private",exact:!0,path:"/settings:tab(/secrets)?",component:tw}),G.createElement(rh,{permissions:"private",exact:!0,path:"/settings/confirm-email/:token([0-9a-z]+)",component:uw}),G.createElement(rh,{permissions:"private",exact:!0,path:"/team/new",component:cw}),G.createElement(rh,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/settings:tab(/billing|/profile|/secrets)?",component:nw}),G.createElement(rh,{permissions:"private",exact:!0,path:"/team/@:teamLogin([0-9a-z_-]+)/new",component:Py}),G.createElement(rh,{permissions:"private",exact:!0,path:"/team/:teamId/accept/:id([0-9a-f]+)",component:rp}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)",component:Py}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)",component:Py}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)@:version([0-9]+)",component:e=>G.createElement(Py,Object.assign({},e,{type:"versioned"}))}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)@:version([0-9]+)",component:e=>G.createElement(Py,Object.assign({},e,{type:"versioned"}))}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)/safe",component:e=>G.createElement(Py,Object.assign({},e,{type:"safe"}))}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)/safe",component:e=>G.createElement(Py,Object.assign({},e,{type:"safe"}))}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+)/forks",component:bp}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)/:documentSlug([0-9a-z_-]+/[0-9]+)/forks",component:bp}),G.createElement(rh,{exact:!0,path:"/d/:id/forks",component:bp}),G.createElement(rh,{exact:!0,path:"/@:userLogin([0-9a-z_-]+)",component:lw}),G.createElement(rh,{exact:!0,path:"/search",component:Iy}),G.createElement(rh,{exact:!0,path:"/recent",component:np}),G.createElement(rh,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+)",component:dw}),G.createElement(rh,{exact:!0,path:"/collection/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:dw}),G.createElement(rh,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+)",component:vp}),G.createElement(rh,{exact:!0,path:"/collection/@:userLogin([0-9a-z_-]+)/:collectionSlug([0-9a-z_-]+/[0-9]+)",component:vp}),G.createElement(lc,{from:"/collections/featured",to:"/@observablehq?tab=collections"}),G.createElement(lc,{from:"/scratchpad",to:"/playground"}),G.createElement(rh,{permissions:"anon-only",path:"/login",component:Qu}),G.createElement(rh,{path:"/loggedin/:path*",component:e=>G.createElement(Oy,e)}),G.createElement(rh,{exact:!0,path:"/error",component:Ry}),G.createElement(rh,{exact:!0,path:"/thumbnail/:id([0-9a-f]+)@:version([0-9]+)",component:e=>G.createElement(Py,Object.assign({},e,{type:"thumbnail"}))}),G.createElement(rh,{exact:!0,path:"/open-source",component:Ly}),G.createElement(rh,{component:My})))))}}window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-112925870-1","auto"),ga("set","transport","beacon"),ga("set","anonymizeIp",!0),ga("set","page",location.pathname+location.search),ga("send","pageview"),async function(){const e=document.querySelector("#app"),t=e.getAttribute("csrf-token");e.removeAttribute("csrf-token");try{await th(t),Vs.render(G.createElement(pw,null),e)}catch(n){Vs.render(G.createElement(pw,{error:n}),e)}}()}();

//# sourceMappingURL=bundle.0427fc53b695117c085419d432f5189848c2a14d0d0da01ac950020d126daaa4.js.map